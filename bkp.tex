\documentclass[
 aip,
 jmp,
 amsmath,amssymb,
 reprint,
]{revtex4-1}
\usepackage{graphicx}
\usepackage{grffile}
\usepackage{dcolumn}
\usepackage{bm}
\usepackage{multirow}
\usepackage{color}

\newcommand{\massa}{{\large \textsc{massa}}}
\newcommand{\mass}{{\large \textsc{mass}}}
\newcommand{\figgus}{{\large \textsc{figgus}}}


\begin{document}
\preprint{AIP/123-QED} 

\title{Psychophysics of musical elements in discrete-time representation of sound}

\author{Renato Fabbri}
 \homepage{http://www.estudiolivre.org/el-user.php?view\_user=gk}
 \email{renato.fabbri@gmail.com}
  \affiliation{ 
Instituto de F\'isica de S\~ao Carlos, Universidade de S\~ao Paulo (IFSC/USP)
}

\author{Luciano da Fontoura Costa}
  \homepage{http://cyvision.ifsc.usp.br/~luciano/}
  \email{ldfcosta@gmail.com}
 \altaffiliation[Also at ]{IFSC-USP}

 \author{Osvaldo N. Oliveira Jr.}
  \homepage{www.polimeros.ifsc.usp.br/professors/professor.php?id=4}
  \email{chu@ifsc.usp.br}
 \altaffiliation[Also at ]{IFSC-USP}

\date{\today}
\begin{abstract}

    The representation of the basic elements of music - such as notes, ornaments and intervalar structures - in terms of discrete audio signal is often used in software for music creation and design. Nevertheless, there is no unified approach that relates these elements to the sound discrete samples. In this article, each musical element is described by equations in sonic time samples, which are all implemented in scripts within an open source software toolbox, referred to as \massa\ (Music and Audio in Sequences and Samples). The fundamental element, the musical note with duration, volume, pitch and timbre, is related quantitatively to the characteristics of the discrete-time signal. Internal variations, such as tremolos, vibratos and spectral fluctuations, are also considered, which enables the synthesis of notes inspired by real instruments and new sonorities. With this representation of notes, resources are provided for the generation of musical structures, such as rhythmic meter, pitch intervals and cycles. The efficacy of these physical descriptions of basic musical elements was confirmed by the synthesis of small musical pieces within each frame: basic notes, incremented notes and notes in music. It is possible to synthesize whole albums through collage of the scripts and parameterization. 
    The sample-based analitical description, and the paradigm of open source implementation, enables cientific experiments in precise and trustful ways. In fact, \massa\ has already been employed by external users for diverse purposes. Among these, it is mentioned an acoustic effect recognized by diverse individuals in mailing lists but not found in literature, and uses related to art and education.

\end{abstract}
\pacs{*43.66.-x,43.66.+y,05.10.-a} % PACS, the Physics and Astronomy
\keywords{psychophysics, acoustics, statistics, signal processing, digital audio, music}
\maketitle

\section{\label{sec:level1}Introduction}

Representing musical structures and artifices by it's discrete sound characteristics is the purpuse of this work. The results include mathematical relations and it's computer program implementations. Next section exposes the theoretical description, which is implemented as scripts in a one-to-one relation to the equations.

\subsection{Sound and digital audio}

Sound is a longitudinal wave of mechanical pressure. The frequency bandwidth between $20Hz$ and $20kHz$ is appreciated by human hearing system with boudaries dependent on the person, climate conditions and sonic charachteristics itself~\cite{Roederer}. If considereded the speed of sound of $\approx 343.2 m/s$, this limits corresponds to $\frac{343.2}{20} = 17.16\,m$ and $\frac{343.2}{20000}=17.16\,mm$.

Human perception of sound envolves captivation by bones, stomach, ears, tranfer functions of head and processing dorso and nervous system. Besides that, the ear is a dedicated organ to the capture of this waves. Its mechanism decomposes sound into its sinusoidal spectrum and delivers them to the nervous system. This sinusoidal components are crucial to musical fenomena, as one can observe in the composition of sounds with musical interest and in tunnings and scales. Subsection~\ref{subsec:dicNote} exposes the presence of sinusoids in discrete-time audio and charachterizes a basic musical note.

The representation of sound is called audio (although these terms are often used without distinction), and this can be provenient from caption by microphones or from sythesis. Often enough, digital audio is specified by protocols that eases file storage and transfering, in cost of a direct representation or even some loss in quality. Standard representation of digital audio, on the other hand, consists of samples equally spaced by $\lambda_s$ durations in time, with each sample spacified by a sample number of bits. This is called the Pulse Code Modulation representation of sound (PCM). A PCM digital sound is charachterized by it's sampling frequency $f_s=\frac{1}{\lambda_s}$, also called sampling rate, and bit depth, which is the number of bits used of representing the amplitude of each sample. Figure~\ref{fig:PCM} shows $25$ samples of a PCM Ã¡udio with $4$ bits each. The $2^4=16$ possible steps for each sample, together with the regular spacing $\lambda_s$ between them, introduces a quantization error. This noise, caused by this errors, diminishes as these spacing diminishes.


\begin{figure*}
    \centering
        \includegraphics[width=\textwidth]{pcm}
        \caption{Pulse Code Modulation (PCM) audio: an analogic signal is represented by 25 samples with 4 bits each.}
        \label{fig:PCM}
\end{figure*}




By the Nyquist theorem, it is known that half the sampling frequency is the maximum frequency of the signal. Thus, it is necessary to have a sampling frequency at least twice the highest frequency heard by humans $f_s \geq 2\times 20kHz = 40kHz$. This is the basis for the use of the sampling frequencies $44.1kHz$ and $48kHz$, standards in Compact Disks (CD) and Broadcast systems (Radio and TV), respectively.

\subsection{Sonic art and musical theory}

A common definition for music is the art made by sounds and silences. For the average listener -- and a reasonable part of specialists -- the notion of music presupposes rhythmic and pitch organization such as explained in subsection~\ref{subsec:notesMusic}. Music from the twentieth century enlarged this traditional comprehension of music. This occured in concert music, specially in the concrete, electronic and electroacoustic styles. On the last decade of the century, it was evident that popular music has also incorporated sounds without defined pitch and temporal organization out of simple metrics. Even though, the note stands paradigmatic as a 'fundamental unit' of musical structures and, in practice, it can unfold in sounds that observe this recent developments. The definition and expansion of the musical note as the fundamental unit of music is approached in subsections~\ref{subsec:discNote} and~\ref{subsec:internalVar}, respectively. Subsection~\ref{subsec:notesMusic} tackles the organization of musical notes in a higher level~\cite{Wisnick,Webern,Lerdhal,Cook,Lacerda}.

Musical theory embody topics as diverse as psicho-acoustics, cultural manifestations and formalisms. The section~\ref{sec:results} point this topics as needed and designate external complements~\cite{Zamacois,Schoenberg,microsound}.

\subsection{Computational implementation}

The results presented in this article are implemented as scripts, i.e.\ small computer programs implemented using accessible technologies for better distribution and validation. This constitute the \massa\ toolbox, available in public domain in an open Git repository~\cite{gitBook}. This scripts are written in Python and make use of external libraries Numpy and Scikits/Audiolab that performs calls to Fortran routines for better computational efficiency. Part of this code has been trascribed to JavaScript and native Python with readiness, what points to uses of this contribution in Web browsers such as Firefox and Chromium~\cite{numpy, audiolab, tutpython, python}.

This are all open technologies, that is, published using licenses that allows copy, distribution and use of any part for research and derivatives. This way, the work here presented is available and eases co-authorship processes~\cite{Raymond,Lessig}. 

\subsection{Objectives}
\label{subsec:objectives}
The main goal of this article is to present a concise set of relations among musical basic elements and sequences of PCM audio samples. The next section is a minimum text in which music elements are presented side-by-side with the discrete-time samples they result. As validation and sharing, implementations on computer code of these relations and little musical pieces where gathered the \massa\ toolbox, available online.

Secondary objectives include presenting a framework of sound synthesis with control at sample level, with potential uses in psychoacoustical experiments and high-fidelity synthesis. The didatic presentation of the content favours use and apprehension on a problem which calls diverse topics to be tackled: signal processing, music and psycho-acoustics, to name just a few.

\subsection{Related work}
Due to the general interest, and number of knowledge areas involved, there is a number of books and computer implementations that are of interest or present similarities to what is presented in this work. A more detailed comparrison of them is pointed out in the bibliography~\cite{dissertacao}. There is almost no articles which could be found on the topic. In summary, there are computer implementations that use this analitycal descriptions implicitly, but there is no such a concise and mathemathical description of the processes implemented, as they aim to be libraries for sound and music. There are books on the topic that cover various aspects of effects and physical modeling, but none of them carry a concise description of musical elements and structures, but focus on aspects of musical sounds and ways to mimic traditional instruments.

\section{Characterization of the discrete-time musical note}
In diverse artistic and theoretical contexts, music is though of as being constituted by units called notes and this units taken as "atoms" that constitute music itself~\cite{Wisnick, Lovelock, Webern}.
Nowadays, this notes are undestood as a central element of certain musical paradigms. In a cognitive sense, the notes are seen as discretizations that eases and enrich the flow of information through music~\cite{Roederer, Lacerda}.
Canonically, a musical note posses at least duration, volume, pitch and tibre~\cite{Lacerda}. These are qualities which can be managed quantitatively, dictated by the evenly time spaced sound samples.

All the relations on this section are implemented at the file \emph{eqs2.1.py} of the \massa\ toolbox. Musical pieces \emph{5 sonic portraits} and \emph{reduced-fi} are available online as proof of concept.

\subsection{Duration}
The sample frequency $f_s$ is defined as the number of samples in each second of the discrete-time signal. Let $T_i=\{t_i\}$ be an ordered set of real samples separated by $\delta_s=1/f_s$ seconds. A Musical note of duration $\Delta$ seconds is presented as a sequence of $\lfloor \Delta . f_s \rfloor $ samples. That is, taken the integer part of the multiplication, it is admited an error of at most $-\lambda_a$ seconds, which, for musical porpuses, are usually fine, for $f_s=44.1kHz \;\;\Rightarrow\;\;\lambda_s=\frac{1}{44100}\approx 23$ microseconds. It is reasonable to state:


\begin{equation}\label{eq:dur}
T_{i}^{\Delta}={\{t_i\}}_{i=0}^{\lfloor \Delta . f_a \rfloor -1}
\end{equation}

Being $\Lambda=\lfloor \Delta . f_a \rfloor$ the number of samples in the sequence, so that $T_i=\{t_i\}_0^{\Lambda-1}$.

\subsection{Volume}\label{subsec:volume}
The sensation of sound volume depends on reverberation and harmonic distribution, among other characteristics worked on section~\ref{sec:varInternas}. One can get variations of volume through the potency of the wave~\cite{Chowning}:

\begin{equation}\label{eq:potencia}
pot(T_i)=\frac{\sum_{i=0}^{\Lambda -1} t_i^2}{\Lambda}
\end{equation} 

The final volume is dependent on the speakers amplification of the signal. Thus, what matters is the relative potency of a note in relation to the ones around it or the potency of a music section in relation to the rest. Differences in volume are measured in decibels, and these are calculated directly from the amplitudes through energy or potency:

\begin{equation}\label{decibels}
V_{dB}=10log_{10}\frac{pot(T^{'}_i)}{pot(T_i)}
\end{equation}

The quantity $V_{dB}$ has the decibel unit ($dB$). 
To each $10dB$ it is associated a "doubled volume".
Handy references are the $10dB$ for each step in the intensity scale: \emph{pianissimo}, \emph{piano}, \emph{mezzoforte}, \emph{forte} e \emph{fortissimo}. Other useful references are que equivalent in $dB$ of doubling amplitude or potency:

\begin{equation}\label{eq:ampVol}
\begin{split}
t_i^{'}=2 . t_i \Rightarrow pot(T^{'}_i)=4 . pot(T_i) \Rightarrow \\ \Rightarrow V^{'}_{dB}=10log_{10} 4 \approx 6 dB
\end{split}
\end{equation}

\begin{equation}\label{eq:potVol}
\begin{split}
pot(T^{'}_i)=2 pot(T_i) \Rightarrow \\ \Rightarrow V^{'}_{dB}=10log_{10} 2 \approx 3 dB
\end{split}
\end{equation}

and the amplitude gain for a sequence whose volume has been doubled ($10dB$):

\begin{equation}\label{eq:dobraVol}
\begin{split}
10log_{10}\frac{pot(T^{'}_i)}{pot(T_i)} = 10 \quad \Rightarrow \\ \Rightarrow \quad \sum_{i=0}^{\lfloor \Delta.f_a \rfloor -1}t^{'2}_i=10\sum_{i=0}^{\Lambda-1}t_i^2=\sum_{i=0}^{\Lambda-1}(\sqrt{10}.t_i)^2 \\
\therefore \quad t^{'}_i=\sqrt{10}t_i \quad \Rightarrow \quad t^{'}_i \approx 3,16t_i
\end{split}
\end{equation}

Thus, it is necessary a little bit more than to triplicate the amplitude for a doubled volume. This values are guides for the increases and decreases on the absolute values on the sample sequences with musical purposes. The direct conversion from decibels to amplitude gain (or attenuation) is:

\begin{equation}\label{ampDec}
A = 10^{\frac{V_{dB}}{20}}
\end{equation}

Where $A$ is the mutiplicative factor that relates the amplitudes before and after the amplification.

\subsection{Pitch}
Recapitulating, the musical particle (note) is a sequence $T_i$ which duration and volume corresponds to the size of sequence and the amplitude of its samples. The pitch is specified by the fundamental frequency $f_0$ whose cycle has duration $\delta_{f_0}=1/f_0$. This duration, multiplied by the sampling frequency $f_s$ results on the number of samples of the cycle: $\lambda_{f_0}=f_a . \delta_{f_0} =f_a/f_0$.

For didatic reasons, be $f_0$ such that it divides $f_s$ and $\lambda_{f_0}$ results an integer. If $T_i^f$ is a sonic sequence of fundamental frequency $f$, then:

\begin{equation}\label{periodicidade}
     T^f_i=\left\{ t_i^f \right\}=\left\{ t^f_{i+\lambda_{f}}  \right\}= \left\{ t^f_{i+\frac{f_a}{f}} \right\}
\end{equation}

In the next secion, frequencies $f$ that does not divide $f_s$ will be considered. This restriction does not imply in lost of generality of this section's content.

\subsection{Timbre}
While the period of the wave corresponds to a fundamental frequency, the trajectory of the wave inside the period - called the waveform - defines a harmonic spectrum and, thus, a timbre\footnote{The timbre is a subjective and complex characteristic. Physicaly, the timbre is multidimentionsl and given by the temporal dinamics behavior of enegy in spectral components that are harmonic or noisy. Beyond that, the word timbre is used to designate different things: one same note has different timbres, a same instrument has different timbres, two intruments of the same family possesses the same timbre that blends them in the same family and different timbres as they are different instruments. It is worth to mention that not all that is associated to timbre is manifested in spectral traces, even cultural or circunstancial aspects alter our perception of timbre}. Musically, it matters that sonic spectra with minimum differences result in timbres with crucial expressive differences and that, hence, diffetent timbres can be produced by using different spectra\cite{Roederer}.

The simplest case (and most important, as the following texts shows) in that of the spectrum that consists only of the fundamental frequency $f$ itself. This is the sinusoid, frequency in pure oscilatory movement called 'simple harmonic movement'. Be $S_i^f$ a sequence whose samples $s_i^f$ describes a sibusoid of frequency $f$:

\begin{equation}\label{senoide}
     S^f_i=\{ s^f_i \}=\Bigl\{ \sin\bigl(2\pi \frac{i}{\lambda_f} \bigr)  \Bigr\} = \Bigl\{ \sin\bigl(2\pi f \frac{i}{f_a}\bigr)  \Bigr\} 
\end{equation}

Where $\lambda_f=\frac{f_a}{f}=\frac{\delta_f}{\lambda_a}$  is the number of samples in the period.

In a similar fashion, other waveforms are used in music because of its spectral qualities and simplicity. While the sinusoid is an isolated point in the spectrum, these waves present a succession of harmonic components. These waveforms are specified in equations~\ref{sinusoid},~\ref{sawTooth},~\ref{triangular} and~\ref{square} are in figure~\ref{fig:formasDeOnda}.
These artificial waveforms are traditionally used in music for synthesis and oscilatory control of variables, they also present diverse used outside music\cite{Openheim}.

The sawtooth present all components of the harmonic series, with decreasing energy of $-6dB/octave$. The sequence of temporal samples can be described like this:

\begin{equation}\label{sawTooth}
     D^f_i=\left\{ d^f_i \right\}=\left\{ 2\frac{i\,\%\lambda_f}{\lambda_f} -1 \right\}
\end{equation}

The triangular waveform present only odd harminics falling with $-12dB/octave$:
\begin{equation}\label{triangular}
     T^f_i=\left\{ t^f_i \right\}=\left\{1- \left| 2 - 4\frac{i\,\%\lambda_f}{\lambda_f} \right| \right\}
\end{equation}

The square wave presets only odd harmonics falling at $-6dB/octave$:

\begin{equation}\label{quadrada}
     Q^f_i=\left\{ q^f_i \right\}= \left\{
         \begin{array}{l l}
              1 & \quad \text{for } \; \; (i\,\%\lambda_f)   <  \lambda_f /2  \\
              -1 & \quad \text{otherwise}\\
         \end{array} \right.
\end{equation}

The sawtooth is a common starting point for a subtractive synthesis, beacuse it has both odd and even harmonics with high energy. For musical intention, these waveforms are excessively rich in sharp harmonics and atenuant filtering on treble and midle parts of the spectrum is useful for reaching a more natural and pleasant sound. 
The relativelly attenuated harmonics of the triangle wave makes it the more functional - among the listed ones - to be used in the synthesis of musical notes without any treatment.

The square wave can be used in a subtractive synthesis the aims to mimic a clarinet. This instrument has only the odd harmonic components and the square wave is convenient with its abundant energy in high frequencies.

\begin{figure*}
    \centering
        \includegraphics[width=\textwidth]{waveForms}
    \caption{Basic musical waveforms. The synthetic  waveforms are in (a) and the real waveforms are in (b).}
        \label{fig:formasDeOnda}
\end{figure*}

Figure~\ref{fig:formasDeOnda} presents the waveforms described in equations  ~\ref{senoide}, ~\ref{denteDeSerra}, ~\ref{triangular} and ~\ref{quadrada} for $\lambda_f=100$ (period of $100$ samples). If $f_s=44.1kHz$, as PCM standard in Compact Disks, the wave has fundamental frequency $f=\frac{f_a}{\lambda_f}=\frac{44100}{100} = 441 \; Herz$, an A4, just above the central "C", whatever the waveform is.

The spectrum of each basic waveform is in figure~\ref{fig:espectroDeondas}. The isolated and exaclty harmonic components of the spectrum is a consequence of the fixed period usage. The sinusoid consists of a one and only node in spectrum, pure frequency. The sawtooh is the only with a complete harmonic series (odd and even components). Triangular and square waves has the same components (odd harmonics), decaing at $-12dB/octave$ and $-6dB/octave$ respectivelly.

\begin{figure*}
    \centering
        \includegraphics[width=\textwidth]{waveSpectrum}
    \caption{Spectrum of basic artificial musical waveforms.}
        \label{fig:espectroDeOndas}
\end{figure*}

The harmonic spectrum is formed by frequencies multiple from the fundamental frequency $f_n=(n+1)f_0$. As the human linear perception of pitch follows the a geometric progression of frequencies, the spectrum has notes different from the fundamental frequency. Additionally, the number of harmonics will be limited to the maximum frequency $f_s/2$ (by Nyquist's theorem).

Musically crucial here is to internalize that energy in an component of frequency $f_n$ means an oscilation in the constitution of the sound, purely harmonic and in that frequency $f_n$. This energy, specificaly concentrated on the $f_n$ is separated by the ear to enter a cognitive level of processing (this separation is done in many species is mechanisms similar to the human cochlea)~\cite{Roederer}.
The sinusoidal components are usually the main responsibles for the quality we call timbre. If they are not presented in harmonic proportions (small number relations), the sound is perceived as noisy or dissonant and not as a sonority with a univocally stablished fundamental frequency. Furthermore, the notion of absolute pitch in a complex sonority is based relies on the similarity of the spectrum to the harmonic series~\cite{Roederer}.

In the case of a fixed length period and waveform, the spectrum is perfectly harmonic and static. Each waveform is compound of specific proportions of harmonic components and the greater the curvature of a the part, the greater the contribution of the part to the energy on the high harmonics. That can be seen on real sounds. The wave rotulated as ``sampled real sound'' in figure~\ref{fig:formasDeOnda} is a period of $\Lambda_f=114$ samples, extracted from a relatively well behaved real sound. The oboe wave was sampled of a A4 also in $44.1kHz$. The chose period for sampling was a relatively short, with $98$ samples, corresonds to the frequency $\frac{44100}{98}=450Hz$. It can be noticed, from the curvatures, the oboe's rich spectrum in high frequencies and the lower spectrum of the real sound.

The sequence 
$ R_i=\{ r_i \}_0^{\lambda_f-1}$ of samples in the real sound of figure~\ref{fig:formasDeOnda} can be taken as a basis for a sound $T_i^f$ din the following way: 

\begin{equation}\label{sampleandoFormaDeOnda}
     T^f_i=\{ t_i^f \}=\Bigl\{ r_{(i\,\%\lambda_{f})} \Bigr\}
\end{equation}

The resulting sound has a the momentary spectrum of the original sound. Because it is repeated in an identical form, the spectrum is perfectly harmonic, withoud noise and variations tipical of the natural phenomenon.  This can be seen in figure~\ref{fig:espectroOboe}, that show the spectrum of the original oboe note and a note with same duration and whose samples consists of the repetition of cycle of figure~\ref{fig:formasDeOnda}. The natural spectrum exibit variations in the frequencies of the harmonics, its intensities and some noise. The note made from the sampled period has a perfecly harmonic spectrum

\begin{figure*}
    \centering
        \includegraphics[width=\textwidth]{oboeNaturalSampledSpectrum}
    \caption{Spectrum of the sonic waves of a natural oboe note and one made from a sampled period. The natural sound has fluctuations in the harmonics and in noise, while the sampled period note has a perfectly harmonic spectrum.}
        \label{fig:espectroOboe}
\end{figure*}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Spectrum at sampled sound}
The presence and behaviour of these sinosoidal components in the discretized sound have particularities. Having a signal $T_i$ and its Fourier decomposition $\mathcal{F}\langle T_i\rangle=C_i=\{c_i\}_0^{\Lambda-1}$, the recomposition is the sum of frequential components as time samples\footnote{It is important to note that the factor $\frac{1}{\Lambda}$ could be distributed among the Fourier transform and its reconstruction, as prefered.}:

\begin{equation}\label{recomposicaoFourier}
t_i = \frac{1}{\Lambda}\sum_{k=0}^{\Lambda-1}c_ke^{j \frac{2\pi k}{\Lambda} i } = \frac{1}{\Lambda}\sum_{k=0}^{\Lambda-1}(a_k+ j . b_k)\left[cos(w_k i) +j . sen(w_k i)\right]
\end{equation}

Where $c_k = a_k + j . b_k$ defines the amplitude and phase of each frequency: $w_k=\frac{2\pi}{\Lambda}k$ in radians or $f_k=w_k\frac{f_a}{2\pi}=\frac{f_a}{\Lambda}k$ in Hertz, paying attention to the respective limits in $\pi$ and in $\frac{f_a}{2}$ given by the Nyquist Theorem. 

For a sound signal, samples $t_i$ are real and are given by the real part of equation~\ref{recomposicaoFourier}:

\begin{equation}\label{moduloEfase}
\begin{split}
t_i& = \frac{1}{\Lambda}\sum_{k=0}^{\Lambda-1}\left[a_k cos(w_k i) -b_k sen(w_k i)\right] \\
   & = \frac{1}{\Lambda}\sum_{k=0}^{\Lambda-1}\sqrt{a_k^2 + b_k^2} \; cos\left[w_k i - tg^{-1}\left(\frac{b_k}{a_k}\right)\right]
\end{split}
\end{equation}

Equation xxx shows how the imaginary term $c_k$ adds a phase to the real sinusoid, e.g.\ the imaginary terms $b_k$ from the Fourier spectral decomposition make possible the phase sweep $\left[-\frac{\pi}{2},+\frac{\pi}{2}\right]$ given by $tg^{-1}\left(\frac{b_k}{a_k}\right)$ which has this image. The signal from $a_k$ specify the right and left side of the trigonometric circle, complementing the phase sweeping: $\left[-\frac{\pi}{2},+\frac{\pi}{2}\right] \cup \left[\frac{\pi}{2},\frac{3\pi}{2}\right]\equiv [2\pi]$.


 \begin{figure}[h!]
     \centering
         \includegraphics[width=\textwidth]{figuras/amostras2c__}
     \caption{Oscillation for 2 samples (maximum frequency for any $f_a$). The first coefficient reflects a dettachment (\emph{offset} or \emph{bias}) and the second coefficient specifies the oscillation amplitude.}
         \label{fig:amostras2}
 \end{figure}

Figure~\ref{fig:amostras2} shows two samples and its spectral components. In this case, the Fourier decomposition has one unique pair of coefficients $\{c_k=a_k-j.b_k\}_0^{\Lambda-1=1}$ relatives to frequencies $\{f_k\}_0^1=\left\{w_k\frac{f_a}{2\pi}\right\}_0^1=\left\{k\frac{f_a}{\Lambda=2}\right\}_0^1=\left\{0,\frac{f_a}{2}=f_{\text{mÃ¡x}}\right\}$
with energies $e_k=\frac{(c_k)^2}{\Lambda=2}$. The role of amplitudes $a_k$ is clearly observed with $\frac{a_0}{2}$, the fixed dettachment\footnote{Also called \emph{bias} or \emph{offset}.} and $\frac{a_1}{2}$, oscillation own amplitude given by the relation $f_k=k \frac{f_a}{\Lambda=2}$.
This case have special relevance. The minimum needed to represent an oscillation are 2 samples and it yelds the Nyquist frequency $f_{\text{mÃ¡x}}=\frac{f_a}{2}$. That is the maximum frequency in a sound sampled with $f_a$ samples per second\footnote{Any sampled signal has this property, not only the digitalized sound.}.

All fixed sequences $T_i$ of only $3$ samples also have just $1$ frequency because their first harmonic has $1,5$ samples and exceeds the bottom limit of 2 samples, e.g.\ the frequency of the harmonic would exceed the Nyquist frequency:  $\; \frac{2. f_a}{3} > \frac{f_a}{2} $. 
The coefficients $\{c_k\}_0^{\Lambda-1=2}$ are present in 3 frequency components. One is relative to zero frequency ($c_0$), the other two ($c_1$ and $c_2$) have the same role for the reconstruction of sinusoid with $f=f_a/3$.

 \begin{figure}[h!]
     \centering
         \includegraphics[width=\textwidth]{figuras/amostras3b}
     \caption{Three fixed samples presents only one non-null frequency. $c_1=c_2^*$ and $w_1 \equiv w_2$.}
         \label{fig:amostras3}
 \end{figure}

$\Lambda$ real samples $t_i$ result in $\Lambda$ complex coefficients $c_k=a_k+j.b_k$. The coefficients $c_k$ are equivalent two by two, corresponding to the same frequencies and with same relevance\footnote{Equal real part and imaginary with inversed order: $a_{k1}=a_{k2}$ and $b_{k1}=-b_{k2}$. As consequence the modules are equal and phases have inversed order.}. Remembering that $f_k = k\frac{f_a}{\Lambda}, \; k \in \left\{0, ..., \left \lfloor \frac{\Lambda}{2} \right \rfloor \right\} $. When $k > \frac{\Lambda}{2}$, the frequency $f_k$ is mirrored by $\frac{f_a}{2}$ in this way: $f_k=\frac{f_a}{2} - (f_k-\frac{f_a}{2})=f_a-f_k=f_a - k\frac{f_a}{\Lambda}=(\Lambda-k)\frac{f_a}{\Lambda} \;\;\;\; \Rightarrow \;\;\;\; f_k\equiv f_{\Lambda-k} \; ,\;\; \forall \;\; k<\Lambda$. 

The same could be observed in $w_k=f_k.\frac{2\pi}{f_a}$ and remembering the periodicity $2\pi$ it results in $w_k=-w_{\Lambda-k}$. Given the cosine as as a even function and the inverse tangent as odd function, the components in $w_k$ and $w_{\Lambda-k}$ sums up in the equationi that reconstructs the real samples willing equation~\ref{recomposicaoFourier}.


In other words, in a decomposition of $\Lambda$ samples, the $\Lambda$ given frequential components $\{c_i\}_0^{\Lambda-1}$ are equivalents in pairs.
Exception for $f_0$ and when having an even $\Lambda$, from $f_{\Lambda/2}=f_{\text{mÃ¡x}}=\frac{f_a}{2}$ both components are isolated, e.g.\ there is any other component in frequency $f_0$ or $f_{\Lambda/2}$ (if even $\Lambda$) regarding itself. 
It is true because $f_{\Lambda/2}=f_{(\Lambda-\Lambda/2) = \Lambda/2}$ and $f_0=f_{(\Lambda-0)=\Lambda}=f_0$.
Furthermore, these two frequencies (zero and maximum frequency) are not represented having phase variation, being strictly real. In this way, it is possible to conclude the number $\tau$ of equivalent coefficient pairs are:

\begin{equation}\label{coefsPareados}
\tau = \frac{\Lambda - \Lambda \% 2}{2} +\Lambda \% 2 -1
\end{equation}

and became clearly visible the equivalences ~\ref{equivalenciasFreqs}, ~\ref{equivalenciasModulos} and ~\ref{equivalenciasFases}:

\begin{equation}\label{equivalenciasFreqs}
f_{k}\equiv f_{\Lambda-k}\;, \;\; w_{k}\equiv-w_{\Lambda-k}\;\;\;, \quad \;\; \forall \quad 1 \leq k \leq \tau  
\end{equation}

\begin{figure}[h!]
    \centering
        \includegraphics[width=\textwidth]{figuras/amostras4__}
    \caption{Frequential components for 4 samples.}
        \label{fig:amostras4}
\end{figure}

Having $a_k = a_{\Lambda -k}\;\;$ and $\;\;b_k = - b_{\Lambda -k}$:

\begin{equation}\label{equivalenciasModulos}
\sqrt{a_k^2 + b_k^2} = \sqrt{a_{\Lambda - k}^2 + b_{\Lambda -k}^2} \;\;, \quad \;\; \forall \quad 1 \leq k \leq \tau  \\
\end{equation}

\begin{equation}\label{equivalenciasFases}
tg^{-1}\left(\frac{b_k}{a_k}\right)=-tg^{-1}\left(\frac{b_{\Lambda -k}}{a_{\Lambda - k}}\right)\;\;,\quad \;\; \forall \quad 1 \leq k \leq \tau
\end{equation}

Having $k \in \mathbb{N}$.

The observation for the real signal reconstruction equation~\ref{moduloEfase} together with modules and phases equivalences~\ref{equivalenciasModulos} and~\ref{equivalenciasFases}, the number of paired coefficients~\ref{coefsPareados} and equivalence of paired frequencies~\ref{equivalenciasFreqs} expose a general case for components combination in each sample $t_i$:

\begin{equation}\label{eq:reconsCompleta}
t_i = \frac{a_0}{\Lambda} + \frac{2}{\Lambda}\sum_{k=1}^{\tau}\sqrt{a_k^2 + b_k^2} \; cos\left[w_k i - tg^{-1}\left(\frac{b_k}{a_k}\right)\right]+ \frac{ a_{\Lambda/2}}{\Lambda}.(1-\Lambda\% 2)
\end{equation}

\begin{figure}[h!]
    \centering
        \includegraphics[width=\textwidth]{figuras/amostras4formas__}
    \caption{Basic wave forms for 4 samples.}
        \label{fig:formas4}
\end{figure}

Therefore, as in Figure~\ref{fig:amostras3}, the Fourier transform of 3 samples have 2 frequential coefficients with same amount of energy in the same frequency.

With 4 samples it is possible to represent 1 or 2 frequencies with any proportions. Figure~\ref{fig:amostras4} shows wave forms for 4 samples and its two components. The individual contributions sums together yielding the original wave form and a brief inspection reveals the major curvatures resulting from the higher frequency, while a fixed dettachment of component summation results from the zero frequency component.

\begin{figure}[h!]
    \centering
        \includegraphics[width=\textwidth]{figuras/amostras6}
    \caption{Frequential components for 6 samples: 3 sinosoids sums with \emph{bias}.}
        \label{fig:amostras6}
\end{figure}

Figure~\ref{fig:formas4} shows harmonics for 4 samples in basic wave forms of equations ~\ref{senoide}, ~\ref{denteDeSerra}, ~\ref{triangular} and ~\ref{quadrada}. All together results in only 1 sinusoid, with exception to sawtooth wave which have even harmonics.

Figure~\ref{fig:amostras6} presents a sinusoidal decomposition for the 6 samples case and figure~\ref{fig:formas6} decompose the basic wave forms.
In this case all wave forms are different in spectrum: square and triangular ones have the same components but with different proportions, while the sawtooth have an extra component.

\begin{figure}[h!]
    \centering
        \includegraphics[width=\textwidth]{figuras/amostras6formas___}
    \caption{Basic wave forms for 6 samples: triangular and square wave forms have odd harmonics, with different proportions and phases; the sawtooth wave form also has even harmonics.}
        \label{fig:formas6}
\end{figure}

\subsection{The basic note}\label{notaBasica}

%% Seja $f$ tal que $f$ divida $f_a$\footnote{Como apontado anteriormente, esta limitaÃ§Ã£o facilita a exposiÃ§Ã£o sem perda de generalidade.
%% A limitaÃ§Ã£o serÃ¡ superada no inÃ­cio da prÃ³xima seÃ§Ã£o.}.
%% Uma sequÃªncia $T_i$ de amostras sonoras separadas por $\delta_a=1/f_a$ descreve uma nota musical de frequÃªncia $f$ Hertz e duraÃ§Ã£o $\Delta$ segundos se, e somente se, possuir a periodicidade $\lambda_f=f_a/f$
%%  e tamanho $\Lambda=\lfloor f_a . \Delta \rfloor $:

%% \begin{equation}\label{eq:notaBasica}
%% T_i^{f,\; \Delta}=\{t_{i \, \% \lambda_f} \}_0^{\Lambda-1}= \left \{t^f_{i \; \% \left( \frac{f_a}{f} \right) } \right \}_0^{\Lambda-1}
%% \end{equation}

%% A nota por si sÃ³ nÃ£o especifica um timbre. Mesmo assim, faz-se necessÃ¡ria a escolha de uma forma de onda para que as amostras $t_i$ tenham um valor estabelecido individualmente. Um Ãºnico perÃ­odo dentre as ondas bÃ¡sicas pode ser utilizado para a especificaÃ§Ã£o da nota da seguinte forma:

%% $\lambda_f=\frac{f_a}{f}$ Ã© o nÃºmero de amostras do perÃ­odo. Seja $L_i^{f,\, \delta_f} $
%% a sequÃªncia que descreve um perÃ­odo da onda $L_i^f \in \{S_i^f,Q_i^f,T_i^f,D_i^f,R_i^f \}$ de duraÃ§Ã£o 
%% $\delta_f=1/f$, dadas pelas equaÃ§Ãµes ~\ref{senoide}, ~\ref{denteDeSerra}, ~\ref{triangular} e ~\ref{quadrada} e onde $R_i^f$ Ã©
%% uma onda real amostrada:

%% \begin{equation}\label{periodoUnico}
%% L_i^{f , \delta_f } = \left\{ l_i^f \right\}_0^{\delta_f . f_a -1}=\left\{ l_i^f \right\}_0^{\lambda_f-1}
%% \end{equation}

%% EntÃ£o a sequÃªncia $T_i$ consistirÃ¡ em uma nota de duraÃ§Ã£o $\Delta$ e frequÃªncia $f$ se:

%% \begin{equation}\label{eq:notaBasicaTimbre}
%% T_i^{f,\; \Delta}=\left\{t_i^f\right\}_0^{\lfloor f_a . \Delta \rfloor -1}=\left \{ l^f_{i\,\%\left(\frac{f_a}{f}\right)} \right \}_0^{\Lambda-1}
%% \end{equation}

%% \subsection{LocalizaÃ§Ã£o espacial e espacializaÃ§Ã£o}\label{subsec:spac}
%% Embora nÃ£o seja uma das quatro qualidades bÃ¡sicas tradicionais de uma nota musical, esta possui sempre uma localizaÃ§Ã£o espacial, que Ã© a posiÃ§Ã£o da fonte que a emitiu, no espaÃ§o fÃ­sico tridimensional ordinÃ¡rio. AlÃ©m disso, hÃ¡ um ambiente que reverbera a nota emitida, assunto ao qual a 'espacializaÃ§Ã£o' Ã© dedicada. Ambas, a espacializaÃ§Ã£o e a localizaÃ§Ã£o espacial, sÃ£o bastante valorizadas
%%  por audiÃ³filos e pela indÃºstria fonogrÃ¡fica.\cite{floEsp}

%%  \subsubsection{LocalizaÃ§Ã£o espacial}
%% Acredita-se que a percepÃ§Ã£o da localizaÃ§Ã£o espacial do som se dÃª em nosso sistema nervoso atravÃ©s destas
%% trÃªs informaÃ§Ãµes: o atraso de chegada do som entre um ouvido e o outro, a diferenÃ§a de intensidade do som direto em cada ouvido e a 
%% filtragem realizada pelo corpo, incluindo tÃ³rax, cabeÃ§a e orelhas.\cite{Roederer, hrtf, Heeger}


%% \begin{figure}[h!]
%%     \centering
%%         \includegraphics[width=.5\textwidth]{figuras/espacializacao___}
%%     \caption{DetecÃ§Ã£o de localizaÃ§Ã£o espacial de fonte sonora: esquema utilizado para cÃ¡lculo da diferenÃ§a de tempo interaural (DTI) e da diferenÃ§a de intensidade interaural (DII).}
%%         \label{fig:spac}
%% \end{figure}



%% 	Se consideradas somente as incidÃªncias diretas em cada ouvido, as equaÃ§Ãµes sÃ£o simples. Dada a separaÃ§Ã£o $\zeta$ entre os ouvidos\footnote{Constata-se que $\zeta \approx 21,5cm$ para um humano adulto.},
%% um objeto localizado em $(x,y)$ conforme a figura~\ref{fig:spac}
%% estÃ¡ distante de cada ouvido:

%% \begin{equation}\label{eq:distOuvidos}
%% \begin{split}
%% d & =\sqrt{\left (x-\frac{\zeta}{2} \right )^2+y^2} \\
%% d' & =\sqrt{\left (x+\frac{\zeta}{2} \right )^2 + y^2}
%% \end{split}
%% \end{equation}


%% e cÃ¡lculos imediatos resultam na DiferenÃ§a de Tempo Interaural:

%% \begin{equation}\label{eq:dti}
%% DTI=\frac{d'-d}{v_{som\;no\;ar}\approx 343.2 }\quad \text{segundos}
%% \end{equation}

%% e na DiferenÃ§a de Intensidade Interaural:
%% \begin{equation}\label{eq:dii}
%% DII=20\log_{10}\left (\frac{d}{d'}\right) \quad decibels
%% \end{equation}

%% Convertendo para amplitude, obtÃ©m-se $DII_a=\frac{d}{d'}$. A $DII_a$ pode
%% ser utilizada como constante multiplicativa do canal direito de um sinal sonoro estÃ©reo: $\{t_i'\}_0^{\Lambda -1}=\{DII_a . t_i\}_0^{\Lambda -1}$. Pode-se utilizar a DII junto Ã  DTI como adiantamento no tempo do canal direito com relaÃ§Ã£o ao esquerdo, vÃ­nculo crucial para a localizaÃ§Ã£o em sons graves e em sonoridades percussivas.\cite{Heeger}  
%% Considerando $\Lambda_{DTI}=\lfloor DTI . f_a \rfloor$:

%% \begin{equation}\label{eq:locImpl}
%% \begin{split}
%% \Lambda_{DTI} & = \left \lfloor \frac{d'-d}{343,2}  f_a \right \rfloor \\
%% DII_a & = \frac{d}{d'} \\
%% \left\{t_{(i+\Lambda_{DTI})}'\right\}_{\Lambda_{DTI}}^{\Lambda+\Lambda_{DTI}-1} & =\left\{DII_a . t_i\right\}_0^{\Lambda-1} \\
%% \left\{t_i'\right\}_0^{\Lambda_{DTI}-1} & = 0
%% \end{split}
%% \end{equation}

%% Com $t_i$ o canal direito e $t_i'$ o canal esquerdo. Caso $\Lambda_{DTI} < 0 $, basta trocar $t_i$ por $t_i'$  e utilizar $\Lambda_{DTI}'= | \Lambda_{DTI} | $.

%% Embora consideravelmente simples atÃ© aqui, a localizaÃ§Ã£o espacial depende drasticamente de outras pistas. Pela
%% DTI e DII especifica-se somente o Ã¢ngulo horizontal (azimutal) $\theta$ dado por:

%% \begin{equation}\label{eq:angulo}
%% \theta=\tan^{-1}\left ( \frac{y}{ x }  \right )
%% \end{equation}

%% com $x,y$ tais como representados na figura~\ref{fig:spac}. Mesmo assim, hÃ¡ dificuldades quando $\theta$ incide sobre o chamado "cone de confusÃ£o" em que um mesmo par de especificaÃ§Ãµes DTI, DII resultam de vÃ¡rios dos pontos 
%% do cone. Nestes pontos, a inferÃªncia do Ã¢ngulo azimutal depende especialmente da filtragem atenuante nos agudos, pois a cabeÃ§a interfere um tanto mais nas ondas mecÃ¢nicas agudas do que nas graves.\cite{Heeger,hrtf}  TambÃ©m pertinente Ã  audiÃ§Ã£o de fonte lateral, quando o som Ã© grave o suficiente, hÃ¡ uma difraÃ§Ã£o e a onda chega ao ouvido $\approx 0,7ms$ depois.\cite{floEsp}

%% A figura~\ref{fig:spac} mostra tambÃ©m esta sombra acÃºstica do crÃ¢nio, importante para a percepÃ§Ã£o do Ã¢ngulo azimutal da fonte no cone de confusÃ£o. O cone em si nÃ£o foi disposto na figura pois nÃ£o Ã© exatamente um cone e suas dimensÃµes precisas nÃ£o foram encontradas na literatura visitada e nÃ£o sÃ£o facilmente concebÃ­veis, dadas as filtragens e a difraÃ§Ã£o dependente do espectro do som em si. De toda forma, o cone de confusÃ£o pode ser entendido como um cone com o Ã¡pice no meio da cabeÃ§a e saindo por cada uma das orelhas.\cite{hrtf}

%% JÃ¡ a localizaÃ§Ã£o completa, incluindo distÃ¢ncia e elevaÃ§Ã£o da fonte sonora, Ã© dada pela funÃ§Ã£o de transferÃªncia de cabeÃ§a (HRTF - do inglÃªs \emph{Head Related Transfer Function}).\cite{hrtf} Existem bases abertas e conhecidas de HRTF como a CIPIC e pode-se aplicar estas funÃ§Ãµes de transferÃªncia em um som por convoluÃ§Ã£o (veja equaÃ§Ã£o~\ref{eq:conv}).\cite{CIPIC} O corpo do indivÃ­duo altera bastante as filtragens realizadas e existem tÃ©cnicas para gerar HRTFs que sejam - como proposta - utilizÃ¡veis de forma universal.\cite{lazaSPA} 

%% \subsubsection{EspacializaÃ§Ã£o}
%% JÃ¡ a espacializaÃ§Ã£o Ã© o resultado das reflexÃµes e absorÃ§Ãµes do som nas superfÃ­cies do recinto/paisagem no qual a nota foi emitida. O som se propaga no ar a $\approx 343,2m/s$, e pode ser emitido da fonte com qualquer padrÃ£o de direcionalidade. Quando uma frente sonora encontra uma superfÃ­cie, hÃ¡ uma reflexÃ£o. Nesta reflexÃ£o ocorrem tanto 1) a inversÃ£o da componente da velocidade de propagaÃ§Ã£o que Ã© perpendicular Ã  superfÃ­cie, quanto 2) a absorÃ§Ã£o de energia, especialmente nos agudos. As ondas se propagam atÃ© atingirem nÃ­veis inaudÃ­veis. Quando alguma frente de onda atingir o ouvido, pode ser descrita com o momento de chegada ao ouvido e os filtros de absorÃ§Ã£o de cada superfÃ­cie que atingiu. Pode-se simular reverberaÃ§Ãµes nÃ£o possÃ­veis em sistemas reais. Para experimentaÃ§Ãµes, pode-se usar reflexÃµes assimÃ©tricas com relaÃ§Ã£o ao eixo perpendicular Ã  superfÃ­cie, ou ainda ganhos em determinadas bandas de frequÃªncia (tidos como 'ressonÃ¢ncias'), ambas as caracterÃ­sticas nÃ£o sÃ£o encontradas em sistemas reais.

%% Existem algumas modelagens de reverberaÃ§Ã£o menos atreladas ao cÃ¡lculo de cada reflexÃ£o, exploram informaÃ§Ãµes valiosas do ponto de vista auditivo. De fato, a reverberaÃ§Ã£o pode ser modelada com um conjunto de 2 caracterÃ­sticas temporais e no espectro:
%% \begin{itemize}
%%     \item Primeiro perÃ­odo: as 'primeiras reflexÃµes' sÃ£o mais intensas e esparsas.
%%     \item Segundo perÃ­odo: a 'reverberaÃ§Ã£o tardia' Ã© praticamente uma sucessÃ£o densa de atrasos indistintos com um decaimento exponencial e ocorrÃªncias estatÃ­sticas.
%%     \item Primeira banda: o grave possui algumas frequÃªncias de ressonÃ¢ncia relativamente espaÃ§adas.
%%     \item Segunda banda: o mÃ©dio e agudo possuem um decaimento progressivo e suave com flutuaÃ§Ãµes estatÃ­sticas.
%% \end{itemize}

%% Smith III aponta que boas salas de concerto possuem um tempo total de reverberaÃ§Ã£o de aproximadamente $1,9$ segundos. Aponta tambÃ©m o perÃ­odo das primeiras reflexÃµes de $0,1$ segundos. Estas quantidades sugerem que, nas condiÃ§Ãµes contempladas, hÃ¡ frentes de onda perceptÃ­veis que se propagam atÃ© $652,08$ metros ($83,79k$ amostras em $f_a=44,1kHz$) antes de atingirem o ouvido. AlÃ©m disso, as reflexÃµes do som formam, apÃ³s a propagaÃ§Ã£o por $34,32$ metros ($4,41k$ amostras em $f_a=44,1kHz$ ), um emaranhado cujas incidÃªncias sÃ£o pouco distintas na audiÃ§Ã£o. Estas primeiras reflexÃµes sÃ£o particularmente importantes para a sensaÃ§Ã£o de espaÃ§o. A primeira incidÃªncia Ã© o som direto, descrito por DTI e DII das equaÃ§Ãµes~\ref{eq:dti} e~\ref{eq:dii}. Admitindo que cada uma das primeiras reflexÃµes, antes de chegar ao ouvido, se propagarÃ¡, ao menos, $3-30m$ dependentes das dimensÃµes da sala, a separaÃ§Ã£o entre as primeiras reflexÃµes Ã© de, ao menos, $8-90$ milissegundos ($\approx 350-4000$ amostras em $f_a=44.1kHz$). Verifica-se experimentalmente que o nÃºmero de reflexÃµes aumenta em proporÃ§Ã£o quadrÃ¡tica  $ \approx k.n^2$. Apontamentos do uso de convoluÃ§Ãµes e filtragens para facilitar estas implementaÃ§Ãµes estÃ£o na subseÃ§Ã£o~\ref{subsec:mus2}, especialmente nos parÃ¡grafos sobre reverberaÃ§Ã£o.

%% \subsection{Usos musicais}\label{subsec:basMus}


%% A partir da nota bÃ¡sica, cabe realizar estruturas musicais com
%% sequÃªncias destas partÃ­culas. A soma dos elementos de mesmo Ã­ndice de $N$ sequÃªncias $T_{k,i}=\{t_{k,i}\}_{k=0}^{N-1}$ de mesmo tamanho $\Lambda$ resulta em seus conteÃºdos espectrais sobrepostos em um processo de mixagem sonora:

%% \begin{equation}\label{eq:mixagem}
%% \{t_i\}_0^{\Lambda-1}=\left \{ \sum_{k=0}^{N-1}t_{k,i} \right \}_0^{\Lambda-1}
%% \end{equation}

%% \begin{figure}[h!]
%%     {\centering
%%         \includegraphics[width=\textwidth]{figuras/mixagem}}
%%     \caption{Mixagem de trÃªs sequÃªncias sonoras. As amplitudes sÃ£o sobrepostas diretamente.}

%%         \label{fig:mixagem}
%% \end{figure}


%% A figura~\ref{fig:mixagem} ilustra este processo de superposiÃ§Ã£o de ondas sonoras discretizadas. A figura dispÃµe 100 amostras, de onde pode-se concluir que, se $f_a=44.1kHz$, as frequÃªncias da dente de serra, da onda quadrada e da senoide sÃ£o,
%% respectivamente, $\frac{f_a}{100/2}=882Hz$, $\frac{f_a}{100/4}=1764Hz$ e $\frac{f_a}{100/5}=2205Hz$. A duraÃ§Ã£o do trecho Ã© bastante curto $\frac{f_a=44.1kHz}{100} \approx 2 \text{ milissegundos}$. Basta completar com zeros para somar sequÃªncias de tamanhos diferentes. 

%% As notas mixadas sÃ£o em grande parte separadas pelo ouvido por leis fÃ­sicas de ressonÃ¢ncia e pelo sistema nervoso.\cite{Roederer} O resultado da mixagem de notas musicais Ã© a harmonia musical, cujos intervalos entre as frequÃªncias e os acordes de notas simultÃ¢neas regem aspectos subjetivos e abstratos da mÃºsica e sua apreciaÃ§Ã£o.\cite{Harmonia} 

%% As sequÃªncias podem tambÃ©m ser concatenadas no tempo. Caso as sequÃªncias $\{t_{k,i}\}_0^{\Lambda_k-1}$ de tamanhos $\Lambda_k$  representem $k$ notas musicais, sua concatenaÃ§Ã£o em uma Ãºnica sequÃªncia $T_i$ Ã© em uma sequÃªncia musical simples ou melodia:

%% \begin{equation}\label{eq:concatenacao}
%% \{t_i\}_0^{\sum\Delta_k-1}=\{t_{l,i}\}_0^{\sum\Delta_k-1}, \;\; l\text{ menor inteiro } : \quad \Lambda_l > i -\sum_{j=0}^{l-1}\Lambda_j
%% \end{equation}

%% Este mecanismo Ã© demonstrado de forma ilustrativa na figura~\ref{fig:concatenacao} com as mesmas sequÃªncias da figura ~\ref{fig:mixagem}.
%%  As sequÃªncias sÃ£o curtas para as taxas de amostragem usuais, mas pode-se observar a concatenaÃ§Ã£o de sequÃªncias sonoras. AlÃ©m disso, cada nota tem a duraÃ§Ã£o maior que $100ms$ se $f_a<1kHz$.

%% \begin{figure}[h!]
%% {    \centering
%%         \includegraphics[width=\textwidth]{figuras/concatenacao}}
%%     \caption{ConcatenaÃ§Ã£o de trÃªs sequÃªncias sonoras atravÃ©s da justaposiÃ§Ã£o temporal de suas amostras.}
%%         \label{fig:concatenacao}
%% \end{figure}

%% A montagem musical \emph{reduced-fi} explora de forma isolada este uso de justaposiÃ§Ã£o temporal das notas, resultando em uma peÃ§a homofÃ´nica. O princÃ­pio vertical estÃ¡ demonstrado nos \emph{quadros sonoros}, sons estÃ¡ticos com espectros peculiares. Ambas as peÃ§as estÃ£o em cÃ³digo Python nos ApÃªndices~\ref{ap:quadros} e~\ref{ap:reduced} e estÃ£o disponÃ­veis como parte da \emph{toolbox} \massa.\cite{MASSA}

%% EstÃ¡ descrita a nota musical digital bÃ¡sica e a seÃ§Ã£o seguinte desenvolve a evoluÃ§Ã£o temporal de seus conteÃºdos, como nos \emph{glissandi} e nas envoltÃ³rias de volume. A filtragem de componentes espectrais e a geraÃ§Ã£o dos ruÃ­dos completam a constituiÃ§Ã£o da nota musical como unidade isolada e se desdobra na seÃ§Ã£o~\ref{notasMusica}, dedicada Ã  estruturaÃ§Ã£o destas notas em mÃºsica atravÃ©s de mÃ©tricas e trajetÃ³rias.




%% \afterpage{\blankpage}
%% \clearpage

%% \section{VariaÃ§Ãµes na nota musical bÃ¡sica}\label{varInternas}

%% A nota musical digital bÃ¡sica foi definida na seÃ§Ã£o~\ref{sec:notaDisc} com os parÃ¢metros:
%% duraÃ§Ã£o, altura, intensidade (volume) e timbre. Esta Ã© uma modelagem
%% Ãºtil e paradigmÃ¡tica, mas nÃ£o esgota o que se entende por
%% uma nota musical.

%% Em primeiro lugar, as caracterÃ­sticas da nota se modificam no decorrer
%% da prÃ³pria nota.\cite{Chowning} Por exemplo, uma nota de piano
%% de 3 segundos tem a intensidade com inÃ­cio abrupto e decaimento progressivo,
%% alÃ©m de variaÃ§Ãµes do espectro, com harmÃ´nicos que
%% decaem antes dos outros e alguns que aparecem com o tempo.
%% Estas variaÃ§Ãµes nÃ£o sÃ£o obrigatÃ³rias e sim orientaÃ§Ãµes da
%% sÃ­ntese sonora para usos musicais, pois Ã© como os sons
%% se apresentam na natureza\footnote{A regra de ouro
%% aqui Ã©: para que um som isolado desperte interesse
%% por si sÃ³, faÃ§a com que tenha variaÃ§Ãµes internas.\cite{Roederer}}. 
%% Explorar todas as formas pelas quais estas variaÃ§Ãµes ocorrem estÃ¡ fora
%% do escopo de qualquer trabalho dada a considerÃ¡vel sensibilidade do ouvido humano
%% e a complexidade da nossa cogniÃ§Ã£o sonora. A seguir, serÃ£o apontados
%% recursos primÃ¡rios para estas variaÃ§Ãµes das caracterÃ­sticas na nota
%% bÃ¡sica.
%% Todas as relaÃ§Ãµes descritas nesta seÃ§Ã£o estÃ£o implementadas em Python no ApÃªndice~\ref{sec:cod2}. As montagens musicais \emph{Transita para metro}, \emph{Vibra e treme}, \emph{Tremolos, vibratos e a frequÃªncia}, \emph{Trenzinho de caipiras impulsivos}, \emph{Ruidosa faixa}, \emph{Bela rugosi}, \emph{Chorus infantil}, \emph{ADa e SaRa} estÃ£o nos ApÃªndices~\ref{ap:transita}, \ref{ap:vibra}, \ref{ap:tremolos}, \ref{ap:trenzinho}, \ref{ap:ruidosa}, \ref{ap:bela}, \ref{ap:chorus} e \ref{ap:ada}. Estes cÃ³digos sÃ£o parte da caixa de ferramentas \massa, disponÃ­vel online.\cite{MASSA}



%% \subsection{Tabela de busca}\label{subsec:lookup}

%% Mais conhecida pelo termo em inglÃªs, a \emph{Lookup Table} (ou simplesmente
%% LUT), Ã© uma estrutura de dados para
%% consultas indexadas usada
%% frequentemente para reduzir a complexidade computacional
%% e por
%% permitir o uso de funÃ§Ãµes sem possibilidade de cÃ¡lculo direto, como
%% amostras recolhidas da natureza. 
%% Na mÃºsica seu uso transcende estes
%% primeiros, facilitando as operaÃ§Ãµes e permitindo que um Ãºnico
%% perÃ­odo de onda possa ser usado para sintetizar sons em toda a banda
%% de frequÃªncias audÃ­veis, qualquer que seja a forma de onda amostrada.


%% \begin{figure}[h!]
%%     \centering
%%         \includegraphics[width=\textwidth]{figuras/lut}
%%     \caption{Procedimento de busca em tabela (conhecido como \emph{Lookup Table}) para sÃ­ntese de sons em frequÃªncias diferentes a partir de uma Ãºnica forma de onda em alta resoluÃ§Ã£o.}
%%         \label{fig:lut}
%% \end{figure}

%% Seja $\widetilde{\Lambda}$ o tamanho 
%% do perÃ­odo e $\widetilde{L_i} = \left\{\, \widetilde{l}_i \,\right\}_0^{\widetilde{\Lambda} -1}$ os elementos $\widetilde{l_i}$ de um
%% perÃ­odo de onda qualquer (veja equaÃ§Ã£o ~\ref{periodoUnico}). Uma sequÃªncia
%% $T_i^{f,\,\Delta}$ com amostras de um som de frequÃªncia $f$ e duraÃ§Ã£o $\Delta$
%% pode ser obtida a partir de $\widetilde{L_i}$ da seguinte forma:

%% \begin{equation}\label{eq:lut}
%% T_i^{f,\,\Delta}=\left\{t_i^f\right\}_0^{\lfloor \, f_a . \Delta \, \rfloor -1} = \left\{ \, \widetilde{l}_{\gamma_i \% \widetilde{\Lambda} }\, \right\}_{0}^{\Lambda-1}\; , \quad \text{onde} \;\; \gamma_i = \left \lfloor i . f \frac{ \widetilde{\Lambda}}{f_a} \right \rfloor  
%% \end{equation}

%% Ou seja, com os Ã­ndices corretos ($\gamma_i\%\widetilde{\Lambda}$)
%% da LUT, pode-se sintetizar o som em qualquer frequÃªncia. 
%% A figura~\ref{fig:lut} ilustra
%% o cÃ¡lculo de uma amostra de $\{t_i\}$ 
%% a partir de $\left\{\,\widetilde{l}_i\,\right\}$ para uma frequÃªncia
%% de $f=200Hz$, $\widetilde{\Lambda}=128$ e considerada a taxa de amostragem em $f_a=44.1kHz$.
%% Esta nÃ£o Ã© uma configuraÃ§Ã£o praticÃ¡vel, como assinalado abaixo, mas possibilita uma
%% disposiÃ§Ã£o grÃ¡fica do procedimento.


%% O cÃ¡lculo do inteiro $\gamma_i$ introduz um ruÃ­do, 
%% e este diminui com o aumento de $\widetilde{\Lambda}$.
%% Para fins de sÃ­ntese, em $f_a=44.1 kHz$
%%  o padrÃ£o Ã© usar $\widetilde{\Lambda} = 1024$ amostras, pois jÃ¡ nÃ£o gera ruÃ­do
%%  relevante no espectro audÃ­vel. O mÃ©todo de arredondamento ou interpolaÃ§Ã£o nÃ£o Ã© decisivo.\cite{Geiger}

%%  A expressÃ£o que define a variÃ¡vel $\gamma_i$ pode ser compreendida da
%%  seguinte forma: $i$ Ã© acrescida de $f_a$ a cada $1$ segundo.
%%  Caso seja dividida pela frequÃªncia de amostragem, resulta $\frac{i}{f_a}$,
%% que Ã© acrescida de $1$ a cada $1$ segundo. Multiplicada pelo comprimento do perÃ­odo, resulta $i \frac{\widetilde{\Lambda}}{f_a}$
%%  que varre o 
%%   perÃ­odo em $1$ segundo. Por fim,
%%  com a frequÃªncia $f$, resulta $i . f \frac{\widetilde{\Lambda}}{f_a}$
%%  que completa $f$ varreduras do perÃ­odo  $\widetilde{\Lambda}$ em $1$ segundo, i.e. a sequÃªncia
%%  resultante apresenta a frequÃªncia fundamental $f$.

%% Importantes consideraÃ§Ãµes: $f$ Ã© qualquer, sÃ³ hÃ¡ limitantes nas frequÃªncias
%% graves quando o tamanho da tabela $\widetilde{\Lambda}$ nÃ£o Ã© suficientemente grande para a taxa de amostragem
%% $f_a$. O procedimento de busca em tabela
%% Ã© computacionalmente bastante barato, substituindo cÃ¡lculos por buscas simples (por isso geralmente
%% Ã© entendido como um processo de otimizaÃ§Ã£o). Salvo quando assinalado,
%% no texto que usarÃ¡ este procedimento para todos os casos cabÃ­veis pois
%% simplifica as rotinas e Ã© computacionalmente coerente.

%% O uso de LUTs Ã© bastante difundido nas implementaÃ§Ãµes computacionais
%% voltadas para mÃºsica e um uso clÃ¡ssico que explora com Ãªnfase
%% as LUTs na sÃ­ntese sonora musical, Ã© a  chamada 
%% \emph{Wavetable Synthesis} que consiste em vÃ¡rias LUTs utilizadas em 
%% conjunto atravÃ©s da mixagem para gerar uma nota musical quasi-periÃ³dica.~\cite{Cook,Wavetable}.


%% \subsection{VariaÃ§Ãµes incrementais de frequÃªncia e intensidade}\label{subsec:vars}

%% Segundo a lei de Weber e Fechner, a percepÃ§Ã£o humana tem uma relaÃ§Ã£o logarÃ­tmica com
%% o estÃ­mulo que a causa.\cite{Weber-Fechner} Em outras palavras, um estÃ­mulo em progressÃ£o exponencial
%% Ã© percebido como linear.
%% Por razÃµes didÃ¡ticas e dado o uso nas AM e FM (veja subseÃ§Ã£o~\ref{subsec:tvaf}), a variaÃ§Ã£o linear serÃ¡ abordada primeiro.

%% Em uma nota de duraÃ§Ã£o $\Delta = \frac{\Lambda}{f_a}$, a frequÃªncia $f=f_i$ varia de $f_0$ atÃ© $f_{\Lambda -1}$
%% linearmente. Pode-se escrever:

%% \begin{equation}\label{freqLinear}
%% F_i=\{f_i\}_0^{\Lambda-1}=\left\{f_0 + (f_{\Lambda-1}-f_0)\frac{i}{\Lambda-1} \right\}_0^{\Lambda-1}
%% \end{equation}

%% \begin{equation}\label{indiceLinear}
%% \Delta_{\gamma_i}=f_i\frac{\widetilde{\Lambda}}{f_a} \quad \Rightarrow \quad \gamma_i=\left \lfloor \sum_{j=0}^{i} f_j\frac{\widetilde{\Lambda}}{f_a} \right \rfloor   =\left \lfloor \sum_{j=0}^{i} \frac{\widetilde{\Lambda}}{f_a} \left [f_0 + (f_{\Lambda-1}-f_0)\frac{j}{\Lambda-1} \right ] \right \rfloor 
%% \end{equation}

%% \begin{equation}\label{serieAmostralLin}
%% \left\{t_i^{\;\overline{f_0,\, f_{\Lambda-1}}}\right\}_0^{\Lambda-1}=\left\{\,\widetilde{l}_{\gamma_i \% \widetilde{\Lambda}}\,\right\}_0^{\Lambda-1}
%% \end{equation}

%% Onde $\Delta_{\gamma_i}=f_i\frac{\widetilde{\Lambda}}{f_a}$ Ã© o incremento da LUT entre duas amostras dada a frequÃªncia do som na primeira amostra.

%% Desta forma, pode-se calcular os elementos $t_i^{\;\overline{f_0,f_{\Lambda-1}}}$
%% com base no perÃ­odo $\left\{\widetilde{l}_i\right\}_0^{\Lambda-1}$.

%% As equaÃ§Ãµes \ref{freqLinear}, \ref{indiceLinear} e \ref{serieAmostralLin} sÃ£o relativas Ã  progressÃ£o linear
%% da frequÃªncia. Como assinalado para o caso geral, tambÃ©m aqui
%% uma progressÃ£o de frequÃªncia
%% \emph{percebida} como linear segue uma progressÃ£o exponencial\footnote{Ou,
%% dito ainda de outra forma, uma progressÃ£o geomÃ©trica da frequÃªncia
%% Ã© percebida como uma progressÃ£o aritmÃ©tica de alturas.}.
%% Pode-se escrever que: $f_i=f_0 . 2^{\frac{i}{\Lambda-1} n_8}$ onde 
%% $n_8=\log_2\frac{f_{\Lambda-1}}{f_0}$ Ã© o nÃºmero de oitavas entre $f_0$ e $f_{\Lambda-1}$.
%% De forma que $f_i=f_0 . 2^{\frac{i}{\Lambda-1}\log_2\frac{f_{\Lambda-1}}{f_0}}=
%% f_0 . 2^{\log_2\left ( \frac{f_{\Lambda-1}}{f_0} \right )^{\frac{i}{\Lambda-1}}}=
%% f_0 \left ( \frac{f_{\Lambda-1}}{f_0} \right ) ^{\frac{i}{\Lambda -1}}$. Portanto,
%%  as equaÃ§Ãµes de transiÃ§Ãµes de frequÃªncia
%% lineares para o ouvido sÃ£o:

%% \begin{equation}\label{freqExponencial}
%% F_i=\{f_i\}_0^{\Lambda-1}=\left\{f_0 \left ( \frac{f_{\Lambda-1}}{f_0} \right ) ^{\frac{i}{\Lambda -1}} \right\}_0^{\Lambda-1}
%% \end{equation}

%% \begin{equation}\label{indiceExponencial}
%% \Delta_{\gamma_i}=f_i\frac{\widetilde{\Lambda}}{f_a} \quad \Rightarrow \quad \gamma_i=\left \lfloor \sum_{j=0}^{i} f_j\frac{\widetilde{\Lambda}}{f_a} \right \rfloor   =\left \lfloor \sum_{j=0}^{i} f_0 \frac{\widetilde{\Lambda}}{f_a} \left ( \frac{f_{\Lambda-1}}{f_0} \right ) ^{\frac{j}{\Lambda -1}} \right \rfloor
%% \end{equation}

%% \begin{equation}\label{serieAmostralLog}
%% \left\{t_i^{\;\overline{f_0,\,f_{\Lambda-1}}}\right\}_0^{\Lambda-1}=\left\{\,\widetilde{l}_{\gamma_i \% \widetilde{\Lambda}}\,\right\}_0^{\Lambda-1}
%% \end{equation}

%% \begin{figure}[h!]
%%     \centering
%%         \includegraphics[width=\textwidth]{figuras/transicao}
%%     \caption{TransiÃ§Ãµes de intensidade para diferentes valores de $\alpha$ (veja equaÃ§Ãµes~\ref{seqAmp} e ~\ref{transAmp}).}
%%         \label{fig:transicao}
%% \end{figure}


%% O termo $\frac{i}{\Lambda-1}$ varre o intervalo $[0,1]$ e pode-se elevÃ¡-lo a uma potÃªncia
%% para que o inÃ­cio da transiÃ§Ã£o seja mais suave ou abrupto.
%% Este procedimento Ã© Ãºtil para variaÃ§Ãµes de energia
%% da onda vibratÃ³ria para alteraÃ§Ã£o do volume\footnote{A mudanÃ§a do volume (qualidade psicofÃ­sica) ocorre atravÃ©s de diferentes caracterÃ­sticas 
%% do som, como a reverberaÃ§Ã£o e a concentraÃ§Ã£o de harmÃ´nicos agudos, dentre as quais estÃ¡ a energia da onda.
%% A manipulada com mais facilidade Ã© a energia da onda (veja equaÃ§Ã£o~\ref{eq:potencia}) e esta tambÃ©m pode variar de diferentes formas.
%% Uma forma mais simples Ã© variar a amplitude atravÃ©s da multiplicaÃ§Ã£o da sequÃªncia toda
%% por um nÃºmero real. O aumento de energia sem variaÃ§Ã£o de
%% amplitude Ã© a \emph{compressÃ£o sonora}, Ãºtil na
%% produÃ§Ã£o musical atual.\cite{guillaume}}. Basta multiplicar a sequÃªncia original
%% (seja ela gerada ou prÃ©-estabelecida) pela sequÃªncia $a_{\Lambda-1}^{\left( \frac{i}{\Lambda-1} \right )^\alpha}$
%% onde $\alpha$ Ã© o coeficiente citado e $a_{\Lambda-1}$ Ã© fraÃ§Ã£o da amplitude original que se visa atingir ao final da transiÃ§Ã£o.

%% Assim, para variaÃ§Ãµes de amplitude:

%% \begin{equation}\label{seqAmp}
%% \{a_i\}_0^{\Lambda-1}=\left \{ a_0 \left ( \frac{a_{\Lambda-1}}{a_0} \right )^{\left ( \frac{i}{\Lambda-1} \right )^\alpha} \right \}_0^{\Lambda-1}=\left \{ \left ( {a_{\Lambda-1}} \right )^{\left ( \frac{i}{\Lambda-1} \right )^\alpha} \right \}_0^{\Lambda-1} \text{ com } a_0=1
%% \end{equation}

%% \begin{equation}\label{transAmp}
%% T_i^{'}=T_i \odot A_i = \{t_i . a_i\}_0^{\Lambda-1}=\left \{ t_i . (a_{\Lambda-1} )^{\left ( \frac{i}{\Lambda-1} \right )^\alpha} \right \}_0^{\Lambda-1}
%% \end{equation}

%% Pode-se tomar $a_0=1$ para iniciar a nova sequÃªncia com a amplitude original e entÃ£o ir modificando com o decorrer das amostras.
%% Esta restriÃ§Ã£o faz com que o termo $a_{\Lambda-1}$ seja a variaÃ§Ã£o da amplitude.
%% Caso $\alpha=1$, a variaÃ§Ã£o de amplitude segue exatamente a progressÃ£o geomÃ©trica que caracteriza
%% a percepÃ§Ã£o linear. A figura~\ref{fig:transicao} exibe as transiÃ§Ãµes para diferentes valores de $\alpha$ e para a transiÃ§Ã£o entre os valores $1$ e $2$, um ganho de $\approx 6dB$ segundo a equaÃ§Ã£o~\ref{eq:ampVol}.


%% Algum cuidado Ã© necessÃ¡rio para lidar com $a=0$.
%% Na equaÃ§Ã£o~\ref{seqAmp}, se $a_0=0$ hÃ¡ divisÃ£o por zero e
%% se $a_{\Lambda-1}=0$, hÃ¡ uma multiplicaÃ§Ã£o por zero. Ambos os casos
%% tornam o procedimento inÃºtil pois nenhum nÃºmero diferente de zero pode ser representado como uma proporÃ§Ã£o com relaÃ§Ã£o ao zero. Pode-se resolver isso escolhendo um nÃºmero suficientemente pequeno como $-80dB\;\Rightarrow a=10^{\frac{-80}{20}}=10^{-4}$ como o volume mÃ­nimo no caso de um
%% \emph{fade in} ($a_0=10^{-4}$) ou de um \emph{fade out} ($a_{\Lambda-1}=10^{-4}$).


%% Para uma amplificaÃ§Ã£o linear, mas nÃ£o linear para a percepÃ§Ã£o, basta usar uma sequÃªncia $\{a_i\}$ adequada:

%% \begin{equation}\label{seqAmpLin}
%% a_i=a_0 + (a_{\Lambda-1}-a_0)\frac{i}{\Lambda-1}
%% \end{equation}

%% Aqui convÃ©m a conversÃ£o de decibels para amplitude. Assim, as equaÃ§Ãµes ~\ref{ampDec} e \ref{transAmp}
%% especificam a transiÃ§Ã£o de $V_{dB}$ decibels:

%% \begin{equation}\label{seqAmpDB}
%% T_i^{'}=\left\{ t_i 10^{\frac{V_{dB}}{20}\left( \frac{i}{\Lambda-1} \right)^\alpha} \right\}_0^{\Lambda-1}
%% \end{equation}

%% para o caso geral de variaÃ§Ãµes de amplitude segundo a progressÃ£o geomÃ©trica. Quanto maior o valor de $\alpha$, mais suave Ã© a introduÃ§Ã£o do som e mais intenso o final da transiÃ§Ã£o. $\alpha>1$ resulta em transiÃ§Ãµes de volume muitas vezes chamadas de \emph{slow fade} enquanto $\alpha<1$ resulta em \emph{fast fade}.\cite{guillaume}

%% As transiÃ§Ãµes lineares serÃ£o usadas para
%% as sÃ­nteses AM e FM e a aplicaÃ§Ã£o das transiÃ§Ãµes
%% logarÃ­tmicas para os tremolos e vibratos.
%% Uma exploraÃ§Ã£o nÃ£o oscilatÃ³ria destas variaÃ§Ãµes
%% estÃ¡ na montagem musical \emph{Transita para metro},
%% cujo cÃ³digo estÃ¡ no ApÃªndice~\ref{ap:transita} e online
%% na \massa.\cite{MASSA}

%% \subsection{AplicaÃ§Ã£o de filtros digitais}\label{subsec:filtros}
%% Esta subseÃ§Ã£o limita-se a uma descriÃ§Ã£o
%% do processamento das sequÃªncias, por convoluÃ§Ã£o
%% e equaÃ§Ã£o a diferenÃ§as, e em aplicaÃ§Ãµes
%% imediatas, pois a complexidade facilmente
%% foge ao escopo\footnote{A elaboraÃ§Ã£o de filtros
%% constitui uma Ã¡rea reconhecidamente complexa, com literatura
%% e pacotes de software dedicados. 
%% Recomendamos ao leitor
%% interessado uma visita Ã  nossa bibliografia.\cite{Openheim,smith}}. A aplicaÃ§Ã£o de filtros pode
%% ser parte constituinte da sÃ­ntese ou feita posteriormente
%% como parte dos processos tipicamente chamados de tratamento sonoro.

%% \begin{itemize}

%% \item  ConvoluÃ§Ã£o e filtros de resposta ao impulso finita (FIR)

%% \begin{figure}[h!]
%%     \centering
%%         \includegraphics[width=\textwidth]{figuras/convolucao______}
%%     \caption{InterpretaÃ§Ã£o grÃ¡fica da convoluÃ§Ã£o. Cada amostra resultante Ã© a soma das amostras anteriores de um sinal uma a uma multiplicadas pelas amostras retrÃ³gradas do outro sinal.}
%%         \label{fig:conv}
%% \end{figure}

%% Os filtros aplicados por convoluÃ§Ã£o sÃ£o conhecidos
%% pela sua sigla FIR (do inglÃªs Finite Impulse Response)
%% e sÃ£o caracterizados por possuÃ­rem uma representaÃ§Ã£o amostral
%% finita no tempo. Esta representaÃ§Ã£o amostral Ã© chamada
%% de 'resposta ao impulso' $\{h_i\}$. Os filtros FIR sÃ£o aplicados 
%% no domÃ­nio temporal ao som
%% digitalizado pela convoluÃ§Ã£o do som com a 
%% resposta ao impulso do filtro\footnote{Pode-se aplicar o filtro do domÃ­nio espectral atravÃ©s da multiplicaÃ§Ã£o das transformadas de Fourier de ambos o som e a resposta ao impulso, e entÃ£o realizada a transformada inversa de Fourier do espectro resultante.\cite{Openheim}}. Para os fins deste trabalho, a
%% convoluÃ§Ã£o fica definida como:

%% \begin{equation}\label{eq:conv}
%% \begin{split}
%% \left\{t_i'\right\}_0^{\Lambda_t+\Lambda_h-2\; = \;\Lambda_{t\, '}-1} =\{(T_j*H_j)_i\}_0^{\Lambda_{t \, '}-1} & =\left \{ \sum_{j=0}^{min(\Lambda_h-1,i)}h_{j} . t_{i-j} \right \}_0^{\Lambda_{t\, '}-1} \\
%%     & =\left \{ \sum_{j=max(i+1-\Lambda_h,0)}^{i}t_j . h_{i-j} \right \}_0^{\Lambda_{t\, '}-1}
%% \end{split}
%% \end{equation}

%% Onde $t_i=0$ para as
%% amostras nÃ£o definidas de antemÃ£o.
%% Ou seja, o som $\{t_i'\}$ resultante da convoluÃ§Ã£o de $\{t_i\}$ com a resposta ao impulso $\{h_i\}$
%% tem cada i-Ã©sima amostra $t_i$ substituÃ­da pela soma de suas Ãºltimas $\Lambda_h$ amostras $\{t_{i-j}\}_{j=0}^{\Lambda_h-1}$
%% multiplicadas uma a uma pelas amostras da resposta ao impulso $\{h_i\}_0^{\Lambda_h-1}$. Este
%% procedimento estÃ¡ ilustrado na figura~\ref{fig:conv}, onde a resposta ao impulso $\{h_i\}$
%% Ã© percorrida na forma retrÃ³grada e
%% $t_{12}'$ e $t_{32}'$ sÃ£o duas amostras calculadas
%% pela convoluÃ§Ã£o $(T_j*H_j)_i=t_i'$. O sinal resultante possui
%% sempre o tamanho $\Lambda_t+\Lambda_h -1=\Lambda_{t'}$.


%% Com este procedimento pode-se aplicar reverberadores, equalizadores, \emph{delays}
%% e vÃ¡rios outros tipos de filtros para fins de tratamento sonoro ou
%% efeitos musicais/artÃ­sticos.
 
%% A resposta ao impulso pode provir de mediÃ§Ãµes
%% fÃ­sicas ou da sÃ­ntese. Uma resposta 
%% ao impulso para a aplicaÃ§Ã£o
%% de reverberaÃ§Ã£o pode resultar da gravaÃ§Ã£o sonora em um ambiente ao disparar
%% um estalo que se assemelhe a um impulso ou 
%% de uma varredura em senoide, que transformada se aproxima
%% da resposta em frequÃªncia.
%% Ambas sÃ£o respostas ao impulso
%% que, convoluidas com a sequÃªncia sonora, resultam na prÃ³pria sequÃªncia
%% com uma reverberaÃ§Ã£o que se assemelha Ã quela do ambiente 
%% em que ocorreu a mediÃ§Ã£o.\cite{Cook}

%% A transformada inversa
%% de Fourier de uma envoltÃ³ria par e real Ã© uma
%% resposta ao impulso de um FIR. Este realiza
%% uma filtragem em frequÃªncia com a envoltÃ³ria.
%% Quanto maior o nÃºmero de amostras maior
%% a resoluÃ§Ã£o da envoltÃ³ria e tambÃ©m 
%% o processamento computacional, pois a convoluÃ§Ã£o Ã© cara.

%% Uma propriedade importante Ã© o deslocamento temporal causado pela convoluÃ§Ã£o com o impulso deslocado. Embora caro computacionalmente, 
%% pode-se criar linhas de \emph{delays} atravÃ©s da convoluÃ§Ã£o do som com uma resposta ao impulso que possui um impulso
%% para cada reincidÃªncia do som.
%% Na figura~\ref{fig:delays}
%% pode-se observar o deslocamento causado pela convoluÃ§Ã£o
%% com o impulso. Dependendo da densidade dos impulsos, o resultado
%% Ã© de carÃ¡ter rÃ­tmico (20 impulsos por segundo ou menos) ou de amÃ¡lgama
%% sonoro (20-40 impulsos por segundo ou mais). Neste Ãºltimo caso,
%% ocorrem processos tipicamente vinculados Ã  sÃ­ntese granular, delays, reverbs e equalizaÃ§Ãµes.

%% \begin{figure}[h!]
%%     \centering
%%         \includegraphics[width=\textwidth]{figuras/delays__}
%%     \caption{ConvoluÃ§Ã£o com o impulso: deslocamento (a), linhas de delays (b) e sÃ­ntese granular~(c). Dispostos em ordem crescente de densidade de pulsos.}
%%         \label{fig:delays}
%% \end{figure}


%% \item Filtros de resposta ao impulso infinita (IIR)

%% Esta classe de filtros Ã©
%% conhecida pela sigla IIR (do inglÃªs Infinite Impulse Response)
%% e Ã© caracterizada por possuir uma representaÃ§Ã£o temporal
%% infinita, i.e. a resposta ao impulso nÃ£o converge para zero.
%% Sua aplicaÃ§Ã£o Ã© usualmente feita pela equaÃ§Ã£o:

%% \begin{equation}\label{eq:diferencas}
%% t_i' = \frac{1}{b_0}\left ( \sum_{j=0}^Ja_j . t_{i-j} + \sum_{k=1}^Kb_k . t_{i-k}' \right )
%% \end{equation}

%% com $b_0=1$ na grande maioria dos casos pois pode-se normalizar as variÃ¡veis:
%% $a_j'=\frac{a_j}{b_0}$ e $b_k'=\frac{b_k}{b_0} \Rightarrow b_0' = 1$.
%% A equaÃ§Ã£o~\ref{eq:diferencas} Ã© chamada 'equaÃ§Ã£o a diferenÃ§as' por exibir as amostras resultantes $\left\{t_i'\right\}$
%% atravÃ©s das diferenÃ§as entre as amostras originais $\{t_i\}$ e as amostras resultantes anteriores $\left\{t_{i-k}'\right\}$.

%% Existem
%% diversos mÃ©todos e ferramentas para a elaboraÃ§Ã£o de filtros IIR
%% e segue abaixo uma seleÃ§Ã£o com fins didÃ¡ticos e para consulta futura por
%% utilidade.
%% SÃ£o filtros bem comportados e cujas
%% filtragens estÃ£o na figura~\ref{fig:iir}.

%% No caso dos filtros de ordem simples, a frequÃªncia de corte $f_c$ Ã© onde 
%% o filtro realiza uma atenuaÃ§Ã£o de $-3dB \approx 0.707 $ da amplitude original.
%% No caso dos filtros passa e rejeita banda, esta mesma atenuaÃ§Ã£o Ã©
%% resultado de duas especificaÃ§Ãµes: $f_c$ (neste caso mais bem compreendida como 'frequÃªncia central') e a largura de banda $bw$,
%% em ambas as frequÃªncias $f_c \pm bw$ hÃ¡ uma atenuaÃ§Ã£o de $\approx 0.707$ da amplitude original.
%% Existe amplificaÃ§Ã£o do som no caso dos filtros passa e rejeita banda quando a frequÃªncia
%% de corte Ã© baixa e a largura de banda Ã© grande o suficiente. Nos agudos, estes filtros apresentam
%% somente um desvio do perfil esperado, expandindo a envoltÃ³ria para o lado grave da banda em
%% evidÃªncia.

%% Para filtros cujas respostas em frequÃªncia possuem outras envoltÃ³rias (para o mÃ³dulo),
%% pode-se realizar cascatas destes filtros aplicando-os sucessivamente.
%% Outra possibilidade Ã© utilizar alguma receita de filtro
%% biquad\footnote{AbreviaÃ§Ã£o
%% de 'biquadrado' pois sua funÃ§Ã£o de transferÃªncia possui dois polos e dois zeros, i.e. sua
%% forma normal consiste em dois polinÃ´mios quadrÃ¡ticos formando uma fraÃ§Ã£o:
%% $\mathbb{H}(z)=\frac{a_0+a_1.z^{-1}+a_2.x^{-2}}{1- b_1.z^{-1} -b_2 . z^{-2}}$.}
%% ou rotinas para cÃ¡lculo de coeficientes
%% de filtros Chebichev\footnote{Filtros Butterworth e ElÃ­pticos podem
%% ser considerados como casos especÃ­ficos dos Filtros do tipo Chebichev.\cite{Openheim,smith}}.
%% Ambas as possibilidades sÃ£o exploradas
%% por tÃ­tulos em nossas referÃªncias, em especial~\cite{JOSFM,smith} e a coleÃ§Ã£o de filtros da comunidade \emph{Music-DSP}, da Universidade de Columbia.\cite{music-dsp,Openheim}

%% \end{itemize}

%% \begin{enumerate}
%% \item Passa-baixas de polo simples com mÃ³dulo da resposta em frequÃªncia no canto superior esquerdo da figura~\ref{fig:iir}. A fÃ³rmula geral tem
%% por referÃªncia da frequÃªncia de corte $f_c \in (0,\frac{1}{2})$,
%% fraÃ§Ã£o da frequÃªncia de amostragem $f_a$
%% em que hÃ¡ aproximadamente uma atenuaÃ§Ã£o de $3dB$.
%% Os coeficientes do filtro IIR
%% $a_0$ e $b_1$ 
%% sÃ£o dados atravÃ©s da variÃ¡vel intermediÃ¡ria $x \in [e^{-\pi},1]$:

%% \begin{figure}[h!]
%%     \centering
%%         \includegraphics[width=\textwidth]{figuras/iir___}
%%     \caption{MÃ³dulos da resposta em frequÃªncia (a), (b), (c) e (d) respectivamente dos filtros IIR das equaÃ§Ãµes \ref{eq:passa-baixas}, \ref{eq:passa-altas}, \ref{eq:passa-banda} e \ref{eq:rejeita-banda} para diferentes frequÃªncias de corte, frequÃªncias centrais e larguras de banda.}
%%         \label{fig:iir}
%% \end{figure}


%% \begin{equation}\label{eq:passa-baixas}
%% \begin{split}
%% x & =e^{-2\pi f_c} \\
%% a_0 & =  1-x \\
%% b_1 & =  x
%% \end{split}
%% \end{equation}

%% \item Passa-altas de polo simples com o mÃ³dulo da resposta em frequÃªncia no canto superior direito da figura~\ref{fig:iir}. A fÃ³rmula geral,
%% com frequÃªncia de corte $f_c \in (0,\frac{1}{2})$, Ã© calculada atravÃ©s da variÃ¡vel
%% intermediÃ¡ria $x \in [e^{-\pi},1]$:


%% \begin{equation}\label{eq:passa-altas}
%% \begin{split}
%% x & =e^{-2\pi f_c} \\
%% a_0 & =  \frac{x+1}{2} \\
%% a_1 & =  -\frac{x+1}{2} \\
%% b_1 & =  x
%% \end{split}
%% \end{equation}


%% %\item Passa-banda
%% %\item Rejeita-banda
%% \item NÃ³ (\emph{notch filter}). Este filtro Ã© parametrizado
%% pela frequÃªncia central\footnote{ AtenÃ§Ã£o com a frequÃªncia de corte tambÃ©m $f_c$ nos filtros passa baixas e passa altas.} $f_c$
%% e a largura de banda $bw$
%% - $f_c \pm bw$, que resultam em $0.707$ da amplitude, i.e. atenuaÃ§Ã£o de $3dB$ -
%% ambos dados como fraÃ§Ãµes de $f_a$, portanto $f,\; bw \in (0,0.5)$.

%% Por facilidade, sejam as variÃ¡veis auxiliares $K$ e $R$:

%% \begin{equation}\label{eq:varAux}
%% \begin{split}
%% R & = 1 - 3bw \\
%% K & = \frac{1-2R\cos(2\pi f_c) + R^2}{2 - 2 \cos (2 \pi f_c)}
%% \end{split}
%% \end{equation}

%% O filtro passa banda do canto inferior esquerdo da figura~\ref{fig:iir}
%% possui os seguintes coeficientes para a equaÃ§Ã£o~\ref{eq:diferencas}:

%% \begin{equation}\label{eq:passa-banda}
%% \begin{split}
%% a_0 & =  1 - K \\
%% a_1 & =  2(K-R)\cos (2\pi f_c) \\
%% a_2 & =  R^2-K \\
%% b_1 & =  2R \cos (2\pi f_c) \\
%% b_2 & =  -R^2
%% \end{split}
%% \end{equation}

%% Os coeficientes do filtro rejeita banda sÃ£o:

%% \begin{equation}\label{eq:rejeita-banda}
%% \begin{split}
%% a_0 & =  K \\
%% a_1 & =  -2K\cos (2\pi f_c) \\
%% a_2 & =  K \\
%% b_1 & =  2R \cos (2\pi f_c) \\
%% b_2 & =  -R^2
%% \end{split}
%% \end{equation}

%% com o mÃ³dulo de sua resposta em frequÃªncia 
%% disposto na parte inferior esquerda da figura~\ref{fig:iir}.

%% %\item Biquad: pela especificaÃ§Ã£o de uma frequÃªncia central, da qualidade
%% %e da intensidade do filtro, este filtro Ã© simples e usual para Ã¡udio,
%% %permitindo ajustes mais finos. Diversas receitas podem ser encontradas
%% %na literatura, recomendamos especialmente as diferentes especificaÃ§Ãµes
%% %em ~\ref{musicDSP} e ~\ref{dspguide}.

%% \end{enumerate}

%% \subsection{RuÃ­dos}\label{subsec:ruidos}
%% De forma geral, os sons sem altura definida 
%% sÃ£o chamados ruÃ­dos.\cite{Lacerda}
%% Estes sÃ£o constituintes importantes dos sons musicais de altura definida,
%% como os ruÃ­dos presentes nas notas do piano, do violino, etc. AlÃ©m disso, os instrumentos
%% de percussÃ£o, em grande parte, nÃ£o possuem altura definida e seus sons
%% sÃ£o em geral compreendidos como ruÃ­dos.\cite{Roederer} Na mÃºsica eletrÃ´nica, incluindo
%% a eletroacÃºstica e gÃªneros de pista de danÃ§a, os ruÃ­dos possuem usos diversificados e comumente
%% caracterÃ­sticos do estilo musical.\cite{Cook}

%% A ausÃªncia de uma altura definida Ã© fruto da ausÃªncia de uma organizaÃ§Ã£o harmÃ´nica perceptÃ­vel nas componentes senoidais que formam o som. Assim,
%% sÃ£o incontÃ¡veis as possibilidades de gerar ruÃ­dos.
%% A utilizaÃ§Ã£o
%% de valores aleatÃ³rios para a geraÃ§Ã£o da sequÃªncia sonora $T_i$
%% Ã© um mÃ©todo atraente,
%% mas os resultados nÃ£o sÃ£o tÃ£o Ãºteis, tendendo geralmente ao ruÃ­do branco.\cite{Cook}

%% Outra possibilidade Ã© a geraÃ§Ã£o de ruÃ­do atravÃ©s do espectro desejado, a partir
%% do qual executamos a transformada inversa de Fourier.
%% A distribuiÃ§Ã£o espectral deve ser feita com cuidado 
%% pois caso se utilize a mesma fase,
%% ou fases com forte correlaÃ§Ã£o, 
%% o som sintetizado possuirÃ¡ energia bastante concentrada
%% em alguns trechos de sua duraÃ§Ã£o.


%% \begin{figure}[htpq!]
%%     \centering
%%         \includegraphics[width=\textwidth]{figuras/ruidos___}
%%     \caption{RuÃ­dos coloridos realizados atravÃ©s das equaÃ§Ãµes~\ref{eq:branco}, \ref{eq:rosa}, \ref{eq:marrom}, \ref{eq:azul}, \ref{eq:violeta}: espectros e ondas sonoras resultantes.}
%%         \label{fig:ruidos}
%% \end{figure}


%% Abaixo elencamos alguns ruÃ­dos de espectro estÃ¡tico. SÃ£o chamados \emph{coloridos} por terem sido associados a cores. 
%% A figura~\ref{fig:ruidos} mostra lado a lado o perfil espectral e
%% a sequÃªncia sonora. Os ruÃ­dos foram gerados com a mesma fase, entÃ£o
%% pode-se observar o resultado das contribuiÃ§Ãµes em diferentes regiÃµes do espectro.

%% \begin{itemize}

%% \item O ruÃ­do branco deve seu nome por possuir energia distribuÃ­da
%% igualmente por todas as frequÃªncias. Pode-se realizar
%% o ruÃ­do branco com a transformada inversa dos seguintes coeficientes:


%% \begin{equation}\label{eq:branco}
%% \begin{split}
%% c_0 & =0 \quad \text{pois evita-se bias} \\
%% c_i & =e^{j.x}\;,\;\; j^2=-1 \;, \;\; x \; \text{randÃ´mico} \; \in \; [0,2\pi]\;,\;\; i \; \in \; \left[1, \, \frac{\Lambda}{2}-1\right] \\
%% c_{\Lambda/2} & = 1 \quad\quad \text{(se $\Lambda$ par)}\\ 
%% c_i & = c_{\Lambda - i}^*\;,\;\; \text{para}\;  i \; > \;  \frac{\Lambda}{2}
%% \end{split}
%% \end{equation}

%% O valor de $c_i$ calculado pela exponencial Ã© apenas um artifÃ­cio para resultar em mÃ³dulo unitÃ¡rio e fase aleatÃ³ria.
%% JÃ¡ $c_{\Lambda/2}$ Ã© sempre puramente real (como vimos na seÃ§Ã£o anterior).

%% \item O ruÃ­do rosa possui uma queda de $3dB$ por oitava. Este ruÃ­do Ã© muito usual no teste de equipamentos e montagens de aparelhos alÃ©m de presenÃ§a destacada na natureza~\cite{Roederer}. 

%% \begin{equation}\label{eq:rosa}
%% \begin{split}
%% f_{\text{min}} & \approx 15 Hz \\
%% f_i & = i \frac{f_a}{\Lambda} \;, \;\; \quad i \;\leq\; \frac{\Lambda}{2},\;\; i\;\in\;\mathbb{N}  \\
%% \alpha_i & = \left(10^{-\frac{3}{20}}\right)^{\log _2 \left ( \frac{f_i}{f_{\text{min}}} \right )}  \\
%% c_i & =0\;,\;\; \forall \; i \; : f_i<f_{\text{min}} \\
%% c_i & =e^{j.x} . \alpha_i\;,\;\; j^2=-1 \;, \;\;\  x \;\; \text{randÃ´mico} \; \in \; [0,2\pi]\;,\;\; \forall \; i \; : f_{\text{min}} \le f_i < f_{\lceil \Lambda/2-1 \rceil}  \\
%% c_{\Lambda/2} & = \alpha_{\Lambda/2} \quad\quad \text{(se $\Lambda$ par)}\\ 
%% c_i & = c_{\Lambda - i}^*\;,\;\; \text{para}\;  i \; > \;  \Lambda/2
%% \end{split}
%% \end{equation}

%% A frequÃªncia mÃ­nima $f_{\text{min}}$ pode ser escolhida com base no limite da audiÃ§Ã£o, pois nÃ£o se escuta como altura uma componente sonora cuja frequÃªncia esteja abaixo de $\approx\; 20Hz$.

%% Os ruÃ­dos restantes podem ser feitos com base no procedimento descrito para 
%% o ruÃ­do rosa, bastando que modificar detalhes, em especial a equaÃ§Ã£o que define $\alpha_i$.

%% \item O ruÃ­do marrom deve seu nome a Robert Brown, que descreveu o movimento browniano.
%% Embora esta origem seja um tanto dÃ­spar do que pode-se considerar motivo para uma associaÃ§Ã£o com a cor marrom, o ruÃ­do sonoro ficou consagrado com este nome. De qualquer forma, Ã© bastante comum declarar satisfatÃ³ria a associaÃ§Ã£o do ruÃ­do com a cor marrom, uma vez que os ruÃ­dos branco e rosa sÃ£o mais estridentes e relacionados a cores mais intensas~\cite{Cook,guillaume}.

%% O que caracteriza este ruÃ­do Ã© a queda de $6dB$ por oitava. Desta forma, $\alpha_i$ 
%% no conjunto \ref{eq:rosa} fica:

%% \begin{equation}\label{eq:marrom}
%% \alpha_i=(10^{-\frac{6}{20}})^{\log _2 \left( \frac{f_i}{f_{\text{min}}} \right )}
%% \end{equation}

%% \item No ruÃ­do azul hÃ¡ ganho de $3dB$ por oitava em uma banda limitada
%% pela frequÃªncia mÃ­nima $f_{\text{min}}$ e a frequÃªncia
%% mÃ¡xima $f_{\text{mÃ¡x}}$. Assim, tambÃ©m com base no conjunto de equaÃ§Ãµes \ref{eq:rosa}:

%% \begin{equation}\label{eq:azul}
%% \begin{split}
%% \alpha_i & = (10^{\frac{3}{20}})^{\log _2 \left ( \frac{f_i}{f_{\text{min}}} \right )} \\
%% c_i & =0\;,\;\; \forall \; i \; : f_i<f_{\text{min}} \;\; \text{ou} \;\; f_i>f_{\text{mÃ¡x}} \\
%% \end{split}
%% \end{equation}

%% \item O ruÃ­do violeta Ã© similar ao ruÃ­do azul, mas o ganho Ã© de $6dB$ por oitava:

%% \begin{equation}\label{eq:violeta}
%% \alpha_i = (10^{\frac{6}{20}})^{\log _2 \left ( \frac{f_i}{f_{\text{min}}} \right )} \;\;, \quad f_{\text{min}} \approx 15 Hz \\
%% \end{equation}

%% \item O ruÃ­do preto possui perdas maiores que $6dB$ por oitava, assim:

%% \begin{equation}\label{eq:preto}
%% \alpha_i=(10^{-\frac{\beta}{20}})^{\log _2 \left( \frac{f_i}{f_{\text{min}}} \right )}\;\;, \quad \beta > 6
%% \end{equation}



%% \item O ruÃ­do cinza Ã© definido como
%% um ruÃ­do branco sujeito a uma das curvas iso-audÃ­veis. Estas curvas sÃ£o resultados
%% experimentais e necessÃ¡rias para a obtenÃ§Ã£o de $\alpha_i$. Uma implementaÃ§Ã£o da ISO 226, a Ãºltima revisÃ£o destas curvas, estÃ¡ na toolbox \massa.\cite{MASSA}

%% \end{itemize}

%% Foram expostos somente ruÃ­dos com espectro estÃ¡tico. Existem classificaÃ§Ãµes
%% de ruÃ­dos com variaÃ§Ãµes do espectro no decorrer do tempo. Existem tambÃ©m ruÃ­dos que
%% sÃ£o fundamentalmente transientes, como os clicks e os chirps. O primeiro Ã© modelado
%% facilmente por um impulso relativamente isolado, enquanto o segundo nÃ£o Ã© um ruÃ­do, mas uma varredura rÃ¡pida de 
%% alguma banda de frequÃªncia.\cite{Cook}

%% Os ruÃ­dos das equaÃ§Ãµes \ref{eq:branco}, \ref{eq:rosa}, \ref{eq:marrom},
%% \ref{eq:azul}, \ref{eq:violeta} estÃ£o na figura \ref{fig:ruidos}. Os espectros foram feitos com a mesma fase em cada coeficiente de mesma frequÃªncia, de forma que
%% se pode observar a contribuiÃ§Ã£o dos harmÃ´nicos agudos e
%% das frequÃªncias graves.


%% \subsection{Tremolo e vibrato, AM e FM}\label{subsec:tvaf}

%% O vibrato Ã© uma variaÃ§Ã£o periÃ³dica de altura (frequÃªncia) e 
%% o tremolo Ã© uma variaÃ§Ã£o periÃ³dica de volume (intensidade).\footnote{Alguns instrumentos e contextos musicais usam nomenclaturas diferentes. Por exemplo, no piano, o chamado tremolo Ã© um vibrato e um tremolo segundo a classificaÃ§Ã£o aqui utilizada. As definiÃ§Ãµes presentes neste trabalho tem por base uma literatura mais abrangente do que a utilizada para um Ãºnico instrumento, prÃ¡tica ou tradiÃ§Ã£o musical e comum em contextos de teoria musical e musica eletrÃ´nica.\cite{Lacerda,Harmonia}}
%% Para o caso geral, o vibrato Ã© descrito da seguinte forma:


%% \begin{equation}\label{vbrGamma}
%% \gamma_i'=\left \lfloor i f' \frac{\widetilde{\Lambda}_M}{f_a} \right \rfloor
%% \end{equation}

%% \begin{equation}\label{vbrAux}
%% t_i'=\widetilde{m}_{\gamma_i' \;\% \widetilde{\Lambda}_M}
%% \end{equation}

%% \begin{equation}\label{vbrF}
%% f_i=f \left ( \frac{f + \mu }{f} \right )^{t_i'}=f . 2^{t_i'\frac{\nu}{12}}
%% \end{equation}

%% \begin{equation}\label{vbrGamma2}
%% \Delta_{\gamma_i}=f_i\frac{\widetilde{\Lambda}}{f_a} \quad \Rightarrow \quad \gamma_i = \left \lfloor \sum_{j=0}^{i} f_j \frac{\widetilde{\Lambda}}{f_a} \right \rfloor = \left \lfloor \sum_{j=0}^{i} \frac{\widetilde{\Lambda}}{f_a}f \left ( \frac{f + \mu }{f} \right )^{t_j'}  \right \rfloor= \left \lfloor \sum_{j=0}^{i} \frac{\widetilde{\Lambda}}{f_a}f . 2^{t_j'\frac{\nu}{12}}  \right \rfloor
%% \end{equation}

%% \begin{equation}\label{vbrT}
%% T_i^{f, vbr(f',\,\nu)}=\left\{ t_i^{f,vbr(f',\,\nu)} \right\}_0^{\Lambda-1}=\left\{ \widetilde{l}_{\gamma_i \%\; \widetilde{\Lambda} } \right\}_0^{\Lambda-1}
%% \end{equation}


%% \begin{figure}[h!]
%%     \centering
%%         \includegraphics[width=\textwidth]{figuras/vibrato___}
%%     \caption{Espectrograma de um som com vibrato senoidal de $3Hz$ e profundidade de uma oitava em uma dente de serra de $1000Hz$ (considerada $f_a=44.1kHz$).}
%%         \label{fig:vibrato}
%% \end{figure}

%% Para a correta realizaÃ§Ã£o do vibrato, Ã© importante atenÃ§Ã£o para as duas tabelas e sequÃªncias.
%% A tabela $\widetilde{M}_i$ de tamanho $\widetilde{\Lambda}_M$ e a sequÃªncia de Ã­ndices $\gamma_i'$ formam a sequÃªncia $t_i'$
%%  que Ã© o padrÃ£o da oscilaÃ§Ã£o da frequÃªncia enquanto
%% a tabela $\widetilde{L}_i$ de tamanho $\widetilde{\Lambda}$ e a sequÃªncia de Ã­ndices $\gamma_i$ formam $t_i$ que Ã© o som em si.
%% As variÃ¡veis $\mu$ e $\nu$ quantificam a intensidade do vibrato: $\mu$ Ã© uma medida direta da quantidade
%% de Hertz envolvidos no limite superior da oscilaÃ§Ã£o e $\nu$ Ã© a medida direta de semitons envolvidos na oscilaÃ§Ã£o ($2\nu$ Ã© o nÃºmero de semitons entre os picos superiores e inferiores de oscilaÃ§Ã£o da frequÃªncia do som $\{t_i\}$ causada pelo vibrato).
%% Ã conveniente $\nu=\log_{2}\frac{f+\mu}{f} $ neste caso pois o aumento mÃ¡ximo de frequÃªncia
%% nÃ£o equivale Ã  diminuiÃ§Ã£o mÃ¡xima, mas a variaÃ§Ã£o de semitons se mantÃ©m.

%% A Figura \ref{fig:vibrato} Ã© o espectrograma de um vibrato artificial de uma nota em
%% $1000Hz$ (entre um si e um dÃ³) e cujo desvio da frequÃªncia atinge uma oitava
%% para cima e para baixo. Qualquer forma de onda pode
%% ser utilizada para gerar o som e o padrÃ£o de oscilaÃ§Ã£o do vibrato
%% em quaisquer frequÃªncia de oscilaÃ§Ã£o e desvio de altura envolvidos\footnote{O desvio de altura
%% Ã© chamado profundidade do vibrato e Ã© geralmente dado por conveniÃªncia em semitons ou cents.}. Estas oscilaÃ§Ãµes com formas precisas e amplitudes arbitrÃ¡rias nÃ£o sÃ£o praticÃ¡veis em instrumentos musicais tradicionais, introduzindo novidade nas possibilidades artÃ­sticas.

%% O caso do tremolo Ã© semelhante: $f'$, $\gamma_i'$ e $t_i'$ permanecem os mesmos.
%% A sequÃªncia de amplitudes a serem multiplicadas pela sequÃªncia original $t_i$ fica:

%% \begin{equation}\label{trA}
%% a_i=10^{\frac{V_{dB}}{20}t_i' } = a_{\text{mÃ¡x}}^{t_i'}
%% \end{equation}

%% \begin{equation}\label{trT}
%% T_i^{tr(f')}=\left \{ t_i^{tr(f')} \right \}_0^{\Lambda-1}=\{ t_i . a_i \}_0^{\Lambda-1}=\left \{t_i .10^{t_i' \frac{V_{dB}}{20}}    \right \}_0^{\Lambda-1}=\left\{t_i . a_{\text{mÃ¡x}}^{t_i'} \right\}_0^{\Lambda-1}
%% \end{equation}

%% Onde $V_{dB}$ Ã© a profundidade da oscilaÃ§Ã£o em decibels do tremolo e $a_{\text{mÃ¡x}}=10^{\frac{V_{dB}}{20}}$
%%  Ã© o ganho mÃ¡ximo de amplitude envolvido.
%% A mediÃ§Ã£o em decibels Ã© pertinente pois o aumento mÃ¡ximo de amplitude
%% nÃ£o equivale Ã  diminuiÃ§Ã£o mÃ¡xima relacionada, enquanto a diferenÃ§a em decibels se mantÃ©m.

%% A figura~\ref{fig:tremolo} mostra a amplitude das sequÃªncias $\{a_i\}_0^{\Lambda-1}$ e $\{t_i'\}_0^{\Lambda-1}$
%% para trÃªs oscilaÃ§Ãµes de um tremolo com forma da dente de serra. A curvatura Ã© devida Ã  progressÃ£o logarÃ­tmica de
%% intensidade. A frequÃªncia do tremolo Ã© de $1,5Hz$ pois $f_a=44,1kHz \; \Rightarrow \; \text{duraÃ§Ã£o} = \frac{i_{\text{mÃ¡x}}=82000}{f_a}= 2s \; \Rightarrow \; \frac{3\text{oscilaÃ§Ãµes}}{2s}=1,5$ oscilaÃ§Ãµes por segundo ($Hz$). 

%% A montagem musical \emph{Vibra e treme} explora estes recursos dos tremolos e vibratos em associaÃ§Ã£o e isoladamente
%% com frequÃªncias $f'$
%% e profundidades ($\nu$ e $V_{dB}$) diferentes, variaÃ§Ãµes progressivas dos parÃ¢metros\footnote{Os tremolos e vibratos ocorrem muitas vezes juntos em instrumentos tradicionais e na voz.}. A peÃ§a desenvolve tambÃ©m uma comparaÃ§Ã£o entre os vibratos e tremolos em escala logarÃ­tmica e em escala linear para uma apreciaÃ§Ã£o qualitativa. Seu cÃ³digo estÃ¡ no ApÃªndice~\ref{ap:vibra} e disponÃ­vel online como parte da \emph{toolbox} \massa.


%% \begin{figure}[h!]
%%     \centering
%%         \includegraphics[width=\textwidth]{figuras/tremolo}
%%     \caption{Tremolo de profundidade $V_{dB}=12dB$ com padrÃ£o oscilatÃ³rio de uma dente de serra em $f'=1.5Hz$ em uma senoide de $f=40Hz$ (considerada taxa de amostragem $f_a=44,1kHz$).}
%%         \label{fig:tremolo}
%% \end{figure}

%% No aumento progressivo de $f'$,
%% a aproximaÃ§Ã£o do limiar de frequÃªncia
%% para audiÃ§Ã£o do fenÃ´meno sonoro como
%% altura ($\approx 20Hz$) gera rugosidades para
%% ambos tremolos e vibratos. Estas rugosidades sÃ£o muito apreciadas
%% tanto na tradiÃ§Ã£o erudita quanto na mÃºsica eletrÃ´nica atual, especialmente no \emph{Dubstep}.
%% A rugosidade tambÃ©m Ã© gerada atravÃ©s de conteÃºdos espectrais que geram batimentos.\cite{Porres,porres2009} A sequÃªncia \emph{Bela Rugosi}
%% explora este limiar com concomitÃ¢ncias de tremolos e vibratos na mesma
%% voz, com intensidades e formas de onda diferentes. Seu cÃ³digo estÃ¡ o ApÃªndice~\ref{ap:bela} e disponÃ­vel online como parte da \massa.

%% Aumentando ainda mais a frequÃªncia, estas oscilaÃ§Ãµes
%% deixam de ser eventos identificÃ¡veis. 
%% Neste caso, as oscilaÃ§Ãµes sÃ£o
%% audÃ­veis como altura. Assim, $f'$, $\mu$ e a forma de onda realizam alteraÃ§Ãµes espectrais no som
%% original $T_i$ de formas diferentes para os tremolos e para os vibratos. SÃ£o as 
%% chamadas sÃ­nteses AM (\emph{Amplitude Modulation}) e FM (\emph{Frequency Modulation}), respectivamente.
%% Estas sÃ£o tÃ©cnicas conhecidas, com aplicaÃ§Ãµes em sintetizadores
%% como o \emph{Yamaha DX7}, e com aplicaÃ§Ãµes fora da mÃºsica, como em telecomunicaÃ§Ãµes para transmissÃ£o de informaÃ§Ã£o via ondas eletromagnÃ©ticas (ex. rÃ¡dios AM e FM).

%% Para fins musicais e em resumo, pode-se entender a sÃ­ntese FM atravÃ©s do caso entre senoides
%% e decompor os sinais em seus espectros de Fourier (i.e. senoidais) para casos mais complexos.
%% Assim, a sÃ­ntese FM realizada com um 'vibrato' senoidal de frequÃªncia $f'$ e profundidade $\mu$ em um som tambÃ©m senoidal $T_i$ de frequÃªncia $f$
%% gera bandas centradas em $f$ e distantes $f'$ entre si:

%% \begin{equation}\label{eq:fmEsp}
%% \begin{split}
%% \{t_i'\} & = \left \{ \cos \left [f . 2 \pi \frac{i}{f_a-1} + \mu . sen \left ( f' . 2 \pi \frac{i}{ f_a -1 } \right ) \right ] \right \} = \\
%%  & = \left \{ \sum_{k=-\infty}^{+\infty} J_k(\mu) \cos \left [ f . 2 \pi \frac{i}{f_a-1} + k . f' . 2 \pi \frac{i}{f_a-1} \right ]  \right \} = \\
%%  & = \left \{ \sum_{k=-\infty}^{+\infty} J_k(\mu) \cos \left [ (f+k.f') . 2 \pi \frac{i}{f_a-1} \right ]  \right \}
%% \end{split}
%% \end{equation}

%% onde 
%% \begin{equation}\label{eq:Bessel}
%% J_k(\mu) = \frac{2}{\pi} \int_0^{\frac{\pi}{2}}\left [ cos \left (\overline{k}\;\frac{\pi}{2} + \mu . \sin w \right ) . cos \left ( \overline{k}\;\frac{\pi}{2} + k . w \right ) \right ] dw \quad , \quad \overline{k} = k \% 2 \;\;,\;\; k \in \mathbb{N}
%% \end{equation}
%% Ã© a funÃ§Ã£o de Bessel~\cite{BesselCCRMA,JOSFM} que na FM especifica a amplitude de cada componente. 

%% Nestas equaÃ§Ãµes, a variaÃ§Ã£o de frequÃªncia introduzida por $\{t_i'\}$ nÃ£o respeita a progressÃ£o geomÃ©trica de frequÃªncia que acompanha a percepÃ§Ã£o de altura, mas sim a equaÃ§Ã£o~\ref{freqLinear}. A utilizaÃ§Ã£o das equaÃ§Ãµes~\ref{vbrF} para a FM estÃ¡ no ApÃªndice~\ref{cap:fmam}, onde Ã© calculado o conteÃºdo espectral da sÃ­ntese FM obtida com oscilaÃ§Ãµes na escala logarÃ­tmica. De fato, o comportamento simples que torna a FM atraente Ã© obtido somente com as variaÃ§Ãµes lineares em~\ref{eq:fmEsp}.

%% O caso da modulaÃ§Ã£o de amplitude (AM) Ã© mais simples:

%% \begin{equation}\label{eq:amEsp}
%% \begin{split}
%% \{t_i'\}_0^{\Lambda-1} & =\{(1+a_i) . t_i\}_0^{\Lambda-1}= \left \{ \left [ 1+M.\sin \left ( f'.2\pi\frac{i}{f_a -1} \right ) \right] . P .\sin \left ( f.2\pi\frac{i}{f_a -1} \right ) \right \}_0^{\Lambda-1} = \\
%%                        & =  \left\{P.\sin \left( f.2\pi\frac{i}{f_a -1}  \right ) + \frac{P.M}{2} \left [ \sin \left( (f-f').2\pi\frac{i}{f_a -1}  \right ) + \sin \left( (f+f').2\pi\frac{i}{f_a -1}  \right ) \right ] \right \}_0^{\Lambda-1}
%% \end{split}
%% \end{equation}

%% Ou seja, o som resultante Ã© o original
%% e a reproduÃ§Ã£o de seu conteÃºdo espectral acima e abaixo da frequÃªncia
%% original, distantes $f'$ de $f$. Novamente, isso Ã© obtido com a variaÃ§Ã£o na escala linear de amplitude. No ApÃªndice~\ref{cap:fmam} estÃ¡ uma exposiÃ§Ã£o do espectro da AM realizada com a oscilaÃ§Ã£o na escala logarÃ­tmica de amplitude. Esta tambÃ©m perde o comportamento simples.

%% A sequÃªncia $T_i$ de frequÃªncia $f$, chamada portadora, Ã© modulada pela $f'$, chamada moduladora. No jargÃ£o de FM e AM, $\mu$ e $\alpha=10^{\frac{V_{dB}}{20}}$ sÃ£o chamados Ã­ndices de modulaÃ§Ã£o. Assim, 
%% para o padrÃ£o de vibraÃ§Ã£o da moduladora $\{t_i'\}$ as equaÃ§Ãµes:

%% \begin{equation}\label{fmGammaAux}
%% \gamma_i'=\left \lfloor i f' \frac{\widetilde{\Lambda}_M}{f_a} \right \rfloor
%% \end{equation}

%% \begin{equation}\label{fmAux}
%% t_i'=\widetilde{m}_{\gamma_i' \;\% \widetilde{\Lambda}_M}
%% \end{equation}

%% Para aplicaÃ§Ã£o da moduladora $\{t_i'\}$ na portadora $\{t_i\}$
%% por FM:

%% \begin{equation}\label{fmF}
%% f_i=f + \mu . t_i'
%% \end{equation}

%% \begin{equation}\label{fmGamma}
%% \Delta_{\gamma_i}=f_i\frac{\widetilde{\Lambda}}{f_a} \quad \Rightarrow \quad \gamma_i = \left \lfloor \sum_{j=0}^{i} f_j \frac{\widetilde{\Lambda}}{f_a} \right \rfloor = \left \lfloor \sum_{j=0}^{i} \frac{\widetilde{\Lambda}}{f_a}(f+\mu . t_j') \right\rfloor
%% \end{equation}

%% \begin{equation}\label{fmT}
%% T_i^{f,\, FM(f',\,\mu)}=\left\{ t_i^{f,\,FM(f',\,\mu)} \right\}_0^{\Lambda-1}=\left\{\,\widetilde{l}_{\gamma_i \%\; \widetilde{\Lambda} } \,\right\}_0^{\Lambda-1}
%% \end{equation}

%% Onde $\widetilde{l}$ Ã© um perÃ­odo da forma de onda de comprimento $\widetilde{\Lambda}$ da portadora.

%% Para realizar a AM, basta modular $\{t_i\}$ com $\{t_i'\}$ atravÃ©s das equaÃ§Ãµes:

%% \begin{equation}\label{amA}
%% a_i=1 + \alpha . t_i'
%% \end{equation}

%% \begin{equation}\label{amT}
%% T_i^{f,\,AM(f',\,\alpha)}=\left\{ t_i^{f,\,AM(f',\,\alpha)} \right\}_0^{\Lambda-1}=\{ t_i . a_i \}_0^{\Lambda-1}=\{t_i . (1 + \alpha . t_i')    \}_0^{\Lambda-1}
%% \end{equation}



%% \subsection{Usos musicais}\label{subsec:mus2}
%% A este ponto as possibilidades musicais explodiram. As
%% caracterÃ­sticas de altura (dada pela frequÃªncia),
%% timbre (dado pela forma de onda e filtragens),
%% volume (dado pela intensidade) e duraÃ§Ã£o (dada pelo nÃºmero de amostras)
%% podem ser consideradas
%% de forma absoluta ou tratadas ao longo de sua duraÃ§Ã£o,
%% com a Ãºnica exceÃ§Ã£o da duraÃ§Ã£o em si.

%% Desta forma, os usos musicais aqui dispostos sÃ£o uma coleÃ§Ã£o de possibilidades
%% com o objetivo de exemplificar manipulaÃ§Ãµes sonoras que resultem algo
%% musical, por razÃµes variadas e aprofundadas na prÃ³xima seÃ§Ã£o.

%% \subsubsection{VÃ­nculos entre caracterÃ­sticas}

%% Uma outra possibilidade interessante Ã© usar vÃ­nculos
%% entre os parÃ¢metros do tremolo e do vibrato e algum parÃ¢metro da nota bÃ¡sica,
%% como a frequÃªncia. Assim, pode-se estabelecer que
%% a frequÃªncia do vibrato Ã© diretamente proporcional Ã  altura, e a profundidade do tremolo Ã© inversamente proporcional
%% Ã  altura.
%% Desta forma, com as equaÃ§Ãµes \ref{vbrGamma}, \ref{vbrF} e \ref{trA}
%% pode-se escrever:

%% \begin{equation}\label{eq:vinculos}
%% \begin{split}
%% f^{vbr} = f^{tr} & = func_a(f) \\
%% \nu & = func_b(f) \\
%% V_{dB} & = func_c(f)
%% \end{split}
%% \end{equation}

%% Com $f^{vbr}$ e $f^{tr}$ como $f'$ nas equaÃ§Ãµes de referÃªncia, ou seja, a frequÃªncia
%% de oscilaÃ§Ã£o do vibrato e do tremolo da equaÃ§Ã£o~\ref{vbrGamma}. JÃ¡ $\nu$ e $V_{dB}$ sÃ£o as profundidades
%% do vibrato e do tremolo, respectivamente. As funÃ§Ãµes $func_a$,
%% $func_b$ e $func_c$ sÃ£o arbitrÃ¡rias e dependentes das intenÃ§Ãµes musicais. A montagem 
%% \emph{Tremolos, vibratos e a frequÃªncia} explora
%% recursos como este e variaÃ§Ãµes da forma de onda da oscilaÃ§Ã£o com vÃ­nculos, de modo a formar um \emph{idioma musical}\footnote{Veja na prÃ³xima seÃ§Ã£o.}. Seu cÃ³digo estÃ¡ no ApÃªndice~\ref{ap:tremolos} e tambÃ©m disponÃ­vel online como parte da caixa de ferramentas \massa.


%% Com relaÃ§Ã£o Ã  convoluÃ§Ã£o, pode-se estabelecer uma duraÃ§Ã£o como pulso musical - a exemplo de um pulso BPM - 
%% e distribuir impulsos no decorrer deste pulso, de forma a estabelecer mÃ©tricas e ritmos\footnote{Lembrando
%% que a convoluÃ§Ã£o com o impulso resulta no som deslocado ao instante de ocorrÃªncia do impulso.}.
%% Por exemplo, 2 impulsos igualmente espaÃ§ados fazem uma
%% divisÃ£o binÃ¡ria bÃ¡sica do pulso. Dois sinais, um com 2 pulsos e outro com 3 pulsos,
%% ambos com os impulsos igualmente espaÃ§ados na duraÃ§Ã£o do pulso, resultam na manutenÃ§Ã£o
%% do pulso, com uma marcaÃ§Ã£o rÃ­tmica usada tanto em divisÃµes binÃ¡rias quanto ternÃ¡rias em diversos
%% estilos de mÃºsica Ã©tnica e tradicional.\cite{Gramani} 
%% Os prÃ³prios valores absolutos destes impulsos resultam em proporÃ§Ãµes entre as amplitudes dos sinais
%% convoluidos.
%% Este recurso da mÃ©trica
%% estabelecida pela convoluÃ§Ã£o com impulsos Ã© explorado na montagem \emph{Trenzinho de caipiras impulsivos}. Os recursos explorados incluem a criaÃ§Ã£o de amÃ¡lgamas sonoros provenientes da sÃ­ntese granular e esta montagem Ã© jÃ¡ uma ponte para a prÃ³xima seÃ§Ã£o. Veja especialmente a figura~\ref{fig:pulsoSubAgl}. O cÃ³digo da peÃ§a estÃ¡ na seÃ§Ã£o~\ref{ap:trenzinho} e disponÃ­vel como parte da toolbox \massa.

%% \subsubsection{Fonte em movimento, receptor em movimento, efeito Doppler}

%% Retomada a exposiÃ§Ã£o da subseÃ§Ã£o~\ref{subsec:spac}, quando uma fonte ou um receptor estÃ¡ em movimento, suas caracterÃ­sticas idealmente sÃ£o atualizadas a cada amostra do sinal digital. As velocidades sÃ£o decompostas com relaÃ§Ã£o Ã  direÃ§Ã£o de cada ouvido. Assim, dada a velocidade $v_s$ da fonte ($s$ de \emph{source}), positiva se a fonte se move no sentido de se afastar do receptor e a velocidade $v_r$ do receptor, positiva no sentido de se aproximar da fonte, a frequÃªncia Ã© dada pela conhecida fÃ³rmula do efeito Doppler:

%% \begin{equation}\label{eq:fDoppler}
%%     f=\left(\frac{v_{som}+v_r}{v_{som}+v_s}\right)f_0
%% \end{equation}

%% Com esta frequÃªncia e com as relaÃ§Ãµes dadas pela nova DII da nova localizaÃ§Ã£o da fonte, pode-se realizar o efeito Doppler. HÃ¡ um acrÃ©scimo para maior fidelidade ao fenÃ´meno fÃ­sico: um aumento da potÃªncia recebida. Pode-se entender que este aumento em potÃªncia Ã© proporcional Ã  velocidade relativa, que, a cada segundo, acrescenta aquele trecho percorrido, pela forma de onda, de potÃªncia: $\Delta P=P_0\left(\frac{v_r-v_s}{343,2}\right)$, com $P_0$ a potÃªncia do sinal.

%% Assim, pode-se obter a amplitude e frequÃªncia de uma fonte em movimento.
%% Esteja esta fonte Ã  frente do receptor
%% a uma distÃ¢ncia horizontal de $y_0$ metros e altura $z_0$ metros. A distÃ¢ncia Ã© dada por
%% $D_i=\left\{ d_i=\sqrt{ y_{i}^{2}+z_{0}^{2} } \right\}_0^{\Lambda-1}$
%% onde $y_i=y_0+v_s-v_r$ se consideradas $v_s$ e $v_r$ horizontais. A amplitude muda com a distÃ¢ncia e com o fator de potÃªncia citado acima (veja a subseÃ§Ã£o~\ref{subsec:volume} para a conversÃ£o de potÃªncia para amplitude):

%% \begin{equation}\label{eq:aDoppler}
%%     A_i=\left\{ \frac{z_0}{d_i}A_{\Delta P}\right\}_0^{\Lambda-1} = \left\{ \frac{z_0}{\sqrt{y_i^2+z_0^2}} \sqrt{\frac{v_r-v_s}{343,2}+1}  \,\right\}_0^{\Lambda-1}
%% \end{equation}

%% Observe que o fator alterador de amplitude devido Ã  distÃ¢ncia Ã© par enquanto a o fator devido Ã  variaÃ§Ã£o de potÃªncia Ã© antissimÃ©trico com relaÃ§Ã£o ao cruzamento da fonte e do receptor. JÃ¡ a frequÃªncia tem uma progressÃ£o simÃ©trica com relaÃ§Ã£o Ã  altura, ou seja, os mesmos semitons (ou fraÃ§Ãµes) acrescentados na aproximaÃ§Ã£o sÃ£o decrescidos no afastamento. AlÃ©m disso, a transiÃ§Ã£o Ã© abrupta caso a fonte e o receptor se cruzem com exatidÃ£o, caso contrÃ¡rio, hÃ¡ uma progressÃ£o monotÃ´nica. No caso considerado, em que hÃ¡ uma altura fixa $z_0$, Ã© necessÃ¡rio observar a componente de velocidade na direÃ§Ã£o entre o observador e a fonte:

%% \begin{equation}\label{eq:ffDoppler}
%%     F_i=\{f_i\}_0^{\Lambda-1}=\left\{\frac{v_{som} + v_r\frac{y_i}{\sqrt{z_0^2+y_i^2}}}{v_{som}+v_s\frac{y_i}{\sqrt{z_0^2+y_i^2}}}f_0\right\}_0^{\Lambda-1}
%% \end{equation}

%% No ApÃªndice~\ref{sec:cod2} estÃ¡ uma implementaÃ§Ã£o em Python do efeito Doppler como descrito acima, com as alteraÃ§Ãµes de frequÃªncia e amplitude, e com o cruzamento da fonte com o receptor.

%% \subsubsection{Filtragens e ruÃ­dos (subseÃ§Ãµes~\ref{subsec:ruidos} e~\ref{subsec:filtros})}
%% Com os filtros as possibilidades explodem ainda mais vertiginosamente. Pode-se convoluir um sinal para reverberÃ¡-lo, para
%% remover algum ruÃ­do, para gerar distorÃ§Ãµes ou para tratamento com intuito estÃ©tico mesmo. Por exemplo,
%% a aplicaÃ§Ã£o de um filtro passa banda em que deixa passar somente entre $1kHz$ e $3kHz$, resulta em sons
%% que parecem de telefone ou de televisÃ£o antiga. Ao remover com alguma precisÃ£o somente
%% a frequÃªncia de oscilaÃ§Ã£o da rede elÃ©trica (usualmente $50Hz$ ou $60Hz$) e harmÃ´nicas, pode-se remover
%% ruÃ­dos introduzidos por equipamentos de Ã¡udio.
%% Um uso mais incrementado
%% e propriamente musical Ã© realizar filtragens em bandas especÃ­ficas e usar estas bandas
%% prÃ©-estabelecidas como um parÃ¢metro adicional das notas.

%% Inspirado nos instrumentos tradicionais, pode-se aplicar uma a filtragem dependente do tempo~\cite{Roederer}.
%% Cascatas
%% destes filtros podem realizar filtragens complexas e mais precisas. A montagem \emph{Ruidosa faixa} explora
%% este recursos, realizando filtragens em ruÃ­dos diversos e sÃ­ntese de ruÃ­dos diversos. O cÃ³digo da peÃ§a estÃ¡ no ApÃªndice~\ref{ap:ruidosa} e disponÃ­vel online como parte da \massa.

%% Estes recursos utilizados em conjunto podem incidir na realizaÃ§Ã£o de um efeito chamado \emph{chorus}. A
%% exemplo do que ocorre com um coro de cantores, neste efeito o som Ã© realizado com diversas pequenas modificaÃ§Ãµes,
%% potencialmente aleatÃ³rias, em parÃ¢metros como frequÃªncia central, presenÃ§a (ou ausÃªncia) de vibrato
%% e tremolo e suas caracterÃ­sticas, equalizaÃ§Ãµes, volume etc. Para o resultado final, estas versÃµes do som
%% inicial sÃ£o entÃ£o mixadas (ver equaÃ§Ã£o \ref{eq:mixagem}). A peÃ§a \emph{Chorus infantil} realiza chorus de formas
%% diferentes em sons diferentes e seu cÃ³digo estÃ¡ no ApÃªndice~\ref{ap:chorus}. A \emph{toolbox} \massa\ disponibiliza online este \emph{script}.

%% \subsubsection{ReverberaÃ§Ã£o}\label{subsubsec:reverb}
%% Com a mesma nomenclatura da subseÃ§Ã£o~\ref{subsec:spac} sobre espacializaÃ§Ã£o, a reverberaÃ§Ã£o tardia pode ser modelada como a convoluÃ§Ã£o com um trecho de ruÃ­do colorido rosa, marrom ou preto, em decaimento exponencial de amplitude com relaÃ§Ã£o tambÃ©m ao tempo. Assim, a atenuaÃ§Ã£o nos agudos e irregularidade suave na resposta em frequÃªncia sÃ£o contempladas de forma bastante satisfatÃ³ria.\cite{JOSPhy,guillaume} Linhas de atrasos podem ser adicionadas como prefixo ao ruÃ­do com o decaimento, assim contemplado as duas partes temporais da reverberaÃ§Ã£o: as primeiras reflexÃµes e a reverberaÃ§Ã£o tardia. Pode-se, para melhora de qualidade, calcular geometricamente a localizaÃ§Ã£o da Ãºltima superfÃ­cie em que cada frente de onda refletiu antes de chegar ao ouvido nos primeiros $100-200$ milissegundos e aplicar um filtro passa-baixas como em~\ref{subsec:filtros}. O ruÃ­do colorido pode ser introduzido gradualmente, desde o instante inicial dado pela incidÃªncia direta (i.e. sem reflexÃ£o alguma e dada pela DTI e DII), em \emph{fade-in}, atingindo o mÃ¡ximo no comeÃ§o da 'reverberaÃ§Ã£o tardia', quando as incidÃªncias geomÃ©tricas perdem sua importÃ¢ncia para as estatÃ­sticas do ruÃ­do em decaimento.

%% Como um exemplo de implementaÃ§Ã£o, seja $\Delta_1$ a duraÃ§Ã£o do primeiro perÃ­odo e $\Delta_R$ a duraÃ§Ã£o total da reverberaÃ§Ã£o ($\Lambda_1=\Delta_1 f_a$, $\Lambda_R=\Delta_R f_a$). Pode-se
%% associar uma probabilidade $p_i$ de uma reincidÃªncia do som na $i$-Ã©sima amostra com amplitude em decaimento exponencial. Seguindo
%% as indicaÃ§Ãµes na subseÃ§Ã£o~\ref{subsec:spac}, a reverberaÃ§Ã£o $R_i^1$ do primeiro perÃ­odo pode ser descrita desta forma:

%% \begin{equation}\label{eq:p1rev}
%%     R_i^1=\left\{r_i^1\right\}_0^{\Lambda_1-1}\;:\;r_i^1=\left\{
%%         \begin{array}{l l}
%%             10^{\frac{V_{dB}}{20}\frac{i}{\Lambda_R-1}}\;  & \text{com probabilidade}\quad p_i=\left(\frac{i}{\Lambda_1}\right)^2 \\
%%                                      0 \; & \text{com probabilidade}\quad 1-p_i \\
%%         \end{array} \right.
%% \end{equation}

%% Onde $V_{dB}$ Ã© o decaimento total considerado em decibels, tipicamente $-80dB$ ou $-120dB$.   JÃ¡ a reverberaÃ§Ã£o $R_i^2$, do segundo perÃ­odo, pode ser emulada por um ruÃ­do marrom $R_i^m$ (ou rosa $R_i^r$) em decaimento exponencial: 

%% \begin{equation}\label{eq:p2rev}
%%     R_i^2=\left\{r_i^2\right\}_{\Lambda_1}^{\Lambda_R-1}=\left\{10^{\frac{V_{dB}}{20}\frac{i}{\Lambda_R-1}}\,.\,r_i^m\right\}_{\Lambda_1}^{\Lambda_R-1}
%% \end{equation}

%% Como:
%% \begin{equation}\label{eq:rev}
%%     R_i=\left\{r_i\right\}_0^{\Lambda_R-1}\;:\;r_i=\left\{
%%         \begin{array}{l l}
%%             1\; & \text{se }\quad i=0 \\
%%             r_i^1\;  & \text{se }\quad 1\leq i<\Lambda_1-1 \\
%%                                      r_i^2 \; & \text{se}\quad \Lambda_1 \leq i < \Lambda_R-1 \\
%%         \end{array} \right.
%% \end{equation}

%% a aplicaÃ§Ã£o da reverberaÃ§Ã£o representada por $R_i$ Ã© a simples convoluÃ§Ã£o de $R_i$ (chamada 'resposta ao impulso' da reverberaÃ§Ã£o) com a sequÃªncia sonora $T_i$, tal como descrito na subseÃ§Ã£o~\ref{subsec:filtros}.

%% A reverberaÃ§Ã£o Ã© conhecida por causar bastante interesse no ouvinte e tornar as sonoridades mais agradÃ¡veis. AlÃ©m disso, a modificaÃ§Ã£o do espaÃ§o em que sÃ£o reverberadas a mÃºsica, ou as sonoridades individualmente, constitui um macete (quase um clichÃª) para causar surpresa e interesse no ouvinte. 



%% \subsubsection{EnvoltÃ³ria ADSR}
%% A variaÃ§Ã£o de volume no decorrer de um som Ã© crucial para nossa percepÃ§Ã£o de timbre. A envoltÃ³ria de volume chamada ADSR (sigla de \emph{Atack-Decay-Sustain-Release}) possui numerosas implementaÃ§Ãµes em sintetizadores em hardware e software. Uma implementaÃ§Ã£o pioneira pode ser encontrada no Hammond Novachord de 1938 e algumas variantes sÃ£o citadas logo abaixo.\cite{ADSR}

%% A envoltÃ³ria ADSR escolÃ¡stica Ã© caracterizada por 4 parÃ¢metros: duraÃ§Ã£o do ataque (tempo que o som demora para atingir seu volume mÃ¡ximo), duraÃ§Ã£o do decaimento (segue ao ataque imediatamente), nÃ­vel de volume de sustentaÃ§Ã£o (em que o volume fica estÃ¡vel apÃ³s o decaimento) e duraÃ§Ã£o de soltura (apÃ³s a sustentaÃ§Ã£o, nesta duraÃ§Ã£o o volume decai a zero).
%% Note que o tempo de sustentaÃ§Ã£o nÃ£o Ã© especificado, pois Ã© resultante da duraÃ§Ã£o em si menos os tempos de ataque, decaimento e soltura.

%% A aplicaÃ§Ã£o da envoltÃ³ria ADSR com duraÃ§Ãµes $\Delta_A$, $\Delta_D$ e $\Delta_R$, duraÃ§Ã£o total $\Delta$ e nÃ­vel de sustentaÃ§Ã£o $a_S$, dado
%% como fraÃ§Ã£o da amplitude mÃ¡xima, em uma sequÃªncia sonora $t_i$ qualquer, pode ser feita da seguinte forma:

%% \begin{equation}\label{eq:adsr}
%% \begin{split}
%% \{a_i\}_0^{\Lambda_A-1} & = \left\{\xi\left(\frac{1}{\xi}\right)^{\frac{i}{\Lambda_A-1}}\right\}_0^{\Lambda_A-1} \;\;\quad\quad\quad \text{ou} \;\;\quad \left\{\frac{i}{\Lambda_A-1}\right\}_0^{\Lambda_A}\\
%% \{a_i\}_{\Lambda_A}^{\Lambda_A+\Lambda_D-1} & =\left\{a_S^{\frac{i-\Lambda_A}{\Lambda_D-1}}  \right\}_{\Lambda_A}^{\Lambda_A+\Lambda_D-1} \;\;\quad \quad\quad \text{ou} \quad\;\; \left\{1-(1-a_S)\frac{i-\Lambda_A}{\Lambda_D-1}\right\}_{\Lambda_A}^{\Lambda_A+\Lambda_D-1}\\
%% \{ a_i \}_{\Lambda_A+\Lambda_D}^{\Lambda-\Lambda_R-1} & =\left\{ a_S \right\}_{\Lambda_A+\Lambda_D}^{\Lambda-\Lambda_R-1} \\
%% \{ a_i \}_{\Lambda-\Lambda_R}^{\Lambda-1} & =\left\{ a_S\left(\frac{\xi}{a_S} \right)^{\frac{i-(\Lambda-\Lambda_R)}{\Lambda_R-1}} \right\}_{\Lambda-\Lambda_R}^{\Lambda-1} \quad\;\; \text{ou} \quad\;\; \left\{ a_S - a_S\frac{i+\Lambda_R-\Lambda}{\Lambda_R-1}\right\}_{\Lambda-\Lambda_R}^{\Lambda-1} 
%% \end{split}
%% \end{equation}

%% Com $\Lambda_X=\lfloor \Delta . f_a \rfloor\;\;\forall\;\; X \; \in (A,D,R,\;)$ e $\xi$ um valor pequeno que torne o \emph{fade in} e o \emph{fade out} satisfatÃ³rios, e.g. $\xi=10^{\frac{-80}{20}}=10^{-4}\;$ ou $\;\xi=10^{\frac{-40}{20}}=10^{-2}$. Quanto menor for $\xi$ mais lento Ã© o \emph{fade}, a exemplo de $\alpha$ da figura~\ref{fig:transicao}. JÃ¡ os termos do lado direito de~\ref{eq:adsr} podem realizar as entrada e saÃ­da do som a partir da intensidade zero, por serem lineares. 
%% Esquematicamente, a figura~\ref{fig:adsr} mostra esta envoltÃ³ria ADSR, 
%% uma implementaÃ§Ã£o clÃ¡ssica que comporta variaÃ§Ãµes diversas. Por exemplo,
%% entre o ataque e o decaimento, pode-se adicionar uma partiÃ§Ã£o adicional em que a amplitude
%% mÃ¡xima perdura. Outro exemplo comum Ã© o uso de traÃ§ados mais elaborados para o
%% ataque ou para o decaimento. A montagem musical \emph{ADa e SaRa}, disponÃ­vel no ApÃªndice~\ref{ap:ada}
%% e na \massa, explora diversas destas configuraÃ§Ãµes da envoltÃ³ria ADSR


%% \begin{equation}\label{eq:adsrApl}
%% \left\{t_i^{ADSR}\right\}_0^{\Lambda-1} =\{t_i . a_i\}_0^{\Lambda-1}
%% \end{equation}

%% \begin{figure}[htpq!]
%%     \centering
%%         \includegraphics[width=\textwidth]{figuras/adsr}
%%     \caption{EnvoltÃ³ria ADSR (\emph{Attack, Decay, Sustain, Release}) e uma sequÃªncia sonora arbitrÃ¡ria submetida Ã  envoltÃ³ria. A variaÃ§Ã£o linear de amplitude estÃ¡ acima. Abaixo a variaÃ§Ã£o de amplitude Ã© exponencial.}
%%         \label{fig:adsr}
%% \end{figure}


%% \afterpage{\blankpage}

%% \clearpage
%% \section{OrganizaÃ§Ã£o de notas em mÃºsica}\label{notasMusica}
%% Seja $ S_j=\left\{  s_j=T_i^j=\{t_i^j\}_{i=0}^{\Lambda_j-1} \right\}_{j=0}^{H-1} $ uma sequÃªncia $S_j$ de $H$ eventos
%% musicais $s_j$. Seja $S_j$ chamada uma 'estrutura musical' composta de eventos $s_j$ que sÃ£o tambÃ©m estruturas musicais,
%% p.ex. notas.
%% Esta seÃ§Ã£o Ã© dedicada Ã s tÃ©cnicas que tornam $S_j$ interessante e agradÃ¡vel na audiÃ§Ã£o.

%% Os elementos de $S_j$ podem ser sobrepostos por mixagem, como na equaÃ§Ã£o~\ref{eq:mixagem} e figura~\ref{fig:mixagem}, formando intervalos e acordes. Este Ã© o 'pensamento vertical' da mÃºsica. A concatenaÃ§Ã£o de $S_j$, como na equaÃ§Ã£o~\ref{eq:concatenacao} e na figura~\ref{fig:concatenacao}, forma sequÃªncias melÃ³dicas e ritmos, associados ao 'pensamento horizontal' na mÃºsica. A frequÃªncia fundamental $f$ e o momento de inÃ­cio (ataque) sÃ£o, em geral, as caracterÃ­sticas mais importantes dos elementos de $S_j$. Estas viabilizam mÃºsicas de alturas (harmonia e melodia) e a presenÃ§a da mÃ©trica temporal e ritmos, respectivamente.



%% \subsection{AfinaÃ§Ã£o, intervalos, escalas e acordes}\label{subsec:afinacao}
%% \subsubsection{AfinaÃ§Ã£o}
%% O dobro da frequÃªncia Ã© uma oitava ascendente ($f=2f_0$).
%% A divisÃ£o da oitava em doze notas Ã© o cÃ¢none da mÃºsica ocidental clÃ¡ssica,
%% alÃ©m de usos cerimoniais/religiosos e Ã©tnicos observados fora da tradiÃ§Ã£o ocidental.\cite{Wisnick}
%% Doze semitons equidistantes para o ouvido formam uma oitava,
%% portanto, se $f=2^{\frac{1}{12}}f_0$, hÃ¡ um semitom entre $f_0$
%% e $f$.
%% O fator $\varepsilon=2^{\frac{1}{12}}$, um semitom, forma uma grade de notas
%% no espectro audÃ­vel. Fixada uma frequÃªncia $f$, as frequÃªncias fundamentais possÃ­veis
%% estÃ£o separadas por intervalos mÃºltiplos de $\varepsilon$.
%% Esta precisÃ£o absoluta Ã© caracterÃ­stica de implementaÃ§Ãµes
%% computacionais, os instrumentos reais possuem desvios destas frequÃªncias para melhor compatibilizar os harmÃ´nicos
%% de suas notas. AlÃ©m disso, a referÃªncia fixa $\varepsilon=2^{\frac{1}{12}}$ caracteriza
%% a afinaÃ§Ã£o de temperamento por igual. HÃ¡ afinaÃ§Ãµes com intervalos propostos como razÃµes de inteiros de baixa ordem, com
%% fruto da observaÃ§Ã£o de comportamentos fÃ­sicos.  As primeiras destas afinaÃ§Ãµes foram formalizadas por volta de 2 mil anos antes do advento do temperamento por igual.\cite{Roederer}

%% Duas afinaÃ§Ãµes emblemÃ¡ticas sÃ£o:
%% \begin{itemize}
%%     \item A {\bf intonaÃ§Ã£o justa} consiste em notas da escala diatÃ´nica associadas a razÃµes de inteiros de pequena ordem como apontados pela sÃ©rie harmÃ´nica. As razÃµes bÃ¡sicas estÃ£o contidas no modo jÃ´nico (dÃ³ a dÃ³ nas teclas brancas do piano, veja abaixo na subseÃ§Ã£o~\ref{subsec:escalas}): 1, 9/8, 5/4, 4/3, 3/2, 5/3, 15/8, 2/1. Os intervalos sÃ£o considerados com relaÃ§Ã£o Ã s notas das escala e sÃ£o usados o semitom 16/15, o 'tom menor' 10/9 e o 'tom maior' 9/8. HÃ¡ diferentes formas de realizar uma divisÃ£o de 12 notas.
%%     \item A {\bf afinaÃ§Ã£o pitagÃ³rica} baseia-se no intervalo 3/2 (quinta justa). O modo jÃ´nico fica: 1, 9/8, 81/64, 4/3, 3/2, 27/16, 243/128, 2/1. Os intervalos sÃ£o tambÃ©m considerados com relaÃ§Ã£o Ã s notas da escala. AlÃ©m dos intervalos do modo, sÃ£o usados a segunda menor 256/243, a terÃ§a menor 32/27, a quarta aumentada 729/512, a quinta diminuta 1024/729, a sexta menor 128/81 e a sÃ©tima menor 16/9. 
%% \end{itemize}

%% Para a realizaÃ§Ã£o de microtonalidade\footnote{O uso de
%% intervalos menores que o semitom Ã© chamado microtonalidade e tem usos
%% ornamentais e estruturantes da mÃºsica. A
%% divisÃ£o da oitava em $12$ notas possui fundamentos fÃ­sicos mas
%% nÃ£o deixa de ser uma \emph{convenÃ§Ã£o}
%% adotada inclusive pela mÃºsica erudita clÃ¡ssica de origem europeia. Outras afinaÃ§Ãµes
%% sÃ£o incidentes. Para citar somente um exemplo, a
%% mÃºsica tradicional tailandesa utiliza uma divisÃ£o da oitava em sete notas igualmente
%% espaÃ§adas ($\varepsilon=2^{\frac{1}{7}}$),
%% resultando em intervalos que pouco se assemelham aos intervalos na
%% divisÃ£o de doze notas.\cite{Wisnick}},
%% pode-se usar reais nÃ£o inteiros
%% para a sequÃªncia de alturas, ou modificar o fator $\varepsilon=2^{\frac{1}{12}}$
%% e continuar usando inteiros. Por exemplo, uma afinaÃ§Ã£o
%% bastante prÃ³xima da sÃ©rie harmÃ´nica em si
%% Ã© proposta na forma da divisÃ£o da oitava em $53$ notas:
%% $\varepsilon_2=2^{\frac{1}{53}}$.\cite{microtonalidade}
%% As notas nesta divisÃ£o da oitava em $53$ notas se relacionam por inteiros
%% com $\varepsilon_2$.
%% Note que se $S_i$ Ã© uma sequÃªncia de alturas relacionadas por $\varepsilon_1$,
%% um mapeamento para notas relacionadas por $\varepsilon_2$
%% constitui uma nova sequÃªncia $S_i'=\left\{s_i'\right\}=\left\{ s_i \frac{\varepsilon_1}{\varepsilon_2}\right\}$. A montagem musical \emph{Micro tom} explora recursos microtonais e seu cÃ³digo estÃ¡ no ApÃªndice~\ref{ap:micro}, assim como na \massa\ online.



%% \subsubsection{Intervalos}\label{subsec:intervalos}
%% Em proporÃ§Ãµes de $\varepsilon=2^{\frac{1}{12}}$ entre as frequÃªncias das notas (i.e. um semitom), os intervalos do sistema de 12 notas sÃ£o representados por inteiros. A tabela~\ref{eq:intervalos} resume as caracterÃ­sticas de cada intervalo: sua nomenclatura tradicional, caracterÃ­sticas de consonÃ¢ncia e dissonÃ¢ncia e nÃºmero de semitons de cada um.

%% \begin{table}[htpq!]
%% \centering
%% \caption{Intervalos musicais, suas notaÃ§Ãµes tradicionais, classificaÃ§Ãµes bÃ¡sicas de dissonÃ¢ncia e nÃºmero de semitons.
%% As consonÃ¢ncias perfeitas sÃ£o os unÃ­ssonos, as quintas e as oitavas justas (J). As consonÃ¢ncias imperfeitas sÃ£o
%% as terÃ§as e as sextas maiores (M) e menores (m). As dissonÃ¢ncias fortes sÃ£o as segundas menores e sÃ©timas maiores. As dissonÃ¢ncias
%% brandas sÃ£o as segundas maiores e as sÃ©timas menores. O primeiro caso especial consiste na quarta justa, que Ã© consonante perfeita
%% se considerada uma inversÃ£o da quinta justa, caso contrÃ¡rio pode ser considerada uma dissonÃ¢ncia ou uma consonÃ¢ncia imperfeita. O segundo caso especial Ã© o trÃ­tono (4aum, 5dim, tri). Este Ã© consonante em algumas culturas. JÃ¡ para a mÃºsica tonal, o trÃ­tono indica dominante e busca sua resoluÃ§Ã£o em uma terÃ§a ou sexta e, por esta instabilidade, Ã© considerado intervalo dissonante.}
%% \begin{tabular}{| c | c | c | }\hline
%%     \multicolumn{3}{|c|}{\bf consonÃ¢ncias}  \\\hline
%%    & notaÃ§Ã£o tradicional & nÃºmero de semitons \\
%%    perfeitas: & 1J, 5J, 8J & 0, 7, 12 \\
%%  imperfeitas: & 3m, 3M, 6m, 6M & 3, 4, 8, 9 \\\hline\hline
%%     \multicolumn{3}{|c|}{\bf dissonÃ¢ncias} \\\hline
%%  & notaÃ§Ã£o tradicional & nÃºmero de semitons \\
%%  fortes: & 2m, 7M & 1, 11 \\
%%  brandas: & 2M, 7m & 2, 10 \\\hline\hline
%%     \multicolumn{3}{|c|}{\bf casos especiais} \\\hline
%%  & notaÃ§Ã£o tradicional & nÃºmero de semitons \\
%%  consonante ou dissonante: & 4J & 5 \\
%%  dissonante na tradiÃ§Ã£o ocidental: & trÃ­tono, 4aum, 5dim & 6 \\\hline
%% \end{tabular}\label{eq:intervalos}
%% \end{table}


%% A nomenclatura, com base em imposiÃ§Ãµes e conveniÃªncias do sistema tonal, e de aspectos prÃ¡ticos da manipulaÃ§Ã£o de notas, pode ser especificada assim:\cite{Roederer,Wisnick}
%% \begin{itemize}
%%         \item Intervalos por nÃºmero de grados entre as notas: primeira (unÃ­ssono), segunda, terÃ§a, quarta, quinta, sexta, sÃ©tima, oitava. Nona, dÃ©cima, dÃ©cima primeira, etc, sÃ£o os intervalos compostos, de uma ou mais oitavas + um intervalo dentro da oitava, que caracteriza o intervalo composto. Os intervalos sÃ£o representados pelos dÃ­gitos numÃ©ricos, e.g. 1, 3, 5 Ã© um unÃ­ssono, uma terÃ§a e uma quinta.
%%         \item Qualidades de cada intervalo: as consonÃ¢ncias perfeitas - i.e. unÃ­ssono, quarta, quinta e oitava - sÃ£o 'justas'. As consonÃ¢ncias imperfeitas - i.e. terÃ§as e sextas - e as dissonÃ¢ncias - i.e. segundas e sÃ©timas - podem ser maiores ou menores. ExceÃ§Ã£o para o trÃ­tono.
%%         \item A quarta justa Ã© tida como consonante perfeita ou dissonante de acordo com o contexto e arcabouÃ§o teÃ³rico. Como regra geral, pode ser considerada consonante salvo casos em que Ã© usada de passagem para uma quinta ou terÃ§a como resoluÃ§Ã£o.
%%         \item O trÃ­tono Ã© dissonante na mÃºsica ocidental por caracterizar a "dominante" no sistema tonal (veja abaixo na subseÃ§Ã£o~\ref{subsec:harmonia}) e representar instabilidade. Algumas culturas entoam o intervalo como consonante.
%%         \item Um intervalo maior, decrescido de um semitom, resulta em um intervalo menor. Um intervalo menor, acrescido de um semitom, resulta em um intervalo maior.
%%         \item Um intervalo justo (unÃ­ssono, quarta justa, quinta justa, oitava justa), ou um intervalo maior (segunda maior 2M, terÃ§a maior 3M, sexta maior 6M ou sÃ©tima maior 7M), acrescido de um semitom, resulta em um intervalo aumentado (p.ex. terÃ§a aumentada 3aum com cinco semitons). A quarta aumentada Ã© tambÃ©m chamada de trÃ­tono (4aum ~ tri).
%%         \item Um intervalo justo, ou um intervalo menor (segunda menor 2m, terÃ§a menor 3m, sexta menor 6m ou sÃ©tima menor 7m), decrescido de um semitom, resulta em um intervalo diminuto. A quinta diminuta Ã© tambÃ©m chamada de trÃ­tono (5dim ~ tri).
%%         \item Um intervalo aumentado, acrescido de um semitom, resulta em um intervalo 'mais que aumentado' e um intervalo diminuto, decrescido de um semitom, resulta em um intervalo 'mais que diminuto'.
%%         \item Caso as notas soem simultaneamente, o intervalo Ã© harmÃ´nico.
%%         \item Caso as notas soem em sequÃªncia no tempo, o intervalo Ã© melÃ³dico. A ordem das notas, primeiro a nota mais grave ou a mais aguda, resulta em um intervalo ascendente ou descendente, respectivamente. 
%%         \item Passada a nota mais grave para a oitava acima, ou a nota mais aguda uma oitava para baixo, o intervalo Ã© invertido. Um intervalo, somado Ã  sua inversÃ£o, resulta 9 (7m inverte para 2M: $7m+2M=9-$). Um intervalo maior invertido resulta em um intervalo menor e vice-versa. Um intervalo aumentado invertido resulta diminuto e vice-versa, assim como o mais que aumentado resulta em mais que diminuto e vice-versa. Um intervalo justo invertido resulta igualmente justo.
%%         \item Um intervalo maior que a oitava Ã© dito 'intervalo composto' e Ã© classificado como o intervalo entre as mesmas notas, mas na mesma oitava. SÃ£o tambÃ©m especificados por 7 acrescido deste intervalo: 11J Ã© uma oitava mais uma quarta (7+4J==11J), 9M Ã© uma oitava mais uma segunda maior (7+2M=9M).
%% \end{itemize}

%% Os intervalos aumentados/diminutos e mais que aumentados/diminutos sÃ£o consequÃªncias do sistema tonal. Os graus da escala (veja abaixo na subseÃ§Ã£o~\ref{subsec:escalas}) sÃ£o realmente notas diferentes, com funÃ§Ãµes e usos especÃ­ficos. Assim, em uma escala de dÃ³ bemol maior, a tÃ´nica - primeiro grau - Ã© dÃ³ bemol, nÃ£o si, e a sensÃ­vel - sÃ©timo grau - Ã© si bemol, nÃ£o lÃ¡ sustenido ou dÃ³ duplo bemol. De forma semelhante, o segundo grau de uma escala pode estar a um semitom do primeiro grau, assim como a sensÃ­vel (sÃ©timo grau a um semitom ascendente do primeiro grau), momento no qual hÃ¡ uma terÃ§a diminuta entre os dois semitons do sÃ©timo e segundo grau da escala pois o primeiro grau estÃ¡ entre os dois graus prÃ³ximos a ele: segundo e sensÃ­vel.\cite{Lacerda}

%% Esta descriÃ§Ã£o resume a teoria tradicional dos intervalos musicais.\cite{Lacerda} A montagem \emph{Intervalos entre alturas} explora estes intervalos de formas isoladas e diversas. O cÃ³digo estÃ¡ no ApÃªndice~\ref{ap:intervalos} e disponÃ­vel online com a \emph{toolbox} \massa.\cite{MASSA}


%% \subsubsection{Escalas}\label{subsec:escalas}
%% Uma escala Ã© um conjunto ordenado de alturas. Usualmente, as escalas se repetem
%% a cada oitava. A sequÃªncia ascendente com todas as notas da divisÃ£o da oitava em 12 intervalos iguais,
%% separados pela razÃ£o $\varepsilon=2^{\frac{1}{12}}$, Ã© a escala cromÃ¡tica de temperamento por igual. HÃ¡ 5 divisÃµes perfeitamente simÃ©tricas da oitava dentro da escala cromÃ¡tica. Estas divisÃµes sÃ£o consideradas
%% escalas pelos usos fÃ¡ceis e peculiares que disso provÃ©m. Como inteiros aos quais $\varepsilon=2^{\frac{1}{12}}$ Ã© elevado
%% para multiplicar $f_0$, as escalas sÃ£o:

%% \begin{equation}\label{escSim}
%% \begin{split}
%% \text{cromÃ¡tica} & = E_i^c = \{e_i^c\}_0^{11} =  \{0,1,2,3,4,5,6,7,8,9,10,11\} = \{i\}_0^{11}\\
%% \text{tons inteiros} & = E_i^t = \{e_i^t\}_0^{5} = \{0,2,4,6,8,10\} = \{2.i\}_0^{5} \\
%% \text{terÃ§as menores} & = E_i^{tm} = \{e_i^{tm}\}_0^{3} = \{0,3,6,9\} = \{3.i\}_0^3 \\
%% \text{terÃ§as maiores} & = E_i^{tM} = \{e_i^{tM}\}_0^{2} = \{0,4,8\} = \{4.i\}_0^2\\
%% \text{trÃ­tonos} & = E_i^{tt} = \{e_i^{tt}\}_0^{1} = \{ 0, 6 \} = \{6.i\}_0^1
%% \end{split}
%% \end{equation}

%% Assim, a terceira nota da escala em tons inteiros com $f_0=200Hz$
%% Ã© $f_3=\varepsilon^{e_3^t} . f_0 = 2^{\frac{6}{12}} . 200 \approxeq 282.843 Hz$. Estas
%% 'escalas' ou padrÃµes geram estruturas estÃ¡veis pelas simetrias internas, e podem ser
%% repetidas de forma eficiente e sustentada. Abaixo, na seÃ§Ã£o~\ref{estCic}, serÃ¡ retomado o assunto das simetrias. A montagem \emph{Cristais} expÃµe cada uma destas escalas tanto melÃ³dica quanto harmonicamente e seu cÃ³digo estÃ¡ no ApÃªndice~\ref{ap:cristais}. Como parte da \massa, este cÃ³digo Ã© disponibilizado online.

%% As escalas diatÃ´nicas:

%% \begin{equation}\label{eq:escalas}
%% \begin{split}
%% \text{menor natural} = \text{modo eÃ³lico} & = E_i^m = \{e_i^m\}_0^6 = \{0,2,3,5,7,8,10\} \\
%% \text{modo lÃ³crio} & = E_i^{mlo} = \{e_i^{mlo}\}_0^6 = \{0,1,3,5,6,8,10\} \\ 
%% \text{maior}  = \text{modo jÃ´nico} & = E_i^M = \{e_i^M\}_0^6 = \{0,2,4,5,7,9,11\} \\
%% \text{modo dÃ³rico} & = E_i^{md} = \{e_i^{md}\}_0^6 = \{0,2,3,5,7,9,10\} \\
%% \text{modo frÃ­gio} & = E_i^{mf} = \{e_i^{mf}\}_0^6 = \{0,1,3,5,7,8,10\} \\
%% \text{modo lÃ­dio} & = E_i^{ml}=\{e_i^{ml}\}_0^6 = \{0,2,4,6,7,9,11\} \\
%% \text{modo mixolÃ­dio} & = E_i^{mmi} = \{e_i^{mmi}\}_0^6 = \{0,2,4,5,7,9,10\}
%% \end{split}
%% \end{equation}

%% possuem apenas intervalos maiores, menores e justos. Ãnica exceÃ§Ã£o para o trÃ­tono, que se apresenta como quarta aumenta ou quinta diminuta.

%% Todas as escalas diatÃ´nicas
%% seguem o padrÃ£o de intervalos sucessivos
%% tom, tom, semitom, tom, tom, tom, semitom, e
%% pode-se escrever:
%% \begin{equation}\label{eq:relacaoDia}
%% \begin{split}
%% \{d_i\} & =\{2,2,1,2,2,2,1\} \\
%% e_0 & =0 \\
%% e_i & =d_{(i+\kappa)\%7}+e_{i-1} \quad para \;\;  i > 0
%% \end{split}
%% \end{equation}

%% Com $\kappa \in \mathbb{N}$. Para cada
%% modo, hÃ¡ um Ãºnico valor de $\kappa \in [0,6]$.
%% Por exemplo, uma breve
%% inspeÃ§Ã£o revela que $e_i^{ml}=d_{(i+2)\%7}+e_{i-1}^{ml}$. Portanto, $\kappa=2$
%% para o modo lÃ­dio. 

%% A escala menor possui duas formas adicionais, melÃ³dica e harmÃ´nica:

%% \begin{equation}\label{eq:escalasMenores}
%% \begin{split}
%% \text{menor natural (igual acima)} & = E_i^m = \{e_i^m\}_0^6 = \{0,2,3,5,7,8,10\} \\
%% \text{menor harmÃ´nica} & = E_i^{mh} = \{e_i^{mh}\}_0^6 = \{0,2,3,5,7,8,11\} \\
%% \text{menor melÃ³dica} & = E_i^{mm} = \{e_i^{mm}\}_0^{14} = \{0,2,3,5,7,9,11,12,10,8,7,5,3,2,0\} \\
%% \end{split}
%% \end{equation}

%% O traÃ§ado ascendente e descendente da escala menor melÃ³dica Ã© necessÃ¡rio para a presenÃ§a da sensÃ­vel (sÃ©timo e Ãºltimo grau, separado por um semitom da oitava, realÃ§a a polarizaÃ§Ã£o na tÃ´nica) no trajeto ascendente, o que nÃ£o Ã© necessÃ¡rio quando descende, retomando a forma natural. JÃ¡ a escala harmÃ´nica apresenta a sensÃ­vel, mas nÃ£o evita o intervalo de segunda aumentada entre o sexto e sÃ©timo graus, pois nÃ£o precisa contemplar trajetÃ³ria melÃ³dica, apenas apresentar a sensÃ­vel tÃ£o cara ao sistema tonal (a sensÃ­vel tende Ã  tÃ´nica, afirmando-a).\cite{Harmonia}
%% Outras escalas podem ser representadas da mesma forma, como as pentatÃ´nicas e os modos de transposiÃ§Ã£o limitados de Messiaen.\cite{Messiaen}

%% \subsubsection{Acordes}\label{subsec:acordes}
%% A ocorrÃªncia simultÃ¢nea de notas Ã© observada atravÃ©s dos acordes. Destes, a base na mÃºsica tonal sÃ£o as trÃ­ades. Estas constituem-se de duas terÃ§as sucessivas, em 3 notas: fundamental, terÃ§a e quinta. Um acorde invertido Ã© aquele que apresenta no grave outra nota que nÃ£o a fundamental. A posiÃ§Ã£o fechada Ã© aquela em que nÃ£o cabe nota alguma do acorde entre quaisquer duas notas consecutivas.\cite{Lacerda}
%% As trÃ­ades, sem inversÃ£o, na forma fechada e com a fundamental em $0$, sÃ£o:

%% \begin{equation}\label{triades}
%% \begin{split}
%% \text{trÃ­ade maior} = A_i^M= \{a_i^M\}_0^2=\{0,4,7\} \\ 
%% \text{trÃ­ade menor} = A_i^m = \{a_i^m\}_0^2=\{0,3,7\} \\
%% \text{trÃ­ade diminuta} = A_i^d = \{a_i^d\}_0^2=\{0,3,6\} \\
%% \text{trÃ­ade aumentada} = A_i^a = \{a_i^a\}_0^2=\{0,4,8\}
%% \end{split}
%% \end{equation}

%% Para considerar outra terÃ§a sobreposta Ã  quinta, basta acrescentar $10$ ao final para a tÃ©trade
%% com sÃ©tima menor ou $11$ para a tÃ©trade com sÃ©tima maior. As inversÃµes e posiÃ§Ãµes abertas
%% podem ser obtidas com a adiÃ§Ã£o seletiva de $12$ Ã s componentes.

%% Acordes triÃ¡dicos incompletos, com notas adicionais (acordes 'sujos'), e nÃ£o triÃ¡dicos sÃ£o comuns.
%% OrientaÃ§Ãµes gerais sÃ£o:
%% \begin{itemize}
%%     \item Uma quinta constitui uma fundamental confirmada pelo intervalo.
%%     \item A terÃ§a maior ou menor aponta a qualidade maior ou menor do acorde.
%%     \item Todo trÃ­tono, especialmente se formado entre uma terÃ§a maior e uma sÃ©tima menor, tende a resolver em uma terÃ§a ou uma sexta.
%%     \item Evita-se a duplicaÃ§Ã£o de nota. Na necessidade de duplicaÃ§Ã£o, a ordem de preferÃªncia Ã©: a fundamental, a quinta, a terÃ§a e a sÃ©tima.
%%     \item Pode-se formar acordes com notas diferentes das triÃ¡dicas, especialmente se dentro de alguma lÃ³gica recorrente ou encadeamento musical que justifique as notas diferentes.
%%     \item Acordes formados por sucessÃµes de intervalos diferentes da terÃ§as, como as quartas ou as segundas, sÃ£o recorrentes dentre composiÃ§Ãµes de tonalismo avanÃ§ado ou experimentais.
%%     \item A repetiÃ§Ã£o de sucessÃµes de acordes (ou suas caracterÃ­sticas) fixa uma trajetÃ³ria pela recorrÃªncia e permite a introduÃ§Ã£o de formaÃ§Ãµes exÃ³ticas sem que haja incoerÃªncia.
%% \end{itemize}


%% \subsection{Harmonias atonal, tonal, expansÃ£o e modulaÃ§Ã£o}\label{subsec:harmonia}
%% A omissÃ£o dos encadeamentos bÃ¡sicos do sistema tonal Ã© chave para a obtenÃ§Ã£o de 
%% harmonias modal e atonal. No caso desta ausÃªncia de estruturas tonais mÃ­nimas,
%% se as notas coincidirem com alguma escala diatÃ´nica (veja as equaÃ§Ãµes ~\ref{eq:escalas})
%% ou forem em nÃºmero pequeno, pode-se dizer que a
%% harmonia Ã© modal. Caso encadeamentos tonais bÃ¡sicos estejam ausentes, as notas nÃ£o coincidam
%% com alguma das escalas diatÃ´nicas e forem diversas e dissonantes (com relaÃ§Ã£o Ã s outras notas) o suficiente para evitar reduÃ§Ã£o por
%% polarizaÃ§Ãµes, a harmonia Ã© atonal.
%% Nesta classificaÃ§Ã£o, a harmonia modal nÃ£o Ã© tonal e nÃ£o Ã© atonal.
%% A harmonia modal estÃ¡ reduzida Ã  incidÃªncia de notas dentro de escalas diatÃ´nicas (ou simplificaÃ§Ãµes) e Ã  ausÃªncia de estruturas tonais.
%% Pode-se perceber, pelo conceito, que a harmonia atonal Ã© difÃ­cil de ser realizada.\cite{harmEXT}

%% \subsubsection{Harmonia atonal}
%% De fato, as tÃ©cnicas de mÃºsica atonal
%% visam estruturas que evitam o vÃ­nculo da audiÃ§Ã£o a modos e relaÃ§Ãµes tonais. A
%% dificuldade Ã© tamanha que o dodecafonismo surgiu. A proposta do dodecafonismo Ã©
%% usar um conjunto de notas, idealmente usa-se as 12 notas, e executar uma a uma destas notas
%% na mesma ordem. Neste contexto, a tÃ´nica fica difÃ­cil de se estabelecer. Mesmo assim, a audiÃ§Ã£o ocidental
%% procura traÃ§os tonais nas mÃºsica e facilmente os encontra por caminhos inesperados e por vezes tortuosos.
%% A utilizaÃ§Ã£o de
%% intervalos dissonantes, especialmente trÃ­tonos sem resoluÃ§Ãµes, nonas, segundas e sÃ©timas, reforÃ§a
%% a ausÃªncia de tonalidade. Neste contexto, para criaÃ§Ã£o da peÃ§a, pode-se:
%% \begin{itemize}
%%     \item Repetir notas. Ao considerar a repetiÃ§Ã£o imediata um prolongamento da incidÃªncia anterior, notas iguais, sem outras notas entre elas, nÃ£o adicionam informaÃ§Ã£o relevante.
%%     \item Soar notas adjacentes ao mesmo tempo, formando intervalos harmÃ´nicos e acordes.
%%     \item Apresentar duraÃ§Ãµes livremente, desde que respeitada a ordem de apariÃ§Ã£o das notas.
%%     \item Para variaÃ§Ã£o, alÃ©m dos recursos de ampliaÃ§Ã£o, transposiÃ§Ã£o e translaÃ§Ã£o, sÃ£o usados o inverso, o retrÃ³grado e o retrÃ³grado do inverso. Veja nas subseÃ§Ãµes~\ref{subsec:motivos} e~\ref{subsec:usosmusicais3} para maiores detalhes.
%%     \item VariaÃ§Ãµes de instrumentaÃ§Ã£o, articulaÃ§Ã£o, espacializaÃ§Ã£o e outras possibilidades de apresentaÃ§Ã£o da estrutura de notas.
%% \end{itemize}

%% A harmonia atonal pode ser observada, de forma paradigmÃ¡tica, dentro destas condiÃ§Ãµes.
%% Vale apontar que boa parte do que escreveram os compositores
%% emblemÃ¡ticos para o dodecafonismo, como Alban Berg e o prÃ³prio Schoenberg, consiste de
%% aplicaÃ§Ãµes parciais e livres destas tÃ©cnicas. VÃ¡rias peÃ§as fazem atÃ© mesmo pontes
%% propositais entre tÃ©cnicas tonais e atonais.

%% \subsubsection{Harmonia tonal}
%% No sÃ©culo XX, mÃºsicas rÃ­tmicas
%% e com Ãªnfase em sonoridades/timbres ampliaram 
%% as concepÃ§Ãµes de tonalidade e harmonia. Ainda assim, a harmonia tonal tem forte presenÃ§a
%% nas vertentes artÃ­sticas e comerciais. Considera-se o prÃ³prio dodecafonismo de natureza
%% tonal pois consiste na negaÃ§Ã£o das caracterÃ­sticas tonais de polarizaÃ§Ã£o.

%% Na mÃºsica tonal ou modal, acordes, como os listados nas equaÃ§Ãµes~\ref{triades}, constituÃ­dos com a fundamental em cada
%% grau de uma escala, como das equaÃ§Ãµes~\ref{eq:escalas}, formam os pilares do campo harmÃ´nico.
%% A observaÃ§Ã£o de progressÃµes incidentes de acordes e regras para encadeamentos Ã© o objeto de estudo da harmonia musical.
%% Mesmo uma melodia monofÃ´nica gera campos harmÃ´nicos e pode-se observar acordes sugeridos por cada passagem.



%% Na 'harmonia tonal tradicional',
%% a escala pode ter como tÃ´nica (primeiro grau da escala) qualquer nota e pode ser maior (com as mesmas notas do modo jÃ´nico) ou menor (as notas do eÃ³lico constituem a escala "menor natural" e esta possui versÃµes harmÃ´nica e melÃ³dica, veja a equaÃ§Ã£o~\ref{eq:escalasMenores}). A escala escolhida Ã©
%% base para trÃ­ades, cada uma com a fundamental em um grau 
%% da escala: $\hat{1},\hat{2},\hat{3},\hat{4},\hat{5},\hat{6},\hat{7}$. Para a formaÃ§Ã£o do acorde, sÃ£o consideradas a terceira nota e a quinta nota acima da fundamental, considerando a prÃ³pria nota como a primeira e utilizando as notas da escala.
%% Pode-se anotar $\hat{1},\hat{3},\hat{5}$ para o acorde do primeiro grau, formado pelo primeiro grau da escala e central para uma mÃºsica tonal. SecundÃ¡rios sÃ£o os acordes do quinto grau $\hat{5},\hat{7},\hat{2}$ ($\hat{7}$ sustenido no caso da escala menor) e do quarto grau $\hat{4},\hat{6},\hat{1}$. Depois sÃ£o considerados os outros graus. A harmonia tradicional consiste em convenÃ§Ãµes e tÃ©cnicas estilÃ­sticas de encadeamento destes acordes, formados em cada grau da escala.\cite{Harmonia}

%% A 'harmonia funcional' atribui funÃ§Ãµes a estes trÃªs acordes centrais e busca compreender seus usos atravÃ©s destas funÃ§Ãµes. O acorde formado sobre o primeiro grau Ã© o acorde de tÃ´nica (T ou t se tÃ´nica maior ou menor) e tem a funÃ§Ã£o de manter um centro, um "chÃ£o" na mÃºsica. O acorde formado sobre o quinto grau Ã© a dominante (D, a dominante Ã© sempre maior) e tem a funÃ§Ã£o de tender Ã  tÃ´nica, direcionar a mÃºsica para ela. A trÃ­ade formada sobre o quarto grau Ã© a subdominante (S ou s se subdominante maior ou menor) e tem a funÃ§Ã£o de distanciar a mÃºsica da tÃ´nica. O sistema se baseia em afirmar a tÃ´nica atravÃ©s de encadeamentos tÃ´nica-dominante-tÃ´nica expandidos com outros acordes das formas mais diversas.

%% A estes trÃªs acordes, sÃ£o associadas as outras trÃ­ades. Na escala maior, a associada relativa (tÃ´nica relativa Tr, subdominante relativa Sr e dominante relativa Dr) Ã© a trÃ­ade formada uma terÃ§a abaixo e a associada anti-relativa (tÃ´nica anti-relativa Ta, subdominante anti-relativa Sa e a dominante anti-relativa Da) Ã© a trÃ­ade formada na terÃ§a acima. Na escala menor ocorre o mesmo, mas a trÃ­ade a uma terÃ§a abaixo Ã© chamada anti-relativa (tA, sA) e a trÃ­ade a uma terÃ§a acima Ã© chamada de relativa (tR, sR). As exatas funÃ§Ãµes e efeitos musicais destes acordes Ã© motivo de bastante controvÃ©rsia. A tabela~\ref{tab:harmonia} mostra a relaÃ§Ã£o entre as trÃ­ades formadas em cada grau da escala maior.

%% \begin{table}[htpq!]
%% \centering
%% \caption{Resumo das funÃ§Ãµes harmÃ´nicas tonais para a escala maior. A tÃ´nica Ã© o centro da mÃºsica, a dominante tende Ã  tÃ´nica e a subdominante se distancia da tÃ´nica. Os trÃªs acordes podem, a princÃ­pio, serem substituÃ­dos livremente pelas respectivas relativas ou anti-relativas.}
%% \begin{tabular}{l | c | r}
%% relativa & acorde principal da funÃ§Ã£o & anti-relativa \\\hline\hline
%% $\hat{6},\hat{1},\hat{3}$ & tÃ´nica:       $\hat{1},\hat{3},\hat{5}$ & $\hat{3}, \hat{5},      \hat{7}$ \\
%% $\hat{3},\hat{5},\hat{7}$ & dominante:    $\hat{5},\hat{7},\hat{2}$ & [ $\hat{7},\hat{2},\hat{4}\#$ ] \\
%% $\hat{2},\hat{4},\hat{6}$ & subdominante: $\hat{4},\hat{6},\hat{1}$ & $\hat{6},\hat{1},       \hat{3}$
%% \end{tabular}
%% \label{tab:harmonia}
%% \end{table}

%% Ã necessÃ¡rio que a dominante anti-relativa forme um acorde menor, por isso a alteraÃ§Ã£o do quarto grau um semitom para cima $\hat{7}\#$. O acorde diminuto $\hat{7},\hat{2},\hat{4}$, geralmente Ã© considerado uma 'dominante com sÃ©tima e sem fundamental'.\cite{Koellheuteur}
%% Em modo
%% menor, hÃ¡ a alteraÃ§Ã£o do $\hat{7}$ por um semitom ascendente para que haja somente um semitom de separaÃ§Ã£o com a tÃ´nica,
%% permitindo a dominante (que deve ser maior e tender Ã  tÃ´nica). Assim, a dominante Ã© sempre maior, tanto em escalas maior ou menor e, por este motivo, mesmo em tom menor, a dominante relativa permanece a uma terÃ§a abaixo e a antirrelativa a uma terÃ§a acima.

%% \subsubsection{ExpansÃ£o tonal: funÃ§Ãµes individuais e medianas cromÃ¡ticas}
%% Cada um destes acordes pode ser confirmado e se desenvolver com uma execuÃ§Ã£o de sua dominante ou subdominante individual, que Ã© o acorde com base na trÃ­ade formada a uma quinta acima ou uma quinta abaixo respectivamente. Estas dominantes/subdominantes individuais, por sua vez, possuem tambÃ©m subdominantes e dominantes individuais passÃ­veis de uso. Assim, em uma dada tonalidade, pode ocorrer qualquer acorde, por mais distante que seja do campo harmÃ´nico e das notas da escala, desde que a ocorrÃªncia apresente um percurso coerente de dominantes e subdominantes atÃ© a tonalidade de origem.

%% As medianas, ou 'medianas cromÃ¡ticas', sÃ£o duas para cada acorde: a mediana cromÃ¡tica superior, formada com a fundamental na terÃ§a do acorde original, e a inferior, formada com a quinta na terÃ§a do acorde original. SÃ£o acordes formados tambÃ©m a uma terÃ§a, mas com uma alteraÃ§Ã£o cromÃ¡tica com relaÃ§Ã£o ao acorde de origem. Caso haja duas alteraÃ§Ãµes cromÃ¡ticas, i.e. duas notas alteradas por um semitom cada com relaÃ§Ã£o ao acorde original, a mediana Ã© chamada 'duplamente cromÃ¡tica'. TambÃ©m sÃ£o duas para cada acorde: a superior, com terÃ§a na quinta do acorde original, e a inferior, com terÃ§a na fundamental da trÃ­ade original. Observe que um acorde maior possui medianas maiores e medianas duplamente cromÃ¡ticas maiores. Um acorde menor possui medianas menores e medianas duplamente cromÃ¡ticas menores. Esta relaÃ§Ã£o entre acordes Ã© considerada de tonalismo avanÃ§ado, por vezes atÃ© de expansÃ£o e dissoluÃ§Ã£o do tonalismo, e tem efeitos fortes e marcantes embora perfeitamente consonantes. As medianas foram utilizadas a partir do final do romantismo por Wagner, Lizt, Richard Strauss dentre outros e sÃ£o bastante simples de serem realizadas.\cite{Harmonia,Salzer}

%% \subsubsection{ModulaÃ§Ã£o}
%% A modulaÃ§Ã£o Ã© a mudanÃ§a da tonalidade em que se encontra a musica. Caracteriza-se a modulaÃ§Ã£o atravÃ©s da observaÃ§Ã£o
%% das tonalidades de partida e chegada e da forma de transiÃ§Ã£o. As tonalidades sÃ£o sempre tidas como relacionadas por quintas e suas relativas e antirrelativas. SÃ£o formas de efetuar a modulaÃ§Ã£o:
%% \begin{itemize}
%%     \item A transposiÃ§Ã£o do discurso para a nova tonalidade, sem preparaÃ§Ã£o alguma. Ã procedimento tÃ­pico do barroco embora seja incidente em outros perÃ­odos. Por vezes chamada de modulaÃ§Ã£o frasal ou modulaÃ§Ã£o sem preparaÃ§Ã£o.
%%     \item O uso cuidadoso de uma dominante individual, e possivelmente tambÃ©m a subdominante individual, para afirmar a mudanÃ§a da tÃ´nica e campo harmÃ´nico.
%%     \item Uso de alteraÃ§Ãµes cromÃ¡ticas para atingir um acorde da nova tonalidade a partir de algum acorde da tonalidade anterior. Chamada de modulaÃ§Ã£o cromÃ¡tica.
%%     \item O destaque para uma Ãºnica nota, possivelmente repetida ou suspensa sem acompanhamento, comum Ã s tonalidades de saÃ­da e chegada, constitui uma forma peculiar de introduzir o novo campo harmÃ´nico.
%%     \item MudanÃ§a da funÃ§Ã£o, sem a modificaÃ§Ã£o das notas em si, de um acorde para contemplar nova tonalidade. Procedimento chamado de enarmonia.
%%     \item A manutenÃ§Ã£o do centro tonal e mudanÃ§a da qualidade maior para menor (ou vice-versa) da tonalidade Ã© a modulaÃ§Ã£o paralela. A tonalidade de mesma tÃ´nica e outra qualidade Ã© chamada homÃ´nima.
%% \end{itemize}

%% A importÃ¢ncia da dominante a torna pivÃ´ natural das modulaÃ§Ãµes, o que desemboca no cÃ­rculo das quintas.\cite{Harmonia,Salzer,Koellheuteur,Harmony} A montagem musical \emph{Acorde cedo} explora estas relaÃ§Ãµes entre acordes. Seu cÃ³digo estÃ¡ disponÃ­vel do ApÃªndice~\ref{ap:acorde} e online como parte da \massa.\cite{MASSA}


%% \subsection{Contraponto}\label{subsec:contraponto}

%% A conduÃ§Ã£o de linhas melÃ³dicas simultÃ¢neas, chamadas vozes,
%% Ã© o contraponto. A bibliografia
%% percorre formas sistemÃ¡ticas de conduÃ§Ã£o de vozes e desemboca em gÃªneros escolÃ¡sticos como cÃ¢nones, invenÃ§Ãµes e fugas. Ã possÃ­vel resumir regras principais do contraponto e Ã© dito que o prÃ³prio Beethoven - dentre outros - esboÃ§ou uma sÃ­ntese deste tipo.

%% \begin{figure}[h!]
%%     \centering
%%         \includegraphics[width=\textwidth]{figuras/movContraponto}
%%     \caption{Movimentos diferenciados pelo contraponto com vistas a preservar a independÃªncia entre as vozes. 3 tipos de movimentos: direto, contrÃ¡rio e oblÃ­quo, categorizam as possibilidades. O movimento paralelo Ã© um tipo de movimento direto.}
%%         \label{fig:movContraponto}
%% \end{figure}

%% O propÃ³sito do contraponto Ã© conduzir as vozes 
%% de forma que soem independentes. Cruciais para isso
%% sÃ£o as movimentaÃ§Ãµes relativas, das vozes duas a duas,
%% categorizadas em: movimento direto, oblÃ­quo e contrÃ¡rio
%% conforme a figura~\ref{fig:movContraponto}. O movimento paralelo
%% Ã© um movimento oblÃ­quo.
%% A regra de ouro Ã© cuidar que os movimentos diretos
%% nÃ£o terminem em consonÃ¢ncia perfeita. O movimento paralelo
%% deve sÃ³ ocorrer entre consonÃ¢ncias imperfeitas e nÃ£o mais
%% do que trÃªs vezes consecutivas. As dissonÃ¢ncias podem
%% ser nÃ£o admitidas ou usadas seguidas 
%% e precedidas de consonÃ¢ncias em graus conjuntos, i.e. notas vizinhas na escala.
%% Os movimentos que levam a nota a uma vizinha soam mais coerentes.
%% Na presenÃ§a de 3 ou mais vozes,
%% a importÃ¢ncia melÃ³dica recai sobre as vozes mais aguda e mais grave, nesta ordem.\cite{Fux,Tragtenberg,SchoenbergContra}

%% Estas regras foram usadas na montagem \emph{Conta ponto}, o cÃ³digo estÃ¡ no ApÃªndice~\ref{ap:conta} e disponÃ­vel online junto Ã  \massa.


%% \subsection{Ritmo}\label{subsec:ritmo}
%% A noÃ§Ã£o rÃ­tmica Ã© dependente de eventos separados por duraÃ§Ãµes.\cite{Lacerda} Estes eventos podem ser ouvidos individualmente se espaÃ§ados
%% por ao menos $50-63ms$. Para que a separaÃ§Ã£o temporal entre eles possa ser apreciada como duraÃ§Ã£o, ela deve ser maior,
%% por volta de $100ms$.\cite{microsound} Pode-se sumarizar 
%% a transiÃ§Ã£o
%% de duraÃ§Ãµes ouvidas como alturas para a apreciaÃ§Ã£o em ritmo da seguinte forma:\cite{Alfaix, microsound}

%% \begin{table}[htpq!]
%% \tiny
%% \centering
%% \caption{TransiÃ§Ã£o das duraÃ§Ãµes ouvidas individualmente para alturas.}
%% \begin{tabular}{  l | r r r r   r r r    r r r || r r || r r r r r r }
%% \hline
%%            & \multicolumn{10}{c}{$\underleftarrow{\text{\bf zona de percepÃ§Ã£o de duraÃ§Ãµes em ritmo}}$} & \multicolumn{2}{c}{transiÃ§Ã£o} & \multicolumn{3}{c}{-} \\
%% duraÃ§Ã£o (s) & {\bf ...}     & {\bf 32,}     & {\bf 16,}   & {\bf 8,}  & {\bf 4,}   & {\bf 2,}   & {\bf 1,}   & {\bf 1/2,} & {\bf 1/4,} & {\bf 1/8,} & $\frac{1}{16}=62,5ms$ , & $\frac{1}{20}=50ms$ & {\color{Gray} 1/40} & {\color{Gray} 1/80  } & {\color{Gray} 1/160 } & {\color{Gray} 1/320 } & {\color{Gray} 1/640 } & {\color{Gray} ... } \\
%% frequÃªncia (Hz) & {\color{Gray} ...} & {\color{Gray} 1/32,}   & {\color{Gray} 1/16,} & {\color{Gray} 1/8,} & {\color{Gray} 1/4,} & {\color{Gray} 1/2,} &  {\color{Gray} 1,}  & {\color{Gray} 2,}   & {\color{Gray} 4,}   & {\color{Gray} 8,}    & 16,  & 20   & {\bf 40}   & {\bf 80}   & {\bf 160}   & {\bf 320}   & {\bf 640}   & {\bf ...} \\
%%            & \multicolumn{10}{c}{ - } & \multicolumn{2}{c}{transiÃ§Ã£o} & \multicolumn{6}{c}{$\overrightarrow{\text{\bf zona de percepÃ§Ã£o de duraÃ§Ãµes em altura}}$} \\
%% \hline
%% \end{tabular}
%% \label{tab:duracoes}
%% \end{table}

%% A banda de duraÃ§Ãµes marcada como transiÃ§Ã£o estÃ¡ minimizada pois os limites nÃ£o sÃ£o bem definidos: a duraÃ§Ã£o em que se comeÃ§a a perceber uma frequÃªncia fundamental ou uma separaÃ§Ã£o entre as ocorrÃªncias Ã© dependente da pessoa e de caracterÃ­sticas do som.\cite{microsound,Roederer}

%% A mÃ©trica rÃ­tmica costuma se basear em uma duraÃ§Ã£o bÃ¡sica chamada pulso. O pulso tipicamente
%% compreende duraÃ§Ãµes entre $0.25-1.5s$ (respectivamente $240$ e $40BPM$). Na educaÃ§Ã£o musical e estudos cognitivistas,
%% costuma-se associar esta gama de frequÃªncias de pulsaÃ§Ã£o Ã s duraÃ§Ãµes entre batidas 
%% do coraÃ§Ã£o, da inspiraÃ§Ã£o/expiraÃ§Ã£o ou entre os passos ao caminhar.\cite{Lacerda,Roederer}

%% O pulso Ã© subdividido em partes iguais e tambÃ©m Ã© 
%% repetido sequencialmente. Estas relaÃ§Ãµes (de divisÃ£o e de concatenaÃ§Ã£o) costumam
%% seguir relaÃ§Ãµes de nÃºmeros inteiros de baixa ordem
%% \footnote{Em ordem crescente de ocorrÃªncia na mÃºsica
%% escrita e Ã©tnica,
%% as divisÃµes do pulso musical e seus agrupamentos
%% sequenciais no tempo sÃ£o: 2, 4 e 8, depois 3, 6 (dois grupos de 3 ou 3 grupos de 2) e 9 e 12 (3 e 4 grupos de 3). Por 
%% Ãºltimo os primos 5 e 7, completando 1-9 e 12.
%% Outras mÃ©tricas sÃ£o menos usuais, como divisÃµes ou agrupamentos em 13, 17, etc, e sÃ£o incidentes principalmente em contextos de mÃºsica experimental e erudita do sÃ©culo XX e XXI. Por mais complexas que pareÃ§am, as mÃ©tricas costumam ser composiÃ§Ãµes e decomposiÃ§Ãµes de 1-9 partes iguais.\cite{Gramani,Roederer}.}.
%% Uma exposiÃ§Ã£o esquemÃ¡tica estÃ¡ na figura~\ref{fig:pulsoSubAgl}.

%% \begin{figure}[h!]
%%     \centering
%%         \includegraphics[width=\textwidth]{figuras/metricaMusical}
%%     \caption{DivisÃµes e aglomeraÃ§Ãµes do pulso musical para estabelecimento de mÃ©trica. Ao lado esquerdo estÃ£o as divisÃµes da semÃ­nima estabelecida como pulso. Ao lado direito, fÃ³rmulas de compasso que especificam as mesmas mÃ©tricas, mas na escala das aglomeraÃ§Ãµes do pulso musical.}
%%         \label{fig:pulsoSubAgl}
%% \end{figure}

%% As relaÃ§Ãµes duais (compassos simples e divisÃµes binÃ¡rias) costumam ocorrer em ritmos de danÃ§a
%% e ocasiÃµes festivas, e sÃ£o chamadas imperfeitas. As relaÃ§Ãµes ternÃ¡rias
%% incidem mais na mÃºsica ritualÃ­stica e relacionada ao sagrado
%% e sÃ£o ditas perfeitas.

%% As unidades mais fortes (acentuadas) sÃ£o as que consistem nas 'cabeÃ§as das divisÃµes'. A cabeÃ§a de uma unidade Ã© a primeira parte da subdivisÃ£o. Nas divisÃµes binÃ¡rias (2, 4 e 8 dos casos considerados),
%% as unidades consideradas fortes se revezam com as fracas
%% (e.g. a divisÃ£o em 4 Ã© forte, fraco, meio-forte, fraco).
%% Nas divisÃµes ternÃ¡rias (3, 6 e 9)
%% Ã  unidade forte (primeira) se sucedem 2 unidades fracas (e.g. a divisÃ£o em 3 Ã© forte, fraco fraco)\footnote{A divisÃ£o em 6 Ã© considerada composta
%%  mas pode ocorrer tambÃ©m como uma divisÃ£o binÃ¡ria.
%%  Uma divisÃ£o binÃ¡ria que sofre entÃ£o uma divisÃ£o ternÃ¡ria
%%  resulta em duas unidades divididas em trÃªs unidades cada: forte (subdividido em forte fraco, fraco) e fraco (subdividido em forte, fraco, fraco).
%% A outra forma de ocorrer a divisÃ£o em 6 Ã© atravÃ©s de 
%% uma divisÃ£o ternÃ¡ria que sofre entÃ£o uma divisÃ£o binÃ¡ria, resultando em:
%% uma unidade forte (subdividido em forte e fraco) e duas unidades fracas (subdivididas em forte e fraco cada).}.

%% A acentuaÃ§Ã£o em tempo fraco Ã© o contratempo, uma nota iniciada em tempo fraco e cuja duraÃ§Ã£o se prolonga sobre um tempo forte Ã© uma sÃ­ncopa.

%% As notas podem ocorrer dentro e fora destas divisÃµes da \emph{'mÃ©trica musical'}. Nos casos mais comportados, as notas ocorrem exatamente nestas divisÃµes, com maior incidÃªncia em ataques nos tempos fortes.
%% Em casos extremos, nÃ£o se pode perceber a mÃ©trica.\cite{Roederer} VariaÃ§Ãµes pequenas na grade ajudam a compor a interpretaÃ§Ã£o musical e diferenÃ§as entre estilos.\cite{Cook}

%% Seja o pulso o nÃ­vel $j=0$ de agrupamento, o nÃ­vel $j=-1$ 
%% a primeira subdivisÃ£o do pulso, o nÃ­vel $j=1$ a primeira aglomeraÃ§Ã£o dos pulsos e assim por diante. 
%% Desta forma, $P_i^j$ Ã© a $i$-Ã©sima unidade de 
%% pulsos no nÃ­vel $j$ de agrupamento:
%% $P^0_{10}$ Ã© o dÃ©cimo pulso, $P^{1}_3$ Ã© a terceira unidade de agrupamento de pulsos (Ã© possÃ­vel que seja o terceiro compasso),
%% $P^{-1}_2$ Ã© a segunda unidade da subdivisÃ£o do pulso.

%% Especial atenÃ§Ã£o para
%% os limites de $j$: as divisÃµes do pulso sÃ£o duraÃ§Ãµes apreciÃ¡veis
%% como ritmo; alÃ©m disso, as junÃ§Ãµes do pulso somam, no mÃ¡ximo
%% do escopo, uma mÃºsica ou um conjunto coeso de mÃºsicas. Dito de outra forma: a duraÃ§Ã£o de $P^{min(j)}_i$, $\forall \; i$,
%% Ã© maior que $50ms$ e as duraÃ§Ãµes somadas $\sum_{\forall i}P^{\text{mÃ¡x}(j)}_i$
%% Ã© menor do que alguns minutos ou, no mÃ¡ximo, poucas horas.


%% Cada nÃ­vel $j$ possui alguns Ã­ndices $i$. Sempre que o Ã­ndice $i$ possuir trÃªs valores diferentes
%% (ou mÃºltiplo de trÃªs), hÃ¡ uma relaÃ§Ã£o perfeita. 
%% Quando $i$ possuir somente mÃºltiplo dois, quatro ou oito valores diferentes, hÃ¡ uma relaÃ§Ã£o imperfeita, como na figura~\ref{fig:pulsoSubAgl}.


%% Qualquer unidade (nota), de uma
%% dada sequÃªncia musical que tenha mÃ©trica pode ser
%% univocamente assim especificada:

%% \begin{equation}
%% P^{ \{ j_k \} }_{ \{ i_{k} \}}
%% \end{equation}

%% em que $j_k$ Ã© o nÃ­vel de aglomeraÃ§Ã£o e $i_k$ Ã© a ordem
%% da unidade em si.

%% Como um exemplo, $P^{-1,0,1}_{3,2,2}$  Ã© a terceira subdivisÃ£o $P^{-1}_3$ do segundo
%% pulso $P^0_2$ do segundo aglomerado de pulsos $P^1_2$.
%% Cada unidade ou conjunto de unidades $P_i^j$ pode ser associada a uma sequÃªncia de amostras temporais $T_i$ que forma uma nota musical. 

%% A montagem \emph{Poli Hit Mia} utiliza as diferentes mÃ©tricas e estÃ¡ no ApÃªndice~\ref{ap:poli}, disponÃ­vel online como parte da \massa.

%% \subsection{RepetiÃ§Ã£o e variaÃ§Ã£o: motivos e unidades maiores}\label{subsec:motivos}
%% Dadas as estruturas musicais bÃ¡sicas tanto frequenciais (acordes e escalas) quanto 
%% rÃ­tmicas (divisÃµes e aglomeraÃ§Ãµes simples, compostas e complexas), Ã© 
%% natural apresentar estas estruturas de forma que tenham coesÃ£o e sentido.\cite{Boulez}
%% Para tal, Ã© fundamental o conceito de arcos: partindo de algum lugar e voltando, forma-se um arco. 
%% A audiÃ§Ã£o de linhas melÃ³dicas e harmÃ´nicas Ã© permeada de arcos musicais pela natureza cognitiva
%% da escuta musical. Pode-se considerar a nota o menor arco, cada motivo e melodia tambÃ©m um arco.
%% Cada tempo e cada subdivisÃ£o, cada compasso e secÃ§Ã£o da mÃºsica, constitui um arco prÃ³prio.
%% Uma mÃºsica, cujos arcos nÃ£o apresentam consistÃªncia entre si, pode ser compreendida como uma mÃºsica sem coesÃ£o.
%% A sensaÃ§Ã£o de coerÃªncia provÃ©m, em grande parte, do tratamento hÃ¡bil dos arcos de uma peÃ§a.

%% Os arcos musicais sÃ£o estruturas abstratas e passÃ­veis de operaÃ§Ãµes bÃ¡sicas. Um arco espectral, como um
%% acorde, pode ser invertido, ampliado e permutado, por exemplo. Os arcos temporais, como uma melodia, um motivo, um compasso ou
%% uma nota, sÃ£o igualmente passÃ­veis de variaÃ§Ãµes. Lembrando que $S_j=\left\{s_j=T_i^j=\{t_i^{j}\}_0^{\Lambda_j-1}\right\}_0^{H-1}$ Ã© uma
%% sequÃªncia de $H$ eventos musicais $s_j$, cada evento com suas $\Lambda_j$ amostras $t_i^j$ (veja no inÃ­cio desta seÃ§Ã£o~\ref{notasMusica}), as tÃ©cnicas bÃ¡sicas podem ser descritas assim:

%% \begin{itemize}
%%     \item A translaÃ§Ã£o temporal Ã© o deslocamento $\delta$ do material para um outro instante $\Gamma'=\Gamma + \delta$ da mÃºsica. Ã uma variaÃ§Ã£o do material com modificaÃ§Ã£o na localizaÃ§Ã£o no decorrer da mÃºsica: $\left\{s_j'\right\}=\left\{s_j^{\Gamma'}\right\}=\left\{s_j^{\Gamma+\delta}\right\}$ onde $\Gamma$ Ã© a duraÃ§Ã£o entre o comeÃ§o da peÃ§a (ou trecho considerado) e o primeiro evento $s_0$ da estrutura $S_j$ original. Observe que $\delta$ Ã© o deslocamento no tempo.
%%     \item A dilataÃ§Ã£o ou contraÃ§Ã£o temporal Ã© a alteraÃ§Ã£o da duraÃ§Ã£o de cada arco por um fator $\mu\,:\; s_j'^{\Delta}=s_j^{\mu_j . \Delta}$. Possivelmente, $\mu_j=\mu$ constante.
%%     \item ReversÃ£o temporal consiste em gerar uma sequÃªncia com os elementos em ordem invertida da sequÃªncia original $S_j$, assim: $S_j'=\left\{s_j'\right\}_0^{H-1}=\left\{s_{(H-j-1)}\right\}_0^{H-1}$.
%%     \item A translaÃ§Ã£o em altura Ã© o deslocamento $\tau$ do material para uma altura diferente $\Xi'=\Xi + \tau$ da mÃºsica. Ã uma variaÃ§Ã£o com modificaÃ§Ã£o na localizaÃ§Ã£o em altura do material: $\left\{s_j'\right\}=\left\{s_j^{\Xi'}\right\}=\left\{s_j^{\Xi+\tau}\right\}$ onde $\Xi$ Ã© a altura do trecho $S_j$ ou do primeiro evento $s_0$ da estrutura $S_j$ original. Observe que $\tau$ Ã© o deslocamento em altura. Caso $\tau$ seja dado em semitons, o deslocamento em frequÃªncia Ã© $\tau_f=f_0.2^{\frac{\tau}{12}}$ onde $f_0$ Ã© resultado da adoÃ§Ã£o de alguma referÃªncia: $f_0=\Xi_{f_0}Hz\;\sim \Xi_0$ valor absoluto de altura. Para a frequÃªncia para qualquer valor de altura: $\Xi_f=\Xi_{f_0}.2^{\frac{\Xi-\Xi_0}{12}}$. 
%%         Para altura de qualquer valor de frequÃªncia: $\Xi=\Xi_0 +12 . \log_2\left(\frac{\Xi_f}{\Xi_{f_0}}\right)$.  No protocolo MIDI, $\Xi_{f_0}=55Hz$ enquanto $\Xi_0=33$ de altura marca o lÃ¡ 1, outro ponto de referÃªncia Ã© o $\Xi_{f_0}=440Hz$ que corresponde a $\Xi_0=69$. A diferenÃ§a da unidade equivale ao semitom. NÃ£o se pode dizer que a unidade Ã© o semitom pois $\Xi=1$ nÃ£o Ã© um semitom, Ã© uma nota de frequÃªncia audÃ­vel como ritmo, com menos de 9 ocorrÃªncias por segundo (veja a tabela~\ref{tab:duracoes}).
%%     \item A inversÃ£o intervalar Ã© a inversÃ£o do sentido dos intervalos percorridos pelo material. A inversÃ£o Ã© estrita se o nÃºmero de semitons esteja sendo usado como referÃªncia para a operaÃ§Ã£o: $S_j'=\{s_j'\}_0^{H-1}=\left\{s_j^{-\varepsilon_j . f_0}\right\}$, onde $\varepsilon_j$ Ã© o fator entre a frequÃªncia do evento $s_j$ e a frequÃªncia de $s_0$. A inversÃ£o Ã© tonal caso as distÃ¢ncias sejam consideradas em termos de nÃºmeros de graus da escala $E_k$: $S_j'=\{s_j'\}_0^{H-1}=\left\{s_j^{-\varepsilon^{\left(e_{\left(j_e\right)}\right)} . f_0}\right\}_0^{H-1}$ onde $j_e=e_{j}^{inv}$ Ã© o Ã­ndice $k=j_e$ em $E_k$ da nota do evento $s_j$.
%%     \item RotaÃ§Ã£o de elementos musicais Ã© a transferÃªncia do Ãºltimo elemento para a posiÃ§Ã£o do primeiro e o deslocamento deste ao penÃºltimo uma posiÃ§Ã£o para frente. Pode-se definir a rotaÃ§Ã£o de $\tilde{n}$ posiÃ§Ãµes por $S'_n=S_{(n+\tilde{n})\%H}$. Caso $\tilde{n}<0$, basta usar $\tilde{n}'=H-\tilde{n}$. Ã razoÃ¡vel associar $\tilde{n}>0$ com a rotaÃ§Ã£o horÃ¡ria e $\tilde{n}<0$ com a rotaÃ§Ã£o anti-horÃ¡ria. Mais sobre rotaÃ§Ãµes na subseÃ§Ã£o~\ref{estCic}.
%%     \item A inserÃ§Ã£o e remoÃ§Ã£o de materiais na estrutura $S_j$ pode ser ornamental ou estruturante: $S_j'=\{s_j'\}=\{s_j \text{ se condiÃ§Ã£o A, caso contrÃ¡rio } r_j\}$, para qualquer material musical $r_j$, incluindo o instante vazio. Elementos de $R_j$ podem ser inseridos no comeÃ§o, como um prefixo de $S_j$, ao final, como um sufixo, ou no meio, dividindo $S_j$ ou fazendo dele o prefixo e o sufixo. Os dois materiais podem se misturar das formas mais diversas.
%%     \item ModificaÃ§Ãµes de articulaÃ§Ã£o, instrumentaÃ§Ã£o e espacializaÃ§Ã£o $s_j'=s_j^{*_j}$, com $*_j$ a nova caracterÃ­stica incorporada pelo elemento $s_j'$.
%%     \item Acompanhamento. Tanto a instrumentaÃ§Ã£o quanto as linhas melÃ³dicas presentes na ocorrÃªncia de $S_j$ podem sofrer modificaÃ§Ãµes e ser considerada uma variaÃ§Ã£o de $S_j$ em si.
%% \end{itemize}

%% Com estes procedimentos, outros sÃ£o derivados: o retrÃ³grado do inverso, uma contraÃ§Ã£o temporal com um sufixo externo, etc.
%% As estruturas musicais ressoam no sistema cognitivo devido Ã  prÃ³pria natureza do pensamento. Em suas vÃ¡rias facetas,
%% uma ideia lida com o mesmo nÃºmero de elementos e aspectos conectivos entre eles.
%% A mÃºsica, atravÃ©s de sintonia com estas estruturas mentais, suscita impressÃµes. Ã, assim, desencadeado
%% todo um processo de ressonÃ¢ncia mental e neurolÃ³gica responsÃ¡vel pelos sentimentos, lembranÃ§as e imaginaÃ§Ãµes
%% tÃ­picas de uma audiÃ§Ã£o musical atenta. Esta atividade cortical contribui para a terapia
%% musical, conhecida pela utilidade em casos de depressÃ£o e dano neurolÃ³gico. Considera-se que as regiÃµes do cÃ©rebro responsÃ¡veis pelo processamento auditivo sÃ£o tambÃ©m usadas para outras atividades, incluindo linguÃ­sticas e matemÃ¡ticas.\cite{Sacks,Roederer}

%% As estruturas paradigmÃ¡ticas orientam a criaÃ§Ã£o de novos materiais musicais. Uma delas, central, Ã© o dipolo tensÃ£o/relaxamento. Relaciona-se com este dipolo, cada outro dipolo tradicional: tÃ´nica/dominante, repetiÃ§Ã£o/variaÃ§Ã£o, consonÃ¢ncia/dissonÃ¢ncia, coerÃªncia/rompimento, simetria/assimetria, igualdade/diferenÃ§a, chegada/saÃ­da, perto/longe, parado/em movimento, etc. JÃ¡ as relaÃ§Ãµes ternÃ¡rias tendem a se relacionar com o circular e a unificaÃ§Ã£o. A lÃºcida comunhÃ£o ternÃ¡ria, 'modus perfectus', se opÃµe ao dicotÃ´mico passional, 'modus imperfectus'.
%% A seguir estÃ¡ uma exposiÃ§Ã£o  dedicada aos arcos direcionais 
%% e cÃ­clicos.

%% \subsection{Estruturas direcionais}\label{subsec:dir}


%% Os arcos podem ser decompostos em duas sequÃªncias convergentes: 
%% uma que atinge o Ã¡pice, e 
%% outra que, de forma paradigmÃ¡tica, volta do Ã¡pice Ã  regiÃ£o de partida. Este Ã¡pice Ã© chamado de clÃ­max pela teoria musical tradicional. Distingue-se entre arcos cujos clÃ­max estÃ£o: no comeÃ§o, no meio, no final, na primeira metade e na segunda metade da duraÃ§Ã£o considerada. Estas estruturas estÃ£o na figura~\ref{fig:climax}. O parÃ¢metro que varia pode nÃ£o existir, no caso o arco consiste somente em uma estrutura de referÃªncia.\cite{Schoenberg}

%% \begin{figure}[h!]
%%     \centering
%%         \includegraphics[width=\textwidth]{figuras/climax}
%%     \caption{DistinÃ§Ãµes canÃ´nicas do clÃ­max musical em uma melodia e outros domÃ­nios. As possibilidades diferenciadas sÃ£o: clÃ­max no comeÃ§o, clÃ­max na primeira metade, clÃ­max no meio, clÃ­max na segunda metade, clÃ­max no fim. NÃ£o estÃ¡ especificado o eixo das ordenadas pois pode nÃ£o haver variaÃ§Ã£o paramÃ©trica real, neste caso a estrutura Ã© uma referÃªncia.}
%%         \label{fig:climax}
%% \end{figure}


%% Seja $S_i=\{s_i\}_0^{H-1}$ uma sequÃªncia crescente. A sequÃªncia 
%% $R_i=\{r_i\}_0^{2H -2}=\left\{s_{(H-1-|H-1-i|)}\right\}_0^{2H-2}$ 
%% Ã© uma sequÃªncia que apresenta simetria especular perfeita, i.e. a segunda metade Ã© uma versÃ£o espelhada da primeira. Segundo conceitos musicais, o clÃ­max estÃ¡ exatamente no meio da sequÃªncia. Pode-se modificar isso com o uso de sequÃªncias de tamanhos diferentes. Toda a teoria matemÃ¡tica de sequÃªncias, jÃ¡ estabelecida e ensinada corriqueiramente em cursos de cÃ¡lculo III, pode ser utilizada para geraÃ§Ã£o destes arcos.\cite{Guidorizzo,Schoenberg} 
%% Teoricamente, estas sequÃªncias, aplicadas desta forma
%% a qualquer caracterÃ­stica dos eventos musicais, produzem arcos,
%% pois implicam no afastamento e retorno de uma parametrizaÃ§Ã£o inicial. 
%% Assim, Ã© possÃ­vel para uma mesma sequÃªncia de eventos possuir um nÃºmero de arcos distintos, com tamanhos e clÃ­max diferentes. Este Ã© um recurso
%% interessante e Ãºtil e a correlaÃ§Ã£o dos arcos resulta na coerÃªncia da escuta.\cite{Salzer}

%% Na prÃ¡tica, e historicamente, tem especial importÃ¢ncia a razÃ£o Ã¡urea e, por isso, a sequÃªncia de Fibonacci. A sequÃªncia de Lucas permite uma generalizaÃ§Ã£o da sequÃªncia de Fibonacci que pode ser compreendida facilmente. Dados dois nÃºmeros quaisquer $x_0$ e $x_1$, obtÃ©m-se a sequÃªncia de Lucas: $x_n=x_{n-1}+x_{n-2}$. Quanto maior for $n$, mais a razÃ£o $\frac{x_{n}}{x_{n_1}}$ se aproxima da razÃ£o Ã¡urea: $1.61803398875...$. A sequÃªncia converge rÃ¡pido mesmo para valores iniciais bem discrepantes. Seja $x_0=1$ e $x_1=100$, e $y_n=\frac{x_n}{x_{n+1}}$ uma sequÃªncia auxiliar. O erro em percentagem dos primeiros valores desta sequÃªncia com relaÃ§Ã£o Ã  proporÃ§Ã£o Ã¡urea Ã©, aproximadamente, $\{ e_n \} =\left\{100\frac{y_n}{1.61803398875}-100 \right\}_1^{10}=\{6080.33, -37.57, 23, -7.14, 2.937, -1.09, 0.42, -0.1601, 0.06125, -0.02338\}$. A sequÃªncia de Fibonacci apresenta aproximadamente a mesma progressÃ£o de erros, mas comeÃ§a jÃ¡ no segundo passo pois $\frac{1}{1}\approx\frac{101}{100}$.

%% A montagem sonora \emph{Dirracional} expÃµe estes arcos em estruturas direcionais. Seu cÃ³digo estÃ¡ no ApÃªndice~\ref{ap:dirracional} e disponÃ­vel online como parte da \massa.\cite{MASSA}

%% \subsection{Estruturas cÃ­clicas}\label{estCic}

%% O entendimento filosÃ³fico de que o pensamento humano Ã© fundamentado
%% na percepÃ§Ã£o de semelhanÃ§as e diferenÃ§as, dentre os estÃ­mulos
%% e objetos, coloca
%% as simetrias no cerne do processo cognitivo.\cite{Deleuze}
%% Matematicamente,
%% as simetrias sÃ£o grupos algÃ©bricos e um grupo finito
%% Ã© sempre isomorfo a um grupo de permutaÃ§Ãµes. 
%% Pode-se dizer que
%% as permutaÃ§Ãµes representam quaisquer simetrias em um sistema finito.
%% Na mÃºsica, as permutaÃ§Ãµes sÃ£o ubÃ­quas
%% e estÃ£o presentes em tÃ©cnicas, o que confirma seu papel central.
%% A aplicaÃ§Ã£o sucessiva das permutaÃ§Ãµes gera arcos cÃ­clicos.\cite{change,Zamacois,permMusic}
%% A esta abordagem foram dedicados dois trabalhos acadÃªmicos para geraÃ§Ã£o de estruturas musicais.\cite{figgusOriginal, figgusEspacializacao}

%% Qualquer conjunto de permutaÃ§Ãµes pode ser utilizado como gerador de grupos algÃ©bricos.\cite{permMusic} As propriedades que definem um grupo $G$ sÃ£o:

%% \begin{equation}\label{eq:groups}
%% \begin{split}
%% \forall \;\; p_1,p_2 \in G \Rightarrow\quad\quad\quad\;\; p_1 \bullet p_2 & = p_3 \in G  \quad\quad\quad\;\;\;\text{(propriedade de fechamento)} \\
%% \forall \;\; p_1,p_2,p_3 \in G \Rightarrow\quad (p_1\bullet p_2)\bullet p_3 & = p_1\bullet (p_2\bullet p_3)\quad\;  \text{(propriedade da associatividade)} \\
%% \exists \;\; e \in G :\quad\quad\quad\quad\; p \bullet e & = e \bullet p \;\;\;\; \forall p \in G  \quad \text{(existÃªncia do elemento neutro)} \\
%% \forall \;\; p \in G, \;\exists\; p^{-1} :\quad\quad\quad\;  p\bullet p^{-1} & =p^{-1}\bullet p = e  \quad\quad\;\text{(existÃªncia do inverso)}
%% \end{split}
%% \end{equation}


%% Da primeira propriedade conclui-se que toda permutaÃ§Ã£o pode ser operada com outra permutaÃ§Ã£o. De fato, pode-se aplicar uma permutaÃ§Ã£o $p_1$, depois outra $p_2$ e, se comparadas as ordenaÃ§Ãµes inicial e final, hÃ¡ uma permutaÃ§Ã£o $p_3$.

%% Todo elemento $p$ operado consigo mesmo um nÃºmero suficiente de vezes $n$ atinge o elemento neutro $p^n=e$, caso contrÃ¡rio o grupo seria infinito (gerado por $p$). O menor $n\;:\;p^n=e$ Ã© chamado de ordem do elemento. Assim, uma permutaÃ§Ã£o finita $p$ aplicada sucessivamente atinge a ordenaÃ§Ã£o inicial dos elementos, formando um ciclo. Este ciclo, se utilizado para parÃ¢metros de notas musicais, implica em um arco musical cÃ­clico.

%% Estes arcos podem ser efetuados pelo uso conjunto de diferentes permutaÃ§Ãµes. Como exemplo
%% histÃ³rico, a tradiÃ§Ã£o chamada \emph{change ringing} concebe mÃºsica atravÃ©s de sinos tocados um apÃ³s o outro e entÃ£o tocados novamente, mas em uma ordem diferente. Este processo se repete atÃ© que se atinja a ordenaÃ§Ã£o inicial. O conjunto de ordenaÃ§Ãµes diferentes percorridas Ã© um \emph{peal}. A tabela~\ref{tab:change} representa um \emph{peal} tradicional de 3 sinos (1, 2 e 3) que explora todas as suas ordenaÃ§Ãµes. Cada linha apresenta uma ordenaÃ§Ã£o dos sinos a ser tocada. As permutaÃ§Ãµes estÃ£o entre as linhas.
%% Neste caso, a estrutura musical consiste em permutaÃ§Ãµes propriamente ditas e algumas permutaÃ§Ãµes diferentes operam para o comportamento cÃ­clico. 

%% \begin{table}[htpq!]
%% \centering
%% \caption{Change Ringing: \emph{Peal} (padrÃ£o) com 3 sinos. As permutaÃ§Ãµes estÃ£o entre as ordenaÃ§Ãµes. Cada linha Ã© uma ordenaÃ§Ã£o dos sinos, cada ordenaÃ§Ã£o Ã© tocada, uma linha por vez.}
%% \begin{tabular}{l c r}
%% \textcolor{red}{1} & \textcolor{blue}{2} & \textcolor{green}{3} \\
%% \textcolor{blue}{2} & \textcolor{red}{1} & \textcolor{green}{3} \\
%% \textcolor{blue}{2} & \textcolor{green}{3} & \textcolor{red}{1} \\
%% \textcolor{green}{3} & \textcolor{blue}{2} & \textcolor{red}{1} \\
%% \textcolor{green}{3} & \textcolor{red}{1} & \textcolor{blue}{2} \\
%% \textcolor{red}{1} & \textcolor{green}{3} & \textcolor{blue}{2} \\
%% \textcolor{red}{1} & \textcolor{blue}{2} & \textcolor{green}{3}
%% \end{tabular}
%% \label{tab:change}
%% \end{table}


%% A utilizaÃ§Ã£o de permutaÃ§Ãµes na mÃºsica pode ser resumida da seguinte forma:
%% seja $S_i=\{s_i\}$ uma sequÃªncia de eventos musicais $s_i$ (e.g. notas) e $p$ uma permutaÃ§Ã£o.
%% $S_i'=p(S_i)$ consiste nos mesmos elementos de $S_i$ mas em ordem diferente.
%% As permutaÃ§Ãµes podem ser escritas em duas notaÃ§Ãµes: cÃ­clica ou natural. 
%% A notaÃ§Ã£o natural consiste na ordem dos Ã­ndices 
%% resultante da permutaÃ§Ã£o. Assim,
%% convencionada a ordenaÃ§Ã£o original dada pela sequÃªncia de seus Ã­ndices $[0\;1\;2\;3\;4\;5\;...]$ a permutaÃ§Ã£o Ã© notada pela sequÃªncia que produz (ex. $[1\;3\;7\;0\;...]$). Na notaÃ§Ã£o cÃ­clica, a permutaÃ§Ã£o Ã© a troca de um elemento pelo
%% da frente, e o Ãºltimo pelo primeiro.

%% NÃ£o Ã© necessÃ¡rio permutar os elementos de $S_i$, mas somente
%% alguma ou algumas de suas caracterÃ­sticas. Assim, seja $p^f$ uma permutaÃ§Ã£o 
%% nas frequÃªncias e $S_i$ uma sequÃªncia de notas bÃ¡sicas como expostas
%% ao final de~\ref{notaBasica}. A nova sequÃªncia $S_i'=p^f(S_i)=\left\{s_i^{p(f)}\right\}$ consiste nas mesmas
%% notas musicais, na mesma ordem e com as mesmas caracterÃ­sticas, com as frequÃªncias fundamentais permutadas segundo o padrÃ£o que $p^f$ apresenta.

%% Duas sutilezas deste procedimento.
%% 1) A permutaÃ§Ã£o $p$ nÃ£o precisa envolver todos os elementos de $S_i$, i.e. ela
%% pode operar em subconjuntos de $S_i$. 2) Nem todos os elementos $s_i$ precisam ser executados a cada consulta de estado realizada.
%% Para exemplificar, seja $S_i$ 
%% uma sequÃªncia de notas musicais $s_i$. 
%% Se $i$ vai de $0$ a $n$, e $n>4$, a cada compasso
%% de $4$ notas pode-se executar as primeiras $4$ notas. As outras notas de
%% $S_i$ podem incidir nos compassos em que as permutaÃ§Ãµes aloquem
%% estas notas para as primeiras quatro notas de $S_i$.

%% A cada uma destas permutaÃ§Ãµes
%% $p_i$, segundo a exposiÃ§Ã£o acima, relaciona-se: dimensÃµes das notas em que opera (frequÃªncia, duraÃ§Ã£o, \emph{fades}, intensidade, etc) e perÃ­odo de incidÃªncia (a cada quantas consultas Ã© aplicada a permutaÃ§Ã£o). Na realizaÃ§Ã£o das notas de $S_i$, uma forma fÃ¡cil e coerente Ã© executar as primeiras $n$ notas\footnote{A execuÃ§Ã£o de notas disjuntas de $S_i$ equivale a modificar a permutaÃ§Ã£o e executar as primeiras notas.}.

%% No ApÃªndice~\ref{cap:FIGGUScode} estÃ¡ a implementaÃ§Ã£o computacional disponibilizada em.\cite{MASSA,figgusOriginal,figgusEspacializacao}

%% \subsection{Idioma musical?}

%% Existem diversas empreitadas que se propÃµem a modelar e explorar entendimentos
%% sobre a 'linguagem musical', a 'linguÃ­stica aplicada Ã  mÃºsica' ou ainda
%% para discernimento entre 
%% o que seriam diferentes
%% `idiomas musicais'.\cite{Lerdahl, Harmonia, Salzer,Alfaix}
%% De forma simples, um idioma musical Ã© fruto da escolha de materiais bÃ¡sicos e
%% repetiÃ§Ã£o de elementos e da repetiÃ§Ã£o de relaÃ§Ãµes entre elementos presentes no decorrer da mÃºsica. Nestas questÃµes, as dicotomias sÃ£o salientes,
%% como explicadas na subseÃ§Ã£o~\ref{subsec:motivos}: repetiÃ§Ã£o e variaÃ§Ã£o, relaxamento e tensÃ£o, equilÃ­brio e desequilÃ­brio, consonÃ¢ncia e dissonÃ¢ncia, etc. 

%% \subsection{Usos musicais}\label{subsec:usosmusicais3}

%% Primeiro, a nota bÃ¡sica foi definida e caracterizada em termos
%% claros e quantitativos (seÃ§Ã£o~\ref{sec:notaDisc}). Em seguida, a composiÃ§Ã£o interna da nota foi abordada, e compreendidas as transiÃ§Ãµes internas e tratamentos imediatos (seÃ§Ã£o~\ref{varInternas}). Por fim, esta presente seÃ§Ã£o dedica-se a organizar estas notas em mÃºsica.
%% A gama de recursos e consequente infinidade de possibilidades de resultados
%% Ã© situaÃ§Ã£o tÃ­pica e cara Ã s artes.\cite{Harmonia,Webern}

%% Existem estudos para cada recurso apresentado. Por exemplo, pode-se obter as harmonias triÃ¡dicas 'sujas' (com notas nÃ£o pertencentes Ã  trÃ­ade) atravÃ©s de sobreposiÃ§Ãµes de quartas justas. Outro exemplo interessante Ã© a presenÃ§a simultÃ¢nea de ritmos em diferentes mÃ©tricas, constituindo o que chama-se de \emph{polirritmia}. A montagem musical \emph{Poli-hit mia} explora estas mÃ©tricas simultÃ¢neas atravÃ©s de trem de impulsos convoluidos com as notas que compÃµem cada linha. Seu cÃ³digo estÃ¡ no ApÃªndice~\ref{ap:poli} e disponÃ­vel online como parte da \massa.

%% As escalas microtonais sÃ£o importantes na mÃºsica do sÃ©culo XX~\cite{microtonalidade} e possuem resultados muito marcantes, como os quartos de tom na mÃºsica indiana. A sequÃªncia musical \emph{MicroTom} explora estes recursos, incluindo melodias microtonais e harmonias microtonais com vÃ¡rias notas em um Ã¢mbito de alturas bastante reduzido. Seu cÃ³digo estÃ¡ no ApÃªndice~\ref{ap:micro} e disponÃ­vel online como parte da \massa.

%% Como tambÃ©m apontado na subseÃ§Ã£o~\ref{subsec:mus2}, os vÃ­nculos entre parÃ¢metros sÃ£o formas poderosas de se obter peÃ§as e montagens musicais. O nÃºmero de notas permutadas pode variar no decorrer da mÃºsica, revelando vÃ­nculo com a duraÃ§Ã£o da peÃ§a. As harmonias podem constituir-se triÃ¡dicas (eqs.~\ref{triades}) com notas replicadas em vÃ¡rias oitavas e mais numerosas quanto menor a profundidade e frequÃªncia de vibratos (eqs.~\ref{vbrGamma},~\ref{vbrAux},~\ref{vbrF},~\ref{vbrGamma2},~\ref{vbrT}), dentre outras incontÃ¡veis possibilidades.

%% As simetrias apresentadas nas divisÃµes da oitava (eqs.~\ref{escSim}) e as simetrias apresentadas atravÃ©s das permutaÃ§Ãµes (tabela~\ref{tab:change} e eqs.~\ref{eq:groups}) podem ser usadas em conjunto. Nas peÃ§as \emph{3 trios} esta associaÃ§Ã£o Ã© feita de forma sistemÃ¡tica para possibilitar uma audiÃ§Ã£o a ela dedicada. Esta Ã© uma peÃ§a instrumental e nÃ£o consta dentre os cÃ³digos dos ApÃªndices e da \massa.\cite{3Trios}

%% O \emph{PPEPPS} (Pure Python EP: Projeto Solvente) Ã© um EP sintetizado com os recursos apresentados neste trabalho. Com pouca parametrizaÃ§Ã£o, o programa gera mÃºsicas inteiras, permitindo a composiÃ§Ã£o de mÃºsicas e conjuntos de mÃºsicas com facilidade. AtravÃ©s de poucas linhas de cÃ³digo e, pela execuÃ§Ã£o, pode-se obter uma pasta com as mÃºsicas. Esta facilidade e entrega tecnolÃ³gica abre possibilidades estÃ©ticas, de compartilhamento e educacionais.

%% \chapter{ConclusÃµes e trabalhos futuros} %Nome do capÃ­tulo.
%% \label{cap:conclusao}

%% No capÃ­tulo anterior estÃ¡ um sistema conciso
%% que relaciona elementos musicais ao som digital. \emph{Scripts} 
%% implementam estas relaÃ§Ãµes, e em conjunto foram nomeados \massa\ (MÃºsica
%% e Ãudio em SequÃªncias e SÃ©ries Amostrais). 
%% A exposiÃ§Ã£o didÃ¡tica destes desenvolvimentos no
%% capÃ­tulo anterior destina-se a facilitar a utilizaÃ§Ã£o
%% do arcabouÃ§o.

%% As possibilidades abertas por estes resultados envolvem a criaÃ§Ã£o de interfaces de geraÃ§Ã£o de ruÃ­dos e outros sons em alta fidelidade (\emph{hi-fi}), experimentos psicoacÃºsticos e a utilizaÃ§Ã£o destes resultados para fins artÃ­sticos e didÃ¡ticos. A incorporaÃ§Ã£o de conhecimentos
%% em programaÃ§Ã£o Ã© bastante facilitada atravÃ©s de recursos audiovisuais, o que jÃ¡ realizamos por prÃ¡ticas de \emph{livecoding} e cursos focados em ferramentas especializadas, como o Puredata e o ChucK.
%% EstÃ¡ prevista a utilizaÃ§Ã£o destes resultados com
%% mÃ©todos de inteligÃªncia artificial para geraÃ§Ã£o de materiais artÃ­sticos.

%% A disposiÃ§Ã£o online destes conteÃºdos na forma de hipertexto junto aos cÃ³digos e exemplos sonoros, todos em licenÃ§as livres, facilita colaboraÃ§Ãµes e geraÃ§Ã£o de subprodutos em co-autoria, e com isso a expansÃ£o da \massa\ com novas implementaÃ§Ãµes e desenvolvimentos das montagens musicais.
%% ExploraÃ§Ãµes sistemÃ¡ticas de parametrizaÃ§Ãµes (dos tremolos, da ADSR, etc) em alta fidelidade tem utilidade artÃ­stica e Ã© possibilitada por este trabalho com controle amostral. Tal descriÃ§Ã£o analÃ­tica precisa, junto Ã s implementaÃ§Ãµes computacionais, nÃ£o foi atingida anteriormente, como mostra o ApÃªndice~\ref{cap:trabalhosRelacionados} com uma visita aos trabalhos relacionados.

%% Este trabalho tambÃ©m teve resultados nÃ£o previstos, como a formaÃ§Ã£o de grupos
%% de interesse em torno da questÃ£o criativa aliada Ã  computaÃ§Ã£o.
%% Neste contexto, destaca-se o grupo
%% labMacambira.sf.net, que reÃºne colaboradores de todo o Brasil e alguns fora do paÃ­s.
%% Este grupo
%% jÃ¡ apresentou contribuiÃ§Ãµes relevantes em diferentes Ã¡reas
%% como Democracia Direta Digital, ferramentas de georreferenciamento e
%% atividades artÃ­sticas e educacionais, como cursos, workshops e apresentaÃ§Ãµes artÃ­sticas. VÃ¡rios destes resultados estÃ£o no ApÃªndice~\ref{cap:musicaExtra} e no acervo online, que ultrapassa 700 vÃ­deos, documentaÃ§Ãµes escritas, diversos software originais e contribuiÃ§Ãµes em software externos utilizados no mundo todo, como o Firefox, Scilab, LibreOffice, GEM/Puredata, para citar somente alguns exemplos.\cite{siteLM,wikiLM,vimeoLM}

%% HÃ¡ um aumento no nÃºmero de pesquisas relacionadas Ã  mÃºsica em andamento no campus de SÃ£o Carlos da USP, o que sugere facilidade para estabelecer parcerias.
%% As publicaÃ§Ãµes acadÃªmicas efetivadas durante este mestrado tambÃ©m apontam para uma multidisciplinaridade,
%% tratando diretamente de questÃµes humanas como artes, filosofia, humor e linguagem falada e escrita, atravÃ©s de artifÃ­cios lineares e estatÃ­sticos.\cite{FabbriSTAT,FabbriACL,FabbriComplenetVoz,FabbriComplenetTexto} Os desdobramentos estÃ£o alcanÃ§ando redes sociais e teorias epistemolÃ³gicas com base em pesquisas prÃ©vias, dos orientadores deste trabalho, com forte presenÃ§a de redes complexas e processamento de linguagem natural. 


\nocite{*}
\bibliography{phi+mus}
\end{document}
